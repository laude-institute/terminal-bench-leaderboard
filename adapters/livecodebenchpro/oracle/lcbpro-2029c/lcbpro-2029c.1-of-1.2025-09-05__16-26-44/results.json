{
    "id": "3955d644-0657-4f72-bd2a-aaabc747ef71",
    "trial_name": "lcbpro-2029c.1-of-1.2025-09-05__16-26-44",
    "task_id": "lcbpro-2029c",
    "instruction": "LiveCodeBench Pro (Mini) - external judge.\n\nThe agent must create a C++17 solution file at /app/main.cpp.\nThis task does not include local test cases. Instead, the test harness:\n  1) POSTs the code to the external judge (/submit) to get a sid,\n  2) polls GET /result/{sid}?short=1 until status == \"done\",\n  3) passes only if the judge returns passed == true.\n\nEnvironment variables (overridable at runtime):\n  - BASE_URL: judge base URL (default http://38.80.122.117:8081)\n  - PID: problem id (default 2029C)\n  - LANG: language (default cpp)\n  - CODE_PATH: path to code (default /app/main.cpp)\n  - JUDGE_TIMEOUT_SECS: poll timeout seconds (default 120)\n\nHello, Codeforces Forcescode!\n\nKevin used to be a participant of Codeforces. Recently, the KDOI Team has developed a new Online Judge called Forcescode.\n\nKevin has participated in $n$ contests on Forcescode. In the $i$-th contest, his performance rating is $a_i$.\n\nNow he has hacked into the backend of Forcescode and will select an interval $[l,r]$ ($1\\le l\\le r\\le n$), then skip all of the contests in this interval. After that, his rating will be recalculated in the following way:\n\n- Initially, his rating is $x=0$;\n- For each $1\\le i\\le n$, after the $i$-th contest,\n- If $l\\le i\\le r$, this contest will be skipped, and the rating will remain unchanged;\n- Otherwise, his rating will be updated according to the following rules:\n- If $a_i>x$, his rating $x$ will increase by $1$;\n- If $a_i=x$, his rating $x$ will remain unchanged;\n- If $a_i<x$, his rating $x$ will decrease by $1$.\n\nYou have to help Kevin to find his maximum possible rating after the recalculation if he chooses the interval $[l,r]$ optimally. Note that Kevin has to skip at least one contest.\n\n### Input\n\nEach test contains multiple test cases. The first line of the input contains a single integer $t$ ($1\\le t\\le 5\\cdot 10^4$) -- the number of test cases. The description of test cases follows.\n\nThe first line of each test case contains a single integer $n$ ($1\\le n\\le 3\\cdot 10^5$) -- the number of contests.\n\nThe second line contains $n$ integers $a_1,a_2,\\ldots,a_n$ ($1\\le a_i\\le n$) -- the performance ratings in the contests.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $3 \\cdot 10^5$.\n\n### Output\n\nFor each test case, output a single integer -- the maximum possible rating after the recalculation if Kevin chooses the interval optimally.\n\n### Example\n\n#### Input #1\n\n```\n\n5\n\n6\n\n1 2 3 4 5 6\n\n7\n\n1 2 1 1 1 3 4\n\n1\n\n1\n\n9\n\n9 9 8 2 4 4 3 5 3\n\n10\n\n1 2 3 4 1 3 2 1 1 10\n\n```\n\n#### Output #1\n\n```\n5\n4\n0\n4\n5\n```\n\n### Note\n\nIn the first test case, Kevin must skip at least one contest. If he chooses any interval of length $1$, his rating after the recalculation will be equal to $5$.\n\nIn the second test case, Kevin's optimal choice is to select the interval $[3,5]$. During the recalculation, his rating changes as follows:\n\n\n\n$$ 0 \\xrightarrow{a_1=1} 1 \\xrightarrow{a_2=2} 2 \\xrightarrow{\\mathtt{skip}} 2 \\xrightarrow{\\mathtt{skip}} 2 \\xrightarrow{\\mathtt{skip}} 2 \\xrightarrow{a_6=3} 3 \\xrightarrow{a_7=4} 4 $$\n\nIn the third test case, Kevin must skip the only contest, so his rating will remain at the initial value of $0$.\n\nIn the fourth test case, Kevin's optimal choice is to select the interval $[7,9]$. During the recalculation, his rating changes as follows:\n\n\n\n$$ 0 \\xrightarrow{a_1=9} 1 \\xrightarrow{a_2=9} 2 \\xrightarrow{a_3=8} 3 \\xrightarrow{a_4=2} 2 \\xrightarrow{a_5=4} 3 \\xrightarrow{a_6=4} 4 \\xrightarrow{\\mathtt{skip}} 4 \\xrightarrow{\\mathtt{skip}} 4 \\xrightarrow{\\mathtt{skip}} 4 $$\n\nIn the fifth test case, Kevin's optimal choice is to select the interval $[5,9]$.",
    "is_resolved": true,
    "failure_mode": "unset",
    "parser_results": {
        "test_external_judge": "passed"
    },
    "recording_path": "2025-09-05__16-26-44/lcbpro-2029c/lcbpro-2029c.1-of-1.2025-09-05__16-26-44/sessions/agent.cast",
    "total_input_tokens": 0,
    "total_output_tokens": 0,
    "trial_started_at": "2025-09-05T23:29:11.555236+00:00",
    "trial_ended_at": "2025-09-05T23:29:47.677626+00:00",
    "agent_started_at": "2025-09-05T23:29:20.378676+00:00",
    "agent_ended_at": "2025-09-05T23:29:20.931207+00:00",
    "test_started_at": "2025-09-05T23:29:23.569384+00:00",
    "test_ended_at": "2025-09-05T23:29:31.177565+00:00"
}