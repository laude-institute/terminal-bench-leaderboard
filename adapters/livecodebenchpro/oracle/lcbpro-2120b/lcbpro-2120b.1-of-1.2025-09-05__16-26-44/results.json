{
    "id": "4272af17-37a7-481c-9d95-89ed8c3194a0",
    "trial_name": "lcbpro-2120b.1-of-1.2025-09-05__16-26-44",
    "task_id": "lcbpro-2120b",
    "instruction": "LiveCodeBench Pro (Mini) - external judge.\n\nThe agent must create a C++17 solution file at /app/main.cpp.\nThis task does not include local test cases. Instead, the test harness:\n  1) POSTs the code to the external judge (/submit) to get a sid,\n  2) polls GET /result/{sid}?short=1 until status == \"done\",\n  3) passes only if the judge returns passed == true.\n\nEnvironment variables (overridable at runtime):\n  - BASE_URL: judge base URL (default http://38.80.122.117:8081)\n  - PID: problem id (default 2120B)\n  - LANG: language (default cpp)\n  - CODE_PATH: path to code (default /app/main.cpp)\n  - JUDGE_TIMEOUT_SECS: poll timeout seconds (default 120)\n\nAryan and Harshith are playing pool in universe AX120 on a fixed square pool table of side $s$ with pockets at its $4$ corners. The corners are situated at $(0,0)$, $(0,s)$, $(s,0)$, and $(s,s)$. In this game variation, $n$ identical balls are placed on the table with integral coordinates such that no ball lies on the edge or corner of the table. Then, they are all simultaneously shot at $10^{100}$ units/sec speed (only at $45$ degrees with the axes).\n\nIn universe AX120, balls and pockets are almost point-sized, and the collisions are elastic, i.e., the ball, on hitting any surface, bounces off at the same angle and with the same speed.\n\n![](https://espresso.codeforces.com/03698e95411a27b6d9ed22ef294c00b49125be41.png)\n\nHarshith shot the balls, and he provided Aryan with the balls' positions and the angles at which he shot them. Help Aryan determine the number of balls potted into the pockets by Harshith.\n\nIt is guaranteed that multiple collisions do not occur at the same moment and position.\n\n### Input\n\nEach test contains multiple test cases. The first line contains the number of test cases $t$ ($1 \\le t \\le 1000$). The description of the test cases follows.\n\nThe first line of each test case contains two integers $n$ and $s$ ($1 \\le n \\le 10^3$, $2 \\le s\\le 10^9$) -- the number of balls placed on the table and the side length of the square pool table.\n\nThe $i$-th of the next $n$ lines contains four integers $d_x$, $d_y$, $x_i$, and $y_i$ ($d_x,d_y \\in \\{-1, 1\\}$, $0 \\lt x_i, y_i \\lt s$) -- the direction vectors of the launch on the $X$-axis and $Y$-axis respectively, and the coordinates of the location where the $i$-th ball was placed. It is guaranteed that no two balls coincide at the initial moment.\n\nIt is also guaranteed that the sum of $n$ over all test cases does not exceed $10^3$.\n\n### Output\n\nFor each test case, print a single integer -- the number of balls potted in that game.\n\n### Example\n\n#### Input #1\n\n```\n\n2\n\n1 2\n\n1 1 1 1\n\n5 4\n\n1 -1 1 1\n\n1 -1 2 2\n\n-1 1 2 3\n\n1 -1 1 3\n\n-1 1 3 1\n\n```\n\n#### Output #1\n\n```\n1\n3\n```\n\n### Note\n\nIn the first test case, there is a single ball and it's shot directly towards the pocket at $(2, 2)$, thus potted.\n\nIn the second test case, the state progresses as\n\n![](https://espresso.codeforces.com/277925e8c841d4b0517ff0b6c8561252258511eb.png)$\\rightarrow$![](https://espresso.codeforces.com/44f2f377936021e233b12e14f5dba0e6d1d000e9.png)![](https://espresso.codeforces.com/9a80571022f338294cd4ac9550a4c0daa39dfd87.png)$\\rightarrow$![](https://espresso.codeforces.com/51469a70832c0ea702ea3cae0a23f7a02a03e9f8.png)![](https://espresso.codeforces.com/34ce4b1e26c93608354db73a1fa858ec6f750908.png)$\\rightarrow$![](https://espresso.codeforces.com/0174e1fba22cc3437a8783afa0e59b94a2f56cc3.png)![](https://espresso.codeforces.com/5ffdf60ffaaf63625debb70d5e8b9040ef9a496b.png)$\\rightarrow$![](https://espresso.codeforces.com/520e6431370faf82a9f177c2dfc707b39e191c9b.png)",
    "is_resolved": true,
    "failure_mode": "unset",
    "parser_results": {
        "test_external_judge": "passed"
    },
    "recording_path": "2025-09-05__16-26-44/lcbpro-2120b/lcbpro-2120b.1-of-1.2025-09-05__16-26-44/sessions/agent.cast",
    "total_input_tokens": 0,
    "total_output_tokens": 0,
    "trial_started_at": "2025-09-05T23:31:34.327870+00:00",
    "trial_ended_at": "2025-09-05T23:32:09.147478+00:00",
    "agent_started_at": "2025-09-05T23:31:47.964583+00:00",
    "agent_ended_at": "2025-09-05T23:31:48.984439+00:00",
    "test_started_at": "2025-09-05T23:31:51.489963+00:00",
    "test_ended_at": "2025-09-05T23:31:55.294548+00:00"
}