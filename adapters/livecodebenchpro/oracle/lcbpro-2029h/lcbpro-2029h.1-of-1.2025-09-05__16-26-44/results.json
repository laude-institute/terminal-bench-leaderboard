{
    "id": "518090a2-4138-4119-84cc-d65ad76f7dc5",
    "trial_name": "lcbpro-2029h.1-of-1.2025-09-05__16-26-44",
    "task_id": "lcbpro-2029h",
    "instruction": "LiveCodeBench Pro (Mini) - external judge.\n\nThe agent must create a C++17 solution file at /app/main.cpp.\nThis task does not include local test cases. Instead, the test harness:\n  1) POSTs the code to the external judge (/submit) to get a sid,\n  2) polls GET /result/{sid}?short=1 until status == \"done\",\n  3) passes only if the judge returns passed == true.\n\nEnvironment variables (overridable at runtime):\n  - BASE_URL: judge base URL (default http://38.80.122.117:8081)\n  - PID: problem id (default 2029H)\n  - LANG: language (default cpp)\n  - CODE_PATH: path to code (default /app/main.cpp)\n  - JUDGE_TIMEOUT_SECS: poll timeout seconds (default 120)\n\nGiven is an undirected graph with $n$ vertices and $m$ edges. Each edge connects two vertices $(u, v)$ and has a probability of $\\frac{p}{q}$ of appearing each day.\n\nInitially, vertex $1$ has a message. At the end of the day, a vertex has a message if and only if itself or at least one of the vertices adjacent to it had the message the day before. Note that each day, each edge chooses its appearance independently.\n\nCalculate the expected number of days before all the vertices have the message, modulo $998\\,244\\,353$.\n\n### Input\n\nThe first line contains two integers $n$ and $m$ ($1\\leq n\\leq 21$, $n-1\\leq m\\leq\\frac{n(n-1)}{2}$).\n\nThen $m$ lines follow, each containing four integers $u$, $v$, $p$, and $q$ ($1\\leq u\\neq v\\leq n$, $1\\leq p<q<998\\,244\\,353$, $\\gcd(p,q)=1$) -- there is an undirected edge between $u$ and $v$, and it has a probability of appearance of $\\frac{p}{q}$ each day.\n\nIt is guaranteed that there are no self-loops or multiple-edges in the graph and that the graph is connected if all of the edges appear.\n\nAdditional constraint in the input: Let $g\\_{i,j}$ be the probability of appearance of the edge between $i$ and $j$ ($g\\_{i,j}=0$ if there is no edge between $i$ and $j$). It is guaranteed that for any $S\\\\subseteq\\\\{1,2,\\\\ldots,n\\\\}$ ($\\|S\\|\\\\ge 1$),\n\n$$ \\prod_{i\\in S}\\left(\\prod_{j\\in\\{1,2,\\ldots,n\\}\\setminus S}(1-g_{i,j})\\right)\\not\\equiv1\\pmod{998\\,244\\,353}. $$\n\nOutput\n\nPrint a single integer in the only line of the output -- the expected number of days, modulo $998\\,244\\,353$.\n\nFormally, let $M = 998\\,244\\,353$. It can be shown that the exact answer can be expressed as an irreducible fraction $\\frac{p}{q}$, where $p$ and $q$ are integers and $q \\not \\equiv 0 \\pmod{M}$. Output the integer equal to $p \\cdot q^{-1} \\bmod M$. In other words, output such an integer $x$ that $0 \\le x < M$ and $x \\cdot q \\equiv p \\pmod{M}$.\n\n### Examples\n\n#### Input #1\n\n```\n\n2 1\n\n1 2 1 10\n\n```\n\n#### Output #1\n\n```\n10```\n\n#### Input #2\n\n```\n\n3 3\n\n1 2 1 2\n\n1 3 1 2\n\n2 3 1 2\n\n```\n\n#### Output #2\n\n```\n887328316```\n\n#### Input #3\n\n```\n\n1 0\n\n```\n\n#### Output #3\n\n```\n0```\n\n#### Input #4\n\n```\n\n5 8\n\n1 2 1 11\n\n1 3 2 11\n\n1 4 3 11\n\n1 5 4 11\n\n2 4 5 11\n\n2 5 6 11\n\n3 4 7 11\n\n4 5 8 11\n\n```\n\n#### Output #4\n\n```\n469993557```\n\n#### Input #5\n\n```\n\n21 22\n\n1 2 3 4\n\n2 3 4 5\n\n3 4 5 6\n\n5 6 7 8\n\n6 7 8 9\n\n7 8 9 10\n\n8 9 2 3\n\n9 10 3 4\n\n10 11 4 5\n\n11 12 5 6\n\n12 13 6 7\n\n13 14 7 8\n\n14 15 8 9\n\n15 16 9 10\n\n16 17 2 3\n\n17 18 3 4\n\n18 19 4 5\n\n19 20 5 6\n\n20 21 6 7\n\n1 10 100 1001\n\n15 4 147 220\n\n4 11 1 998244352\n\n```\n\n#### Output #5\n\n```\n299529765```\n\n### Note\n\nIn the first test, the answer is equal to the expected number of days before the only edge in the graph first appears, and that is $\\frac{1}{0.1}=10$.\n\nIn the second test, the answer is equal to $\\frac{20}{9}$ before it is taken modulo $998\\,244\\,353$.\n\nIn the third test, the only vertex already has the message, so the answer is $0$.",
    "is_resolved": true,
    "failure_mode": "unset",
    "parser_results": {
        "test_external_judge": "passed"
    },
    "recording_path": "2025-09-05__16-26-44/lcbpro-2029h/lcbpro-2029h.1-of-1.2025-09-05__16-26-44/sessions/agent.cast",
    "total_input_tokens": 0,
    "total_output_tokens": 0,
    "trial_started_at": "2025-09-05T23:44:21.692434+00:00",
    "trial_ended_at": "2025-09-05T23:45:49.609375+00:00",
    "agent_started_at": "2025-09-05T23:44:29.950200+00:00",
    "agent_ended_at": "2025-09-05T23:44:30.445656+00:00",
    "test_started_at": "2025-09-05T23:44:32.701041+00:00",
    "test_ended_at": "2025-09-05T23:45:33.874932+00:00"
}