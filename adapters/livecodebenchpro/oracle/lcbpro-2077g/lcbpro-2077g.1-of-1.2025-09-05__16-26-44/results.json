{
    "id": "1d82f814-fff9-466f-a93b-40bff125f211",
    "trial_name": "lcbpro-2077g.1-of-1.2025-09-05__16-26-44",
    "task_id": "lcbpro-2077g",
    "instruction": "LiveCodeBench Pro (Mini) - external judge.\n\nThe agent must create a C++17 solution file at /app/main.cpp.\nThis task does not include local test cases. Instead, the test harness:\n  1) POSTs the code to the external judge (/submit) to get a sid,\n  2) polls GET /result/{sid}?short=1 until status == \"done\",\n  3) passes only if the judge returns passed == true.\n\nEnvironment variables (overridable at runtime):\n  - BASE_URL: judge base URL (default http://38.80.122.117:8081)\n  - PID: problem id (default 2077G)\n  - LANG: language (default cpp)\n  - CODE_PATH: path to code (default /app/main.cpp)\n  - JUDGE_TIMEOUT_SECS: poll timeout seconds (default 120)\n\n[Red and Blue and Green - fn and Silentroom](https://www.youtube.com/watch?v=UeN7U474cxE)\n\n⠀\n\nYou are given a connected graph with $n$ vertices and $m$ bidirectional edges with weight not exceeding $x$. The $i$-th edge connects vertices $u_i$ and $v_i$, has weight $w_i$, and is assigned a color $c_i$ ($1 \\leq i \\leq m$, $1 \\leq u_i, v_i \\leq n$). The color $c_i$ is either red, green, or blue. It is guaranteed that there is at least one edge of each color.\n\nFor a walk where vertices and edges may be repeated, let $s_r, s_g, s_b$ denote the sum of the weights of the red, green, and blue edges that the walk passes through, respectively. If an edge is traversed multiple times, each traversal is counted separately.\n\nFind the minimum value of $\\max(s_r, s_g, s_b) - \\min(s_r, s_g, s_b)$ over all possible walks from vertex $1$ to vertex $n$.\n\n### Input\n\nEach test contains multiple test cases. The first line contains the number of test cases $t$ ($1 \\le t \\le 10^4$). The description of the test cases follows.\n\nThe first line of each test case contains three integers $n$, $m$, and $x$ ($4 \\leq n \\leq 2 \\cdot 10^5$, $n-1 \\leq m \\leq 2 \\cdot 10^5$, $1 \\leq x \\leq 2 \\cdot 10^5$) -- the number of vertices, the number of edges in the graph, and the upper bound on the weight of the edges, respectively.\n\nThe next $m$ lines each contain three integers $u_i, v_i, w_i$ and a letter $c_i$ ($1 \\leq u_i, v_i \\leq n$, $1 \\leq w_i \\leq x$), representing a bidirectional edge between vertices $u_i$ and $v_i$ with weight $w_i$ and color $c_i$. The color $c_i$ is either 'r', 'g', or 'b', denoting red, green, and blue, respectively.\n\nIt is guaranteed that the graph is connected and contains at least one edge of each color. The graph may also contain multiple edges and self-loops.\n\nAdditionally, it is guaranteed that the total sum of all values of $n$, the total sum of all values of $m$, and the total sum of all values of $x$ across all test cases do not exceed $2 \\cdot 10^5$ individually.\n\n### Output\n\nFor each test case, output a single integer -- the minimum value of $\\max(s_r, s_g, s_b) - \\min(s_r, s_g, s_b)$ over all walks from vertex $1$ to vertex $n$.\n\n### Example\n\n#### Input #1\n\n```\n\n3\n\n4 3 3\n\n1 2 2 r\n\n2 3 3 g\n\n3 4 2 b\n\n4 5 4\n\n1 2 1 r\n\n1 1 1 r\n\n2 1 1 r\n\n2 3 4 g\n\n3 4 4 b\n\n4 6 4\n\n1 2 2 r\n\n1 2 2 r\n\n2 3 3 b\n\n1 3 4 r\n\n1 4 1 g\n\n3 4 4 g\n\n```\n\n#### Output #1\n\n```\n1\n0\n0\n```\n\n### Note\n\nIn the first test case, the optimal path is $1 \\to 2 \\to 3 \\to 4$. The edges used are:\n\n- $1 \\to 2$ (red, weight $2$)\n- $2 \\to 3$ (green, weight $3$)\n- $3 \\to 4$ (blue, weight $2$)\n\nWe have $s_r = 2$, $s_g = 3$, and $s_b = 2$. Thus, the answer is $1$.\n\nIn the second test case, one of the optimal paths is $1 \\to 1 \\to 2 \\to 1 \\to 2 \\to 3 \\to 4$. The edges used are:\n\n- $1 \\to 1$ (red, weight $1$)\n- $1 \\to 2$ (red, weight $1$)\n- $2 \\to 1$ (red, weight $1$)\n- $1 \\to 2$ (red, weight $1$)\n- $2 \\to 3$ (green, weight $4$)\n- $3 \\to 4$ (blue, weight $4$)\n\nWe have $s_r = s_g = s_b = 4$. Thus, the answer is $0$.",
    "is_resolved": true,
    "failure_mode": "unset",
    "parser_results": {
        "test_external_judge": "passed"
    },
    "recording_path": "2025-09-05__16-26-44/lcbpro-2077g/lcbpro-2077g.1-of-1.2025-09-05__16-26-44/sessions/agent.cast",
    "total_input_tokens": 0,
    "total_output_tokens": 0,
    "trial_started_at": "2025-09-05T23:35:53.019455+00:00",
    "trial_ended_at": "2025-09-05T23:36:33.734622+00:00",
    "agent_started_at": "2025-09-05T23:36:03.754377+00:00",
    "agent_ended_at": "2025-09-05T23:36:04.398331+00:00",
    "test_started_at": "2025-09-05T23:36:07.261797+00:00",
    "test_ended_at": "2025-09-05T23:36:17.181743+00:00"
}