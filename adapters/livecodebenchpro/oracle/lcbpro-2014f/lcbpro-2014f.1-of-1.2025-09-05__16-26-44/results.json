{
    "id": "d0ef33d1-0903-41dd-9b64-8a5b6e491f0f",
    "trial_name": "lcbpro-2014f.1-of-1.2025-09-05__16-26-44",
    "task_id": "lcbpro-2014f",
    "instruction": "LiveCodeBench Pro (Mini) - external judge.\n\nThe agent must create a C++17 solution file at /app/main.cpp.\nThis task does not include local test cases. Instead, the test harness:\n  1) POSTs the code to the external judge (/submit) to get a sid,\n  2) polls GET /result/{sid}?short=1 until status == \"done\",\n  3) passes only if the judge returns passed == true.\n\nEnvironment variables (overridable at runtime):\n  - BASE_URL: judge base URL (default http://38.80.122.117:8081)\n  - PID: problem id (default 2014F)\n  - LANG: language (default cpp)\n  - CODE_PATH: path to code (default /app/main.cpp)\n  - JUDGE_TIMEOUT_SECS: poll timeout seconds (default 120)\n\n\"Why, master,\" quoth Little John, taking the bags and weighing them in his hand, \"here is the chink of gold.\"\n\nThe folk hero Robin Hood has been troubling Sheriff of Nottingham greatly. Sheriff knows that Robin Hood is about to attack his camps and he wants to be prepared.\n\nSheriff of Nottingham built the camps with strategy in mind and thus there are exactly $n$ camps numbered from $1$ to $n$ and $n-1$ trails, each connecting two camps. Any camp can be reached from any other camp. Each camp $i$ has initially $a_i$ gold.\n\nAs it is now, all camps would be destroyed by Robin. Sheriff can strengthen a camp by subtracting exactly $c$ gold from each of its neighboring camps and use it to build better defenses for that camp. Strengthening a camp doesn't change its gold, only its neighbors' gold. A camp can have negative gold.\n\nAfter Robin Hood's attack, all camps that have been strengthened survive the attack, all others are destroyed.\n\nWhat's the maximum gold Sheriff can keep in his surviving camps after Robin Hood's attack if he strengthens his camps optimally?\n\nCamp $a$ is neighboring camp $b$ if and only if there exists a trail connecting $a$ and $b$. Only strengthened camps count towards the answer, as others are destroyed.\n\n### Input\n\nThe first line contains a single integer $t$ ($1 \\le t \\le 10^4$) -- the number of test cases.\n\nEach test case begins with two integers $n$, $c$ ($1 \\le n \\le 2\\cdot10^5, 1 \\le c \\le 10^9$) -- the number of camps and the gold taken from each neighboring camp for strengthening.\n\nThe second line of each test case contains $n$ integers $a_1,a_2,\\dots,a_n$ ($-10^9 \\le a_i \\le 10^9$) -- the initial gold of each camp.\n\nThen follow $n-1$ lines, each with integers $u$, $v$ ($1 \\le u, v \\le n$, $u \\ne v$) -- meaning that there is a trail between $u$ and $v$.\n\nThe sum of $n$ over all test cases doesn't exceed $2\\cdot10^5$.\n\nIt is guaranteed that any camp is reachable from any other camp.\n\n### Output\n\nOutput a single integer, the maximum gold Sheriff of Nottingham can keep in his surviving camps after Robin Hood's attack.\n\n### Example\n\n#### Input #1\n\n```\n\n5\n\n3 1\n\n2 3 1\n\n1 2\n\n2 3\n\n3 1\n\n3 6 3\n\n1 2\n\n2 3\n\n3 1\n\n-2 -3 -1\n\n1 2\n\n2 3\n\n6 1\n\n5 -4 3 6 7 3\n\n4 1\n\n5 1\n\n3 5\n\n3 6\n\n1 2\n\n8 1\n\n3 5 2 7 8 5 -3 -4\n\n7 3\n\n1 8\n\n4 3\n\n3 5\n\n7 6\n\n8 7\n\n2 1\n\n```\n\n#### Output #1\n\n```\n3\n8\n0\n17\n26\n```\n\n### Note\n\nIn the first test case, it is optimal to strengthen the second base. The final gold at each base is $[1,3,0]$.\n\nIn the second test case, it is optimal to strengthen all bases. The final gold at each base is $[2,4,2]$.\n\nIn the third test case, it is optimal to not strengthen any base.",
    "is_resolved": true,
    "failure_mode": "unset",
    "parser_results": {
        "test_external_judge": "passed"
    },
    "recording_path": "2025-09-05__16-26-44/lcbpro-2014f/lcbpro-2014f.1-of-1.2025-09-05__16-26-44/sessions/agent.cast",
    "total_input_tokens": 0,
    "total_output_tokens": 0,
    "trial_started_at": "2025-09-05T23:56:27.947036+00:00",
    "trial_ended_at": "2025-09-05T23:57:03.095827+00:00",
    "agent_started_at": "2025-09-05T23:56:36.398003+00:00",
    "agent_ended_at": "2025-09-05T23:56:36.882891+00:00",
    "test_started_at": "2025-09-05T23:56:39.984166+00:00",
    "test_ended_at": "2025-09-05T23:56:44.109027+00:00"
}