[?2004hroot@90901b322dde:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@90901b322dde:/app# clear
[?2004l[H[J[3J[?2004hroot@90901b322dde:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7Cgpjb25zdCBpbnQgTUFYTiA9IDQwMDAwNTsKCmludCBuOwppbnQgYVtNQVhOXTsKdmVjdG9yPGludD4gZ1tNQVhOXTsKCi8vIEVhY2ggdmFsdWUgZnJvbSAxIHRvIG4gYXBwZWFycyBleGFjdGx5IHR3aWNlLiBXZSBzdG9yZSB0aGVpciB2ZXJ0ZXggaW5kaWNlcy4KcGFpcjxpbnQsaW50PiBwb3NbTUFYTl07CgovLyBFdWxlciBUb3VyIGFycmF5cwppbnQgdGltZXIgPSAwOwppbnQgdGluW01BWE5dLCB0b3V0W01BWE5dOwppbnQgZGVwdGhbTUFYTl07CmludCB1cFtNQVhOXVsyMF07CgppbnQgTE9HID0gMjA7Cgp2b2lkIGRmcyhpbnQgdiwgaW50IHApIHsKICAgIHRpblt2XSA9ICsrdGltZXI7CiAgICB1cFt2XVswXSA9IHA7CiAgICBmb3IgKGludCBpID0gMTsgaSA8IExPRzsgaSsrKSB7CiAgICAgICAgdXBbdl1baV0gPSB1cFt1cFt2XVtpLTFdXVtpLTFdOwogICAgfQogICAgZm9yIChhdXRvIHRvIDogZ1t2XSkgewogICAgICAgIGlmICh0byAhPSBwKSB7CiAgICAgICAgICAgIGRlcHRoW3RvXSA9IGRlcHRoW3ZdICsgMTsKICAgICAgICAgICAgZGZzKHRvLCB2KTsKICAgICAgICB9CiAgICB9CiAgICB0b3V0W3ZdID0gdGltZXI7Cn0KCmJvb2wgaXNfYW5jZXN0b3IoaW50IHUsIGludCB2KSB7CiAgICByZXR1cm4gdGluW3VdIDw9IHRpblt2XSAmJiB0b3V0W3ZdIDw9IHRvdXRbdV07Cn0KCmludCBsY2EoaW50IHUsIGludCB2KSB7CiAgICBpZiAoaXNfYW5jZXN0b3IodSx2KSkgcmV0dXJuIHU7CiAgICBpZiAoaXNfYW5jZXN0b3Iodix1KSkgcmV0dXJuIHY7CiAgICBmb3IgKGludCBpID0gTE9HLTE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgaWYgKCFpc19hbmNlc3Rvcih1cFt1XVtpXSwgdikpIHsKICAgICAgICAgICAgdSA9IHVwW3VdW2ldOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiB1cFt1XVswXTsKfQoKLy8gRm9yIHRoZSB2aXJ0dWFsIHRyZWU6Ci8vIFdlIHdpbGwgYnVpbGQgYSB2aXJ0dWFsIHRyZWUgb24gdGhlIHNldCBvZiBub2RlcyB3aGljaCBhcmUgdGhlIHBhaXJzIG9mIGVhY2ggdmFsdWUgcGx1cyB0aGVpciBMQ0FzLgovLyBUaGVuIHdlIGRvIERQIG9uIHRoZSB2aXJ0dWFsIHRyZWUgdG8gZmluZCBtaW5pbWFsIGNvc3Qgc3Vic2V0IGNvdmVyaW5nIGFsbCB2YWx1ZXMuCgovLyBXZSdsbCB1c2UgYSBzdGFjayB0byBidWlsZCB0aGUgdmlydHVhbCB0cmVlCnZlY3RvcjxpbnQ+IHZpcnR1YWxfdHJlZVtNQVhOXTsKCi8vIE1hcmsgaWYgbm9kZSBpcyBvcmlnaW5hbCAob25lIG9mIHRoZSBjaG9zZW4gcGFpciBub2Rlcykgb3Igbm90CmJvb2wgaXNfb3JpZ2luYWxbTUFYTl07CgovLyBEUCBhcnJheXMKLy8gZHBbdl1bMF0gPSBtaW5pbWFsIGNvc3Qgc3VidHJlZSByb290ZWQgYXQgdiB0aGF0IGNvdmVycyBhbGwgdmFsdWVzIGluIHN1YnRyZWUgaWYgdiBpcyBOT1QgY2hvc2VuCi8vIGRwW3ZdWzFdID0gbWluaW1hbCBjb3N0IHN1YnRyZWUgcm9vdGVkIGF0IHYgdGhhdCBjb3ZlcnMgYWxsIHZhbHVlcyBpbiBzdWJ0cmVlIGlmIHYgSVMgY2hvc2VuCi8vIEZvciBub2RlcyB0aGF0IGNvcnJlc3BvbmQgdG8gb3JpZ2luYWwgdmVydGljZXMsIHRoZXkgaGF2ZSBhIHZhbHVlIGFuZCBjb3N0Ci8vIEZvciBMQ0FzIG5vdCBpbiBvcmlnaW5hbCwgdGhleSBoYXZlIG5vIHZhbHVlLCBjb3N0IGlzIDAKCi8vIEFsc28gbmVlZCB0byBrbm93IHdoaWNoIHZhbHVlcyBhcmUgY292ZXJlZCBpbiBzdWJ0cmVlIGZvciBjb3JyZWN0bmVzcywgYnV0IHdlIGNhbiByZWx5IG9uIHByb2JsZW0gc3RydWN0dXJlOgovLyBTaW5jZSBlYWNoIHZhbHVlIGFwcGVhcnMgdHdpY2UsIGFuZCB3ZSBpbnNlcnQgYm90aCB2ZXJ0aWNlcyBmb3IgYSB2YWx1ZSwgdGhlIHN1YnRyZWUgb2YgdmlydHVhbCB0cmVlIGNvdmVycyBhbGwgdmFsdWVzCgovLyBXZSdsbCBzdG9yZSB3aGljaCB2YWx1ZXMgYXJlIGNvdmVyZWQgYnkgYSBzdWJ0cmVlIHVzaW5nIGJpdHNldCBvciBzZXRzPyBCdXQgbiB1cCB0byAyZTUsIHdlIGNhbm5vdCBzdG9yZSBiaXRzZXQuCi8vIEluc3RlYWQsIHdlIHJlbHkgb24gdGhlIHN0cnVjdHVyZToKLy8gRWFjaCBvcmlnaW5hbCBub2RlIGNvdmVycyBleGFjdGx5IG9uZSB2YWx1ZS4KLy8gVGhlIG1pbmltYWwgc3VidHJlZSB0aGF0IGNvdmVycyBhbGwgdmFsdWVzIHJvb3RlZCBhdCB2IGlzOgovLyBJZiB2IGlzIG9yaWdpbmFsLCBkcFt2XVsxXSA9IGNvc3QodiksIGRwW3ZdWzBdID0gSU5GIChjYW4ndCBub3QgY2hvb3NlIGl0IGlmIGl0IGNvdmVycyBhIHZhbHVlKQovLyBJZiB2IGlzIG5vdCBvcmlnaW5hbCwgZHBbdl1bMF0sIGRwW3ZdWzFdIGNvbXB1dGVkIGZyb20gY2hpbGRyZW4uCgovLyBUaGUgcHJvYmxlbSByZWR1Y2VzIHRvIG1pbmltdW0gdmVydGV4IHN1YnNldCBjb25uZWN0ZWQgY292ZXJpbmcgYWxsIHZhbHVlcy4gVGhlIHZpcnR1YWwgdHJlZSBidWlsdCBmcm9tIGFsbCAybiBub2RlcyB3aXRoIGFsbCBwYWlycyBhbmQgTENBIG5vZGVzIHdpbGwgYmUgbGFyZ2UsIGJ1dCBjYW4gYmUgY29uc3RydWN0ZWQgZWZmaWNpZW50bHkuCgovLyBJbXBsZW1lbnRhdGlvbiBkZXRhaWxzOgoKLy8gU2luY2UgZWFjaCB2YWx1ZSBhcHBlYXJzIGV4YWN0bHkgdHdpY2UsIHdlIGhhdmUgMm4gbm9kZXMuCi8vIFdlJ2xsIGNvbGxlY3QgYWxsIDJuIG5vZGVzIChhbGwgdmVydGljZXMpLCBzb3J0IGJ5IHRpbltdLCBhbmQgYnVpbGQgdmlydHVhbCB0cmVlIG92ZXIgdGhlbS4KLy8gV2FpdCwgcHJvYmxlbSBzYXlzOiBjaG9vc2UgYSBjb25uZWN0ZWQgc3Vic2V0IGNvdmVyaW5nIGFsbCB2YWx1ZXMsIGVhY2ggdmFsdWUgYXQgbGVhc3Qgb25jZS4KLy8gVGhlIG1pbmltYWwgY29zdCBpcyBhY2hpZXZlZCBieSBwaWNraW5nIGV4YWN0bHkgb25lIHZlcnRleCBwZXIgdmFsdWUgb3IgbW9yZSwgYnV0IG11c3QgYmUgY29ubmVjdGVkLgoKLy8gSWRlYToKLy8gV2UgaGF2ZSAybiBub2RlcywgZWFjaCB2YWx1ZSBhcHBlYXJzIHR3aWNlLgovLyBDb3N0IG9mIHZlcnRleCBpIGlzIDJeaSAodmVydGV4IGluZGV4IGkgZnJvbSAxIHRvIDJuKS4KLy8gV2Ugd2FudCB0byBwaWNrIGEgY29ubmVjdGVkIHN1YnNldCBjb3ZlcmluZyBhbGwgdmFsdWVzLgoKLy8gT2JzZXJ2YXRpb246Ci8vIEZvciBlYWNoIHZhbHVlLCBwaWNrIG9uZSBvZiB0aGUgdHdvIHZlcnRpY2VzICh0aGUgY2hlYXBlciB2ZXJ0ZXggYW1vbmcgdGhlIHR3bykgb3IgYm90aCBpZiBuZWVkZWQuCi8vIEJ1dCBzdWJzZXQgbXVzdCBiZSBjb25uZWN0ZWQuCgovLyBUaGUgcHJvYmxlbSBpcyBrbm93biBhcyBTdGVpbmVyIHRyZWUgb24gdHJlZSBmb3IgdGVybWluYWxzICh0aGUgY2hvc2VuIHZlcnRpY2VzIGZvciBlYWNoIHZhbHVlKS4KLy8gV2Ugd2FudCB0byBzZWxlY3Qgb25lIHZlcnRleCBwZXIgdmFsdWUgdG8gbWluaW1pemUgdG90YWwgY29zdCBwbHVzIGNvbm5lY3RpbmcgcGF0aCBjb3N0LgoKLy8gQXBwcm9hY2g6Ci8vIEZvciBlYWNoIHZhbHVlLCBwaWNrIHRoZSBjaGVhcGVyIHZlcnRleCBvZiB0aGUgdHdvIHZlcnRpY2VzLiBUaGVzZSBhcmUgdGhlIHRlcm1pbmFscy4KLy8gQ29uc3RydWN0IHZpcnR1YWwgdHJlZSBmcm9tIHRoZXNlIHRlcm1pbmFscy4KLy8gT24gdmlydHVhbCB0cmVlLCBEUCB0byBmaW5kIG1pbmltYWwgY29zdCBjb25uZWN0ZWQgc3VidHJlZSBjb3ZlcmluZyBhbGwgdGVybWluYWxzLgoKLy8gQnV0IHRoZSBwcm9ibGVtIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSB2ZXJ0ZXggcGVyIHZhbHVlLCBzbyB3ZSBwaWNrIHRoZSBjaGVhcGVyIHZlcnRleCBwZXIgdmFsdWUgYXMgdGVybWluYWwuCi8vIFRoZW4gY29ubmVjdCB0aGVzZSB0ZXJtaW5hbHMgd2l0aCBtaW5pbWFsIHN1YnRyZWUuCgovLyBWaXJ0dWFsIHRyZWUgYnVpbGRpbmc6Ci8vIDEpIFNvcnQgdGVybWluYWxzIGJ5IHRpbgovLyAyKSBJbnNlcnQgTENBcyBvZiBjb25zZWN1dGl2ZSB0ZXJtaW5hbHMKLy8gMykgU29ydCBhbGwgYW5kIGJ1aWxkIHRyZWUgd2l0aCBzdGFjawoKLy8gRFAgb24gdmlydHVhbCB0cmVlOgovLyBGb3IgZWFjaCBub2RlOgovLyBpZiBub2RlIGlzIHRlcm1pbmFsIChvcmlnaW5hbCBjaG9zZW4gdmVydGV4KSwgZHBbbm9kZV0gPSBjb3N0W25vZGVdCi8vIGVsc2UgZHBbbm9kZV0gPSBzdW0gb2YgZHBbY2hpbGRdCgovLyBSZXR1cm4gZHBbcm9vdF0gYW5kIG5vZGVzIGluY2x1ZGVkCgovLyBXZSdsbCByZWNvbnN0cnVjdCB0aGUgc29sdXRpb24gYnkgaW5jbHVkaW5nIGFsbCBub2RlIGluIHRoZSBkcCBzdWJ0cmVlLgoKLy8gTGV0J3MgaW1wbGVtZW50IHRoaXMuCgpsb25nIGxvbmcgY29zdChpbnQgaSkgewogICAgLy8gY29zdCBpcyAyXmkKICAgIC8vIGkgdXAgdG8gNGU1LCAyXmkgaXMgdG9vIGJpZyBmb3IgbG9uZyBsb25nCiAgICAvLyBTbyB3ZSBzdG9yZSB2ZXJ0aWNlcyBhbmQgb3V0cHV0IHRoZW0uIFRoZSBwcm9ibGVtIG9ubHkgYXNrcyB0byBwcmludCB2ZXJ0aWNlcy4KICAgIC8vIFNvIHdlIG9ubHkgbmVlZCB0byBmaW5kIHN1YnNldCBvZiB2ZXJ0aWNlcy4KICAgIC8vIEJ1dCBwcm9ibGVtIHNheXMgY29zdCBpcyAyXmkgZm9yIHZlcnRleCBpLgogICAgLy8gMl5pIGNhbiBiZSBodWdlIChpIHVwIHRvIDRlNSksIGNhbid0IHN0b3JlIGV4cGxpY2l0bHkuCiAgICAvLyBXZSBvbmx5IG5lZWQgbWluaW1hbCBzdWJzZXQsIG5vIG5lZWQgdG8gb3V0cHV0IGNvc3QuCiAgICAvLyBTbyB3ZSBjb21wYXJlIGNvc3QgYnkgaSAoc21hbGxlciBpIG1lYW5zIHNtYWxsZXIgY29zdCBiZWNhdXNlIDJeaSBncm93cyB3aXRoIGkpCiAgICAvLyBBY3R1YWxseSAyXmkgZ3Jvd3MgZXhwb25lbnRpYWxseSB3aXRoIGksIHNvIHBpY2tpbmcgdmVydGV4IHdpdGggc21hbGxlciBpIGlzIGNoZWFwZXIuCiAgICAvLyBTbyBjb3N0IG9yZGVyIGJ5IGkgYXNjZW5kaW5nLgogICAgLy8gV2UnbGwgcGljayB0aGUgdmVydGV4IHdpdGggc21hbGxlciBpIGZvciBlYWNoIHZhbHVlLgogICAgcmV0dXJuIGk7Cn0KCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKICAgIGNpbiA+PiBuOwogICAgaW50IHRvdGFsID0gMipuOwogICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gdG90YWw7IGkrKykgewogICAgICAgIGNpbiA+PiBhW2ldOwogICAgfQogICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gdG90YWw7IGkrKykgewogICAgICAgIGlmIChwb3NbYVtpXV0uZmlyc3QgPT0gMCkgcG9zW2FbaV1dLmZpcnN0ID0gaTsKICAgICAgICBlbHNlIHBvc1thW2ldXS5zZWNvbmQgPSBpOwogICAgfQogICAgZm9yIChpbnQgaSA9IDE7IGkgPCB0b3RhbDsgaSsrKSB7CiAgICAgICAgaW50IHYsdTsKICAgICAgICBjaW4gPj4gdiA+PiB1OwogICAgICAgIGdbdl0ucHVzaF9iYWNrKHUpOwogICAgICAgIGdbdV0ucHVzaF9iYWNrKHYpOwogICAgfQoKICAgIC8vIFJvb3QgYXQgMQogICAgZGVwdGhbMV0gPSAwOwogICAgZGZzKDEsMSk7CgogICAgLy8gRm9yIGVhY2ggdmFsdWUsIHBpY2sgY2hlYXBlciB2ZXJ0ZXggKHNtYWxsZXIgaSkgYXMgdGVybWluYWwKICAgIHZlY3RvcjxpbnQ+IHRlcm1pbmFsczsKICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IG47IGkrKykgewogICAgICAgIGlmIChwb3NbaV0uZmlyc3QgPCBwb3NbaV0uc2Vjb25kKSB0ZXJtaW5hbHMucHVzaF9iYWNrKHBvc1tpXS5maXJzdCk7CiAgICAgICAgZWxzZSB0ZXJtaW5hbHMucHVzaF9iYWNrKHBvc1tpXS5zZWNvbmQpOwogICAgfQoKICAgIC8vIEFkZCBMQ0FzIG9mIHRlcm1pbmFscwogICAgLy8gU29ydCB0ZXJtaW5hbHMgYnkgdGluCiAgICBzb3J0KHRlcm1pbmFscy5iZWdpbigpLCB0ZXJtaW5hbHMuZW5kKCksIFtdKGludCB4LGludCB5KXtyZXR1cm4gdGluW3hdPHRpblt5XTt9KTsKCiAgICB2ZWN0b3I8aW50PiBub2RlcyA9IHRlcm1pbmFsczsKCiAgICAvLyBBZGQgTENBcyBvZiBjb25zZWN1dGl2ZSB0ZXJtaW5hbHMKICAgIGZvciAoc2l6ZV90IGkgPSAxOyBpIDwgdGVybWluYWxzLnNpemUoKTsgaSsrKSB7CiAgICAgICAgaW50IHcgPSBsY2EodGVybWluYWxzW2ktMV0sIHRlcm1pbmFsc1tpXSk7CiAgICAgICAgbm9kZXMucHVzaF9iYWNrKHcpOwogICAgfQoKICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzCiAgICBzb3J0KG5vZGVzLmJlZ2luKCksIG5vZGVzLmVuZCgpLCBbXShpbnQgeCxpbnQgeSl7cmV0dXJuIHRpblt4XTx0aW5beV07fSk7CiAgICBub2Rlcy5lcmFzZSh1bmlxdWUobm9kZXMuYmVnaW4oKSwgbm9kZXMuZW5kKCkpLCBub2Rlcy5lbmQoKSk7CgogICAgLy8gQnVpbGQgdmlydHVhbCB0cmVlCiAgICAvLyBTb3J0IGJ5IHRpbgogICAgdmVjdG9yPGludD4gc3RhY2s7CiAgICBmb3IgKGludCB2IDogbm9kZXMpIHsKICAgICAgICB2aXJ0dWFsX3RyZWVbdl0uY2xlYXIoKTsKICAgICAgICBpc19vcmlnaW5hbFt2XSA9IGZhbHNlOwogICAgfQoKICAgIGZvciAoaW50IHYgOiB0ZXJtaW5hbHMpIHsKICAgICAgICBpc19vcmlnaW5hbFt2XSA9IHRydWU7CiAgICB9CgogICAgc3RhY2suY2xlYXIoKTsKICAgIGZvciAoaW50IHYgOiBub2RlcykgewogICAgICAgIHdoaWxlICghc3RhY2suZW1wdHkoKSAmJiAhaXNfYW5jZXN0b3Ioc3RhY2suYmFjaygpLCB2KSkgewogICAgICAgICAgICBzdGFjay5wb3BfYmFjaygpOwogICAgICAgIH0KICAgICAgICBpZiAoIXN0YWNrLmVtcHR5KCkpIHsKICAgICAgICAgICAgdmlydHVhbF90cmVlW3N0YWNrLmJhY2soKV0ucHVzaF9iYWNrKHYpOwogICAgICAgIH0KICAgICAgICBzdGFjay5wdXNoX2JhY2sodik7CiAgICB9CgogICAgLy8gRFAgb24gdmlydHVhbCB0cmVlCiAgICAvLyBkcFt2XVswXSA9IG1pbmltYWwgY29zdCBpZiB2IG5vdCBjaG9zZW4KICAgIC8vIGRwW3ZdWzFdID0gbWluaW1hbCBjb3N0IGlmIHYgY2hvc2VuCiAgICAvLyBJZiB2IGlzIHRlcm1pbmFsLCBkcFt2XVswXSA9IElORiAoY2FuJ3Qgbm90IGNob29zZSB0ZXJtaW5hbCkKCiAgICBjb25zdCBsb25nIGxvbmcgSU5GID0gMWUxODsKICAgIHVub3JkZXJlZF9tYXA8aW50LCBwYWlyPGxvbmcgbG9uZyxsb25nIGxvbmc+PiBkcDsKCiAgICBmdW5jdGlvbjx2b2lkKGludCk+IGRmc19kcCA9IFsmXShpbnQgdikgewogICAgICAgIGxvbmcgbG9uZyBzdW0wID0gMCwgc3VtMSA9IDA7CiAgICAgICAgZm9yIChpbnQgdSA6IHZpcnR1YWxfdHJlZVt2XSkgewogICAgICAgICAgICBkZnNfZHAodSk7CiAgICAgICAgICAgIHN1bTAgKz0gZHBbdV0uc2Vjb25kOyAvLyBjaGlsZCBtdXN0IGJlIGNob3NlbiBpZiBwYXJlbnQgbm90IGNob3NlbgogICAgICAgICAgICBzdW0xICs9IG1pbihkcFt1XS5maXJzdCwgZHBbdV0uc2Vjb25kKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzX29yaWdpbmFsW3ZdKSB7CiAgICAgICAgICAgIC8vIHRlcm1pbmFsIG11c3QgYmUgY2hvc2VuCiAgICAgICAgICAgIGRwW3ZdLmZpcnN0ID0gSU5GOwogICAgICAgICAgICBkcFt2XS5zZWNvbmQgPSAoMUxMIDw8IHYpICsgc3VtMTsgLy8gY29zdCA9IDJediArIGNoaWxkcmVuCiAgICAgICAgICAgIC8vIEJ1dCAyXnYgaXMgaHVnZSwgY2FuJ3Qgc3RvcmUKICAgICAgICAgICAgLy8gV2UgdXNlIHYgYXMgY29zdCBwcm94eTogc21hbGxlciB2IG1lYW5zIHNtYWxsZXIgY29zdAogICAgICAgICAgICAvLyBTbyB3ZSB1c2UgdiBhcyBjb3N0IGRpcmVjdGx5IGZvciBjb21wYXJpc29uCiAgICAgICAgICAgIC8vIFdlIHdpbGwgY29tcGFyZSBzdW1zIG9mIHYgb25seSwgd2hpY2ggaXMgc3VtIG9mIGluZGljZXMKICAgICAgICAgICAgLy8gSXQncyBub3QgZXhhY3QgYnV0IHdpbGwgYmUgY29uc2lzdGVudCBiZWNhdXNlIDJediBncm93cyBleHBvbmVudGlhbGx5CiAgICAgICAgICAgIC8vIFNvIHdlIHJlY29uc2lkZXI6IHdlIGNhbid0IHN1bSAyXnYsIGJ1dCB3ZSBvbmx5IG5lZWQgc3Vic2V0LCBub3QgY29zdAogICAgICAgICAgICAvLyBTbyBsZXQncyB0cmVhdCBjb3N0IGFzIHYgKGluZGV4KSwgcGlja2luZyBtaW5pbWFsIHN1bSBvZiBpbmRpY2VzCiAgICAgICAgICAgIC8vIEZvciBkcCwgc3VtIG9mIGluZGljZXMgaXMgdG8gYmUgbWluaW1pemVkCiAgICAgICAgICAgIC8vIFNvIGRwW3ZdLnNlY29uZCA9IHYgKyBzdW0xCiAgICAgICAgICAgIGRwW3ZdLnNlY29uZCA9IHYgKyBzdW0xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHYgbm90IHRlcm1pbmFsLCBjYW4gY2hvb3NlIG9yIG5vdAogICAgICAgICAgICBkcFt2XS5maXJzdCA9IHN1bTA7CiAgICAgICAgICAgIGRwW3ZdLnNlY29uZCA9ICB2ICsgc3VtMTsKICAgICAgICB9CiAgICB9OwoKICAgIGRmc19kcChub2Rlc1swXSk7CgogICAgLy8gUmVjb3ZlciBzb2x1dGlvbgogICAgdmVjdG9yPGludD4gYW5zd2VyOwoKICAgIGZ1bmN0aW9uPHZvaWQoaW50LGJvb2wpPiBkZnNfcmVjb3ZlciA9IFsmXShpbnQgdiwgYm9vbCBtdXN0X2Nob29zZSkgewogICAgICAgIGlmIChtdXN0X2Nob29zZSkgewogICAgICAgICAgICBhbnN3ZXIucHVzaF9iYWNrKHYpOwogICAgICAgICAgICBmb3IgKGludCB1IDogdmlydHVhbF90cmVlW3ZdKSB7CiAgICAgICAgICAgICAgICBpZiAoZHBbdV0uZmlyc3QgPCBkcFt1XS5zZWNvbmQpIGRmc19yZWNvdmVyKHUsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGVsc2UgZGZzX3JlY292ZXIodSwgdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGludCB1IDogdmlydHVhbF90cmVlW3ZdKSB7CiAgICAgICAgICAgICAgICBkZnNfcmVjb3Zlcih1LCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgaWYgKGRwW25vZGVzWzBdXS5maXJzdCA8IGRwW25vZGVzWzBdXS5zZWNvbmQpIGRmc19yZWNvdmVyKG5vZGVzWzBdLCBmYWxzZSk7CiAgICBlbHNlIGRmc19yZWNvdmVyKG5vZGVzWzBdLCB0cnVlKTsKCiAgICAvLyBPdXRwdXQKICAgIGNvdXQgPDwgKGludClhbnN3ZXIuc2l6ZSgpIDw8ICJcbiI7CiAgICBmb3IgKGludCB4IDogYW5zd2VyKSBjb3V0IDw8IHggPDwgIiAiOwogICAgY291dCA8PCAiXG4iOwoKICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@90901b322dde:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@90901b322dde:/app# 