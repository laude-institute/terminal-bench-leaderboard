[?2004hroot@5c6a3f392b80:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@5c6a3f392b80:/app# clear
[?2004l[H[J[3J[?2004hroot@5c6a3f392b80:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBDZWlsaW5nIGRpdmlzaW9uCmlubGluZSBpbnQgY2VpbF9kaXYoaW50IGEsIGludCBiKSB7CiAgICByZXR1cm4gKGEgKyBiIC0gMSkgLyBiOwp9CgovLyBQcmVmaXggc3VtcyBmb3IgZmFzdCBpbnRlcnZhbCBzdW1zCnZlY3Rvcjxsb25nIGxvbmc+IHByZWZpeF9zdW0oY29uc3QgdmVjdG9yPGludD4mIHYpIHsKICAgIHZlY3Rvcjxsb25nIGxvbmc+IHBzKHYuc2l6ZSgpICsgMSwgMCk7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IChpbnQpdi5zaXplKCk7IGkrKykgewogICAgICAgIHBzW2krMV0gPSBwc1tpXSArIHZbaV07CiAgICB9CiAgICByZXR1cm4gcHM7Cn0KCi8vIEZpbmQgdGhlIG1pbmltYWwgcmlnaHQgaW5kZXggciA+PSBsIHNvIHRoYXQgc3VtW2wuLnJdID49IHRhcmdldCwgb3IgLTEgaWYgbm9uZQppbnQgZmluZF9zdWJhcnJheShjb25zdCB2ZWN0b3I8bG9uZyBsb25nPiYgcHMsIGludCBzdGFydCwgbG9uZyBsb25nIHRhcmdldCkgewogICAgaW50IGxvID0gc3RhcnQsIGhpID0gKGludClwcy5zaXplKCkgLSAxLCByZXMgPSAtMTsKICAgIHdoaWxlIChsbyA8PSBoaSkgewogICAgICAgIGludCBtaWQgPSAobG8gKyBoaSkgLyAyOwogICAgICAgIGxvbmcgbG9uZyBzdW1fc3ViID0gcHNbbWlkXSAtIHBzW3N0YXJ0LTFdOwogICAgICAgIGlmIChzdW1fc3ViID49IHRhcmdldCkgewogICAgICAgICAgICByZXMgPSBtaWQ7CiAgICAgICAgICAgIGhpID0gbWlkIC0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsbyA9IG1pZCArIDE7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlczsKfQoKaW50IG1haW4oKSB7CiAgICBpb3M6OnN5bmNfd2l0aF9zdGRpbyhmYWxzZSk7CiAgICBjaW4udGllKG51bGxwdHIpOwogICAgCiAgICBpbnQgdDsgY2luID4+IHQ7CiAgICB3aGlsZSAodC0tKSB7CiAgICAgICAgaW50IG47IGNpbiA+PiBuOwogICAgICAgIHZlY3RvcjxpbnQ+IGEobiksIGIobiksIGMobik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIGNpbiA+PiBhW2ldOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSBjaW4gPj4gYltpXTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgY2luID4+IGNbaV07CiAgICAgICAgCiAgICAgICAgbG9uZyBsb25nIHRvdCA9IDA7CiAgICAgICAgZm9yIChhdXRvIHggOiBhKSB0b3QgKz0geDsKICAgICAgICAvLyB0b3QgaXMgc2FtZSBmb3IgYiBhbmQgYyBndWFyYW50ZWVkCiAgICAgICAgbG9uZyBsb25nIHRocmVzaG9sZCA9IGNlaWxfZGl2KHRvdCwgMyk7CgogICAgICAgIC8vIHByZWZpeCBzdW1zIDEtaW5kZXhlZAogICAgICAgIGF1dG8gcGEgPSBwcmVmaXhfc3VtKGEpOwogICAgICAgIGF1dG8gcGIgPSBwcmVmaXhfc3VtKGIpOwogICAgICAgIGF1dG8gcGMgPSBwcmVmaXhfc3VtKGMpOwoKICAgICAgICAvLyBXZSB3YW50IHRvIGFzc2lnbiB0aHJlZSBjb250aWd1b3VzLCBub24tb3ZlcmxhcHBpbmcgc3ViYXJyYXlzIGNvdmVyaW5nIHNvbWUgcGFydHMgb2YgWzEuLm5dCiAgICAgICAgLy8gT3JkZXIgdGhlbSBpbiBjYWtlIG9yZGVyOiBBbGljZSBzbGljZSwgdGhlbiBCb2Igc2xpY2UsIHRoZW4gQ2hhcmxpZSBzbGljZSAob3IgYW55IHBlcm11dGF0aW9uKQogICAgICAgIC8vIFdlJ2xsIHRyeSBhbGwgcGVybXV0YXRpb25zIG9mIChBbGljZSwgQm9iLCBDaGFybGllKSBhc3NpZ25lZCB0byBjb250aWd1b3VzIHNlZ21lbnRzIGluIG9yZGVyCiAgICAgICAgLy8gQmVjYXVzZSB0aGV5IG11c3QgYmUgY29udGlndW91cyBhbmQgbm9uLW92ZXJsYXBwaW5nLCB0aGUgY2FrZSBpcyBzcGxpdCBpbnRvIHRocmVlIGNvbnRpZ3VvdXMgc2VnbWVudHMKICAgICAgICAvLyBXZSB0cnkgYWxsIDYgcGVybXV0YXRpb25zIG9mIHBlcnNvbnMgZm9yIHRob3NlIHNlZ21lbnRzCgogICAgICAgIHZlY3RvcjxzdHJpbmc+IHBlcnNvbnMgPSB7IkEiLCAiQiIsICJDIn07CiAgICAgICAgLy8gc3VtIGFuZCBwcmVmaXggc3VtcyBtYXAKICAgICAgICB1bm9yZGVyZWRfbWFwPGNoYXIsIHZlY3Rvcjxsb25nIGxvbmc+PiBwcmVmaXhfbWFwID0ge3snQScsIHBhfSwgeydCJywgcGJ9LCB7J0MnLCBwY319OwoKICAgICAgICBib29sIGZvdW5kID0gZmFsc2U7CiAgICAgICAgLy8gV2UnbGwgdHJ5IHRvIHNwbGl0IHRoZSBjYWtlIGludG8gdGhyZWUgY29udGlndW91cyBpbnRlcnZhbHM6IFsxLi54XSwgW3grMS4ueV0sIFt5KzEuLm5dCiAgICAgICAgLy8gRm9yIGVhY2ggcGVybXV0YXRpb24gb2YgcGVyc29ucywgdHJ5IGFsbCB4LCB5IHdpdGggMSA8PSB4IDwgeSA8IG4KICAgICAgICAvLyBGb3IgZWZmaWNpZW5jeSwgd2UgdHJ5IHRvIGZpbmQgbWluaW1hbCBpbnRlcnZhbHMgZm9yIGVhY2ggcGVyc29uIHN0YXJ0aW5nIGF0IGdpdmVuIGxlZnQgaW5kZXgKCiAgICAgICAgdmVjdG9yPGNoYXI+IG9yZGVyID0geydBJywnQicsJ0MnfTsKCiAgICAgICAgZG8gewogICAgICAgICAgICAvLyBGb3IgZml4ZWQgb3JkZXIgUDEsUDIsUDMsIHRyeSBhbGwgcG9zc2libGUgc3BsaXQgcG9pbnRzIHgseQogICAgICAgICAgICAvLyBUbyBvcHRpbWl6ZSwgd2UgZmluZCBtaW5pbWFsIHJpZ2h0IGludGVydmFscyBmb3IgUDEgc3RhcnRpbmcgYXQgMS4ubi0yCiAgICAgICAgICAgIC8vIHRoZW4gZm9yIFAyIHN0YXJ0aW5nIGF0IHgrMS4ubi0xLCBhbmQgdGhlbiBQMyBhdCB5KzEuLm4KICAgICAgICAgICAgLy8gQnV0IHdlIGNhbiB0cnkgYSBsaW5lYXIgc2NhbiBmb3IgeCBhbmQgeSBpbiBuZXN0ZWQgbG9vcHMKCiAgICAgICAgICAgIC8vIFdlIHdhbnQgdG8gYXZvaWQgTyhuXjIpIGxvb3BzLiBJbnN0ZWFkLCB3ZSBjYW4gZG8gYSB0d28gcG9pbnRlciBhcHByb2FjaDoKICAgICAgICAgICAgLy8gRm9yIFAxLCBhdCBsZWZ0PTEsIGZpbmQgbWluaW1hbCByMSBzbyBzdW0gPj0gdGhyZXNob2xkCiAgICAgICAgICAgIC8vIEZvciBQMiwgc3RhcnRpbmcgYXQgcjErMSwgZmluZCBtaW5pbWFsIHIyIHNvIHN1bSA+PSB0aHJlc2hvbGQKICAgICAgICAgICAgLy8gVGhlbiBQMyBpcyByZXN0IFtyMisxLi5uXSwgY2hlY2sgc3VtID49IHRocmVzaG9sZAoKICAgICAgICAgICAgLy8gV2UnbGwgdHJ5IGFsbCBwb3NzaWJsZSByMSBmcm9tIDEgdG8gbi0yIGZvciBQMQogICAgICAgICAgICAvLyBGb3IgZWFjaCByMSBmb3VuZCwgZmluZCBtaW5pbWFsIHIyIGZvciBQMgoKICAgICAgICAgICAgLy8gVG8gZG8gdGhpcywgZml4IGwxPTEKICAgICAgICAgICAgLy8gRmluZCBtaW5pbWFsIHIxID49IGwxIHdpdGggc3VtID49IHRocmVzaG9sZCBmb3IgUDEKICAgICAgICAgICAgLy8gVGhlbiBsMiA9IHIxKzEKICAgICAgICAgICAgLy8gRmluZCBtaW5pbWFsIHIyID49IGwyIHdpdGggc3VtID49IHRocmVzaG9sZCBmb3IgUDIKICAgICAgICAgICAgLy8gVGhlbiBsMyA9IHIyKzEKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3VtIGZvciBQMyBmcm9tIGwzIHRvIG4gPj0gdGhyZXNob2xkCgogICAgICAgICAgICBpbnQgbDEgPSAxOwogICAgICAgICAgICBpbnQgbl8gPSBuOwogICAgICAgICAgICBhdXRvICZwMV9wcyA9IHByZWZpeF9tYXBbb3JkZXJbMF1dOwogICAgICAgICAgICBhdXRvICZwMl9wcyA9IHByZWZpeF9tYXBbb3JkZXJbMV1dOwogICAgICAgICAgICBhdXRvICZwM19wcyA9IHByZWZpeF9tYXBbb3JkZXJbMl1dOwoKICAgICAgICAgICAgLy8gRmluZCBtaW5pbWFsIHIxIGZvciBwMQogICAgICAgICAgICBpbnQgcjEgPSBmaW5kX3N1YmFycmF5KHAxX3BzLCBsMSwgdGhyZXNob2xkKTsKICAgICAgICAgICAgaWYgKHIxID09IC0xIHx8IHIxID49IG4gLSAxKSBjb250aW51ZTsgLy8gbXVzdCBhbGxvdyBzcGFjZSBmb3IgcDIgYW5kIHAzCgogICAgICAgICAgICAvLyBGb3IgcDIsIHN0YXJ0aW5nIGF0IHIxKzEKICAgICAgICAgICAgaW50IGwyID0gcjEgKyAxOwogICAgICAgICAgICBpZiAobDIgPiBuIC0gMSkgY29udGludWU7CiAgICAgICAgICAgIGludCByMiA9IGZpbmRfc3ViYXJyYXkocDJfcHMsIGwyLCB0aHJlc2hvbGQpOwogICAgICAgICAgICBpZiAocjIgPT0gLTEgfHwgcjIgPj0gbikgY29udGludWU7IC8vIG11c3QgYWxsb3cgc3BhY2UgZm9yIHAzCgogICAgICAgICAgICBpbnQgbDMgPSByMiArIDE7CiAgICAgICAgICAgIGlmIChsMyA+IG4pIGNvbnRpbnVlOwogICAgICAgICAgICAvLyBzdW0gZm9yIHAzIGZyb20gbDMgdG8gbgogICAgICAgICAgICBsb25nIGxvbmcgcDNfc3VtID0gcDNfcHNbbl0gLSBwM19wc1tsMyAtIDFdOwogICAgICAgICAgICBpZiAocDNfc3VtIDwgdGhyZXNob2xkKSBjb250aW51ZTsKCiAgICAgICAgICAgIC8vIEZvdW5kIGEgdmFsaWQgY3V0CiAgICAgICAgICAgIC8vIE91dHB1dCBpbmRpY2VzIGFjY29yZGluZyB0byBvcmRlcgogICAgICAgICAgICAvLyBvcmRlclswXTogbDEuLnIxCiAgICAgICAgICAgIC8vIG9yZGVyWzFdOiBsMi4ucjIKICAgICAgICAgICAgLy8gb3JkZXJbMl06IGwzLi5uCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBNYXAgYmFjayB0byBBLEIsQwogICAgICAgICAgICBpbnQgbGEsIHJhLCBsYiwgcmIsIGxjLCByYzsKICAgICAgICAgICAgbWFwPGNoYXIsIHBhaXI8aW50LGludD4+IGFuczsKICAgICAgICAgICAgYW5zW29yZGVyWzBdXSA9IHtsMSwgcjF9OwogICAgICAgICAgICBhbnNbb3JkZXJbMV1dID0ge2wyLCByMn07CiAgICAgICAgICAgIGFuc1tvcmRlclsyXV0gPSB7bDMsIG59OwoKICAgICAgICAgICAgbGEgPSBhbnNbJ0EnXS5maXJzdDsgcmEgPSBhbnNbJ0EnXS5zZWNvbmQ7CiAgICAgICAgICAgIGxiID0gYW5zWydCJ10uZmlyc3Q7IHJiID0gYW5zWydCJ10uc2Vjb25kOwogICAgICAgICAgICBsYyA9IGFuc1snQyddLmZpcnN0OyByYyA9IGFuc1snQyddLnNlY29uZDsKCiAgICAgICAgICAgIGNvdXQgPDwgbGEgPDwgJyAnIDw8IHJhIDw8ICcgJyA8PCBsYiA8PCAnICcgPDwgcmIgPDwgJyAnIDw8IGxjIDw8ICcgJyA8PCByYyA8PCAnXG4nOwogICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICB9IHdoaWxlIChuZXh0X3Blcm11dGF0aW9uKG9yZGVyLmJlZ2luKCksIG9yZGVyLmVuZCgpKSk7CgogICAgICAgIGlmICghZm91bmQpIGNvdXQgPDwgLTEgPDwgJ1xuJzsKICAgIH0KCiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@5c6a3f392b80:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@5c6a3f392b80:/app# 