['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBQcm9ibGVtOiBMaXZlQ29kZUJlbmNoIFBybyAoTWluaSkgLSBleHRlcm5hbCBqdWRnZQovLyBTb2x1dGlvbiBieSBBSSBhc3Npc3RhbnQKCi8vIFdlIG1vZGVsIHRoZSBsdWdnYWdlIG1vdmVtZW50cyBhbmQgY29uc3RyYWludHMgd2l0aCBhIG1pbi1jb3N0IGZsb3cgYXBwcm9hY2guCi8vIFRoZSBnb2FsIGlzIHRvIG1heGltaXplIHRoZSB0b3RhbCBsdWdnYWdlIHRoYXQgcmVtYWlucyB1bmZvdW5kIGFmdGVyIHVwIHRvIGsgZGF5cyBpbmRlcGVuZGVudGx5LgovLyBGb3IgZWFjaCBrLCB3ZSBzb2x2ZSBhIG1heCBmbG93IHdpdGggbG93ZXIgYm91bmRzIGNvbnNpZGVyaW5nIHRoZSBmbGlnaHRzIGFuZCB0aGUgbWluaW11bSBsdWdnYWdlIGZvdW5kLgoKdXNpbmcgbGwgPSBsb25nIGxvbmc7CgpzdHJ1Y3QgRWRnZSB7CiAgICBpbnQgdG8sIHJldjsKICAgIGxsIGNhcDsKfTsKCnN0cnVjdCBNYXhGbG93IHsKICAgIGludCBuOwogICAgdmVjdG9yPHZlY3RvcjxFZGdlPj4gZzsKICAgIHZlY3RvcjxpbnQ+IGxldmVsLCBpdGVyOwoKICAgIE1heEZsb3coaW50IG4pIDogbihuKSwgZyhuKSwgbGV2ZWwobiksIGl0ZXIobikge30KCiAgICB2b2lkIGFkZF9lZGdlKGludCBmcm9tLCBpbnQgdG8sIGxsIGNhcCkgewogICAgICAgIGdbZnJvbV0ucHVzaF9iYWNrKHt0bywgKGludClnW3RvXS5zaXplKCksIGNhcH0pOwogICAgICAgIGdbdG9dLnB1c2hfYmFjayh7ZnJvbSwgKGludClnW2Zyb21dLnNpemUoKSAtIDEsIDB9KTsKICAgIH0KCiAgICB2b2lkIGJmcyhpbnQgcykgewogICAgICAgIGZpbGwobGV2ZWwuYmVnaW4oKSwgbGV2ZWwuZW5kKCksIC0xKTsKICAgICAgICBxdWV1ZTxpbnQ+IHF1ZTsKICAgICAgICBsZXZlbFtzXSA9IDA7CiAgICAgICAgcXVlLnB1c2gocyk7CiAgICAgICAgd2hpbGUoIXF1ZS5lbXB0eSgpKSB7CiAgICAgICAgICAgIGludCB2ID0gcXVlLmZyb250KCk7IHF1ZS5wb3AoKTsKICAgICAgICAgICAgZm9yKGF1dG8gJmUgOiBnW3ZdKSB7CiAgICAgICAgICAgICAgICBpZihlLmNhcCA+IDAgJiYgbGV2ZWxbZS50b10gPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgbGV2ZWxbZS50b10gPSBsZXZlbFt2XSArIDE7CiAgICAgICAgICAgICAgICAgICAgcXVlLnB1c2goZS50byk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgbGwgZGZzKGludCB2LCBpbnQgdCwgbGwgdXApIHsKICAgICAgICBpZih2ID09IHQpIHJldHVybiB1cDsKICAgICAgICBmb3IoaW50ICZpID0gaXRlclt2XTsgaSA8IChpbnQpZ1t2XS5zaXplKCk7IGkrKykgewogICAgICAgICAgICBFZGdlICZlID0gZ1t2XVtpXTsKICAgICAgICAgICAgaWYoZS5jYXAgPiAwICYmIGxldmVsW3ZdIDwgbGV2ZWxbZS50b10pIHsKICAgICAgICAgICAgICAgIGxsIGQgPSBkZnMoZS50bywgdCwgbWluKHVwLCBlLmNhcCkpOwogICAgICAgICAgICAgICAgaWYoZCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBlLmNhcCAtPSBkOwogICAgICAgICAgICAgICAgICAgIGdbZS50b11bZS5yZXZdLmNhcCArPSBkOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIGxsIG1heF9mbG93KGludCBzLCBpbnQgdCkgewogICAgICAgIGxsIGZsb3cgPSAwOwogICAgICAgIHdoaWxlKHRydWUpIHsKICAgICAgICAgICAgYmZzKHMpOwogICAgICAgICAgICBpZihsZXZlbFt0XSA8IDApIHJldHVybiBmbG93OwogICAgICAgICAgICBmaWxsKGl0ZXIuYmVnaW4oKSwgaXRlci5lbmQoKSwgMCk7CiAgICAgICAgICAgIGxsIGY7CiAgICAgICAgICAgIHdoaWxlKChmID0gZGZzKHMsIHQsIExMT05HX01BWCkpID4gMCkgewogICAgICAgICAgICAgICAgZmxvdyArPSBmOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9OwoKLy8gV2Ugd2lsbCBzb2x2ZSB0aGUgcHJvYmxlbSBieSBtb2RlbGluZyB0aGUgbHVnZ2FnZSBkaXN0cmlidXRpb24gYWZ0ZXIgayBkYXlzIGFzIGEgZmxvdyBuZXR3b3JrLgovLyBUaGUgY29yZSBpbnNpZ2h0OgovLyAtIEVhY2ggYWlycG9ydCBpcyBhIG5vZGUuCi8vIC0gTG9zdCBsdWdnYWdlIGNhbiBtb3ZlIGFsb25nIGVkZ2VzIHJlcHJlc2VudGluZyBmbGlnaHRzIHdpdGggY2FwYWNpdGllcyBhX3tpLGp9IGFuZCBjX3tpLGp9IG92ZXIgayBkYXlzLgovLyAtIEFmdGVyIGZsaWdodHMsIGx1Z2dhZ2UgPj0gYl97aSxqfSBpcyBmb3VuZCwgc28gbHVnZ2FnZSByZW1haW5pbmcgaW4gYWlycG9ydCBqIGFmdGVyIGRheSBpIG11c3QgYmUgPD0gYl97aSxqfS4KLy8gLSBXZSB3YW50IHRvIG1heGltaXplIHRoZSBzdW0gb2YgbHVnZ2FnZSByZW1haW5pbmcgdW5mb3VuZCwgaS5lLiwgc3VtIG9mIGx1Z2dhZ2UgYXQgYWlycG9ydHMgYWZ0ZXIgY2hlY2tzLgoKLy8gQmVjYXVzZSB0aGUgcHJvYmxlbSBpcyBjb21wbGV4LCB3ZSBidWlsZCBhIGZsb3cgbmV0d29yayByZXByZXNlbnRpbmcgdGhlIGVudGlyZSBrIGRheXMuCi8vIFdlIHVzZSBhIGJpbmFyeSBzZWFyY2ggb24gdGhlIHRvdGFsIHVuZm91bmQgbHVnZ2FnZSwgdmVyaWZ5aW5nIGZlYXNpYmlsaXR5IHdpdGggZmxvdy4KCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKICAgIGludCB0OyBjaW4gPj4gdDsKICAgIHdoaWxlKHQtLSkgewogICAgICAgIGludCBuLCBtOyBjaW4gPj4gbiA+PiBtOwogICAgICAgIHZlY3RvcjxsbD4gcyhuKTsKICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSBjaW4gPj4gc1tpXTsKCiAgICAgICAgdmVjdG9yPHZlY3RvcjxsbD4+IGEobSwgdmVjdG9yPGxsPihuKSk7CiAgICAgICAgdmVjdG9yPHZlY3RvcjxsbD4+IGIobSwgdmVjdG9yPGxsPihuKSk7CiAgICAgICAgdmVjdG9yPHZlY3RvcjxsbD4+IGMobSwgdmVjdG9yPGxsPihuKSk7CgogICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBtOyBpKyspIHsKICAgICAgICAgICAgZm9yKGludCBqID0gMDsgaiA8IG47IGorKykgY2luID4+IGFbaV1bal07CiAgICAgICAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBuOyBqKyspIGNpbiA+PiBiW2ldW2pdOwogICAgICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwgbjsgaisrKSBjaW4gPj4gY1tpXVtqXTsKICAgICAgICB9CgogICAgICAgIC8vIEZvciBlYWNoIGsgZnJvbSAxIHRvIG0sIHdlIHNvbHZlIGluZGVwZW5kZW50bHkuCiAgICAgICAgLy8gV2UgY29uc3RydWN0IGEgZmxvdyBuZXR3b3JrIGZvciBrIGRheXMuCgogICAgICAgIC8vIFdlIGNyZWF0ZSBub2RlIGxheWVycyBwZXIgZGF5OiBlYWNoIGRheSBoYXMgbiBhaXJwb3J0cy4KICAgICAgICAvLyBXZSBjb25uZWN0IGx1Z2dhZ2UgZmxvdyBmcm9tIGRheSBkLTEgdG8gZGF5IGQuCiAgICAgICAgLy8gVGhlIGluaXRpYWwgbHVnZ2FnZSBzIGlzIGF0IGRheSAwLgoKICAgICAgICAvLyBEZWZpbmUgbm9kZSBpbmRpY2VzOgogICAgICAgIC8vIEZvciBkYXkgZCBpbiBbMC4ua10sIG5vZGUgZm9yIGFpcnBvcnQgaiBpcyBkKm4gKyBqCiAgICAgICAgLy8gQWRkIHN1cGVyIHNvdXJjZSBhbmQgc3VwZXIgc2luay4KCiAgICAgICAgLy8gVGhlIG5ldHdvcmsgY2FwYWNpdHkgZWRnZXM6CiAgICAgICAgLy8gLSBGcm9tIHN1cGVyIHNvdXJjZSB0byBkYXkgMCBhaXJwb3J0czogY2FwYWNpdHkgc1tqXQogICAgICAgIC8vIC0gQmV0d2VlbiBkYXlzOiBmbGlnaHRzIGNhcGFjaXRpZXMgKGEgYW5kIGMpCiAgICAgICAgLy8gLSBGb3IgbHVnZ2FnZSBmb3VuZCBjaGVjazoKICAgICAgICAvLyAgIFdlIGxpbWl0IGx1Z2dhZ2UgcmVtYWluaW5nIGFmdGVyIGZsaWdodHMgPj0gYltpLGpdIGZvdW5kLCBzbyBsdWdnYWdlIDw9IG1heCBsdWdnYWdlIGF0IGFpcnBvcnQuCgogICAgICAgIC8vIFdlIHdhbnQgdG8gY2hlY2sgbWF4aW11bSB0b3RhbCBsdWdnYWdlIHJlbWFpbmluZyBhZnRlciBrIGRheXMuCgogICAgICAgIC8vIEJpbmFyeSBzZWFyY2ggb24gYW5zd2VyIGZvciBlYWNoIGsuCgogICAgICAgIC8vIFRvIHNpbXBsaWZ5LCB3ZSBpbXBsZW1lbnQgYSBmZWFzaWJpbGl0eSBjaGVjayBmb3IgYSBnaXZlbiB0b3RhbCBsdWdnYWdlLgoKICAgICAgICAvLyBCdXQgdGhlIHByb2JsZW0gc3RhdGVzIHRoYXQgZm9yIGVhY2ggaywgdGhlIGFuc3dlciBpcyBpbmRlcGVuZGVudC4KCiAgICAgICAgLy8gV2Ugd2lsbCBpbXBsZW1lbnQgYSBmdW5jdGlvbiB0byBjb21wdXRlIG1heCB1bmZvdW5kIGx1Z2dhZ2UgZm9yIGdpdmVuIGsuCgogICAgICAgIGF1dG8gc29sdmVfZm9yX2sgPSBbJl0oaW50IGspIC0+IGxsIHsKICAgICAgICAgICAgLy8gV2UgdXNlIGEgbWF4IGZsb3cgd2l0aCBsb3dlciBib3VuZHMgdG8gbW9kZWwgdGhlIHByb2JsZW0uCiAgICAgICAgICAgIC8vIEJ1dCB0byBrZWVwIHNvbHV0aW9uIG1hbmFnZWFibGUsIHdlIHNpbXVsYXRlIGRheSBieSBkYXkgd2l0aCBEUCBhbmQgZmxvdy4KICAgICAgICAgICAgLy8gR2l2ZW4gY29uc3RyYWludHMsIHdlIGltcGxlbWVudCBhIGZsb3cgbmV0d29yayB3aXRoIDIqbiprIG5vZGVzICsgc291cmNlICsgc2luay4KCiAgICAgICAgICAgIGludCBkYXlzID0gazsKICAgICAgICAgICAgaW50IG5vZGVzID0gKGRheXMrMSkqbiArIDI7CiAgICAgICAgICAgIGludCBTID0gbm9kZXMgLSAyOwogICAgICAgICAgICBpbnQgVCA9IG5vZGVzIC0gMTsKCiAgICAgICAgICAgIE1heEZsb3cgbWYobm9kZXMpOwoKICAgICAgICAgICAgLy8gQWRkIGVkZ2VzIGZyb20gc291cmNlIHRvIGRheTAgYWlycG9ydHMgd2l0aCBjYXBhY2l0eSBzW2pdCiAgICAgICAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBuOyBqKyspIHsKICAgICAgICAgICAgICAgIG1mLmFkZF9lZGdlKFMsIGosIHNbal0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBGb3IgZWFjaCBkYXkgZCBpbiBbMC4uZGF5cy0xXSwgY29ubmVjdCBhaXJwb3J0cyBkYXkgZCB0byBkYXkgZCsxCiAgICAgICAgICAgIGZvcihpbnQgZCA9IDA7IGQgPCBkYXlzOyBkKyspIHsKICAgICAgICAgICAgICAgIGludCBiYXNlX2N1ciA9IGQqbjsKICAgICAgICAgICAgICAgIGludCBiYXNlX254dCA9IChkKzEpKm47CgogICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggYWlycG9ydCBqLCBjb25uZWN0IHRvIG5leHQgZGF5IGFpcnBvcnQgaiB3aXRoIGluZmluaXRlIGNhcGFjaXR5IChjYXJyeSBvdmVyIGx1Z2dhZ2UpCiAgICAgICAgICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwgbjsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgbWYuYWRkX2VkZ2UoYmFzZV9jdXIgKyBqLCBiYXNlX254dCArIGosIExMT05HX01BWC8yKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBBZGQgZmxpZ2h0IGVkZ2VzIGZvciBkYXkgZAogICAgICAgICAgICAgICAgZm9yKGludCBqID0gMDsgaiA8IG47IGorKykgewogICAgICAgICAgICAgICAgICAgIGludCBwcmV2X2FpcnBvcnQgPSAoaiAtIDEgKyBuKSAlIG47CiAgICAgICAgICAgICAgICAgICAgaW50IG5leHRfYWlycG9ydCA9IChqICsgMSkgJSBuOwogICAgICAgICAgICAgICAgICAgIC8vIEZsaWdodHMgb2YgZmlyc3QgdHlwZTogZnJvbSBqIHRvIHByZXZfYWlycG9ydAogICAgICAgICAgICAgICAgICAgIC8vIFdpdGggY2FwYWNpdHkgYV97ZCxqfQogICAgICAgICAgICAgICAgICAgIG1mLmFkZF9lZGdlKGJhc2VfY3VyICsgaiwgYmFzZV9ueHQgKyBwcmV2X2FpcnBvcnQsIGFbZF1bal0pOwogICAgICAgICAgICAgICAgICAgIC8vIEZsaWdodHMgb2Ygc2Vjb25kIHR5cGU6IGZyb20gaiB0byBuZXh0X2FpcnBvcnQKICAgICAgICAgICAgICAgICAgICAvLyBXaXRoIGNhcGFjaXR5IGNfe2Qsan0KICAgICAgICAgICAgICAgICAgICBtZi5hZGRfZWRnZShiYXNlX2N1ciArIGosIGJhc2Vfbnh0ICsgbmV4dF9haXJwb3J0LCBjW2RdW2pdKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBUbyBtb2RlbCB0aGUgbHVnZ2FnZSBmb3VuZCBjaGVjazoKICAgICAgICAgICAgICAgIC8vIFRoZSBsdWdnYWdlIGF0IGVhY2ggYWlycG9ydCBhZnRlciBkYXkgZCBtdXN0IGJlIDw9IGJfe2Qsan0KICAgICAgICAgICAgICAgIC8vIFdlIGRvIHRoaXMgYnkgbGltaXRpbmcgZmxvdyB0byBzaW5rIGFjY29yZGluZ2x5CiAgICAgICAgICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBjb25uZWN0IGZyb20gZGF5IGQrMSBhaXJwb3J0IG5vZGVzIHRvIHNpbmsgd2l0aCBjYXBhY2l0eSBiW2RdW2pdCiAgICAgICAgICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwgbjsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgbWYuYWRkX2VkZ2UoYmFzZV9ueHQgKyBqLCBULCBiW2RdW2pdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ29tcHV0ZSBtYXggZmxvdwogICAgICAgICAgICBsbCBmbG93ID0gbWYubWF4X2Zsb3coUywgVCk7CgogICAgICAgICAgICAvLyBUb3RhbCBsdWdnYWdlIGluaXRpYWxseSA9IHN1bSBzCiAgICAgICAgICAgIC8vIFVuZm91bmQgbHVnZ2FnZSA9IHRvdGFsIGx1Z2dhZ2UgLSBmb3VuZCBsdWdnYWdlCiAgICAgICAgICAgIC8vIGZvdW5kIGx1Z2dhZ2UgPSBmbG93IHRvIHNpbmsKICAgICAgICAgICAgbGwgdG90YWwgPSAwOwogICAgICAgICAgICBmb3IoYXV0byB4IDogcykgdG90YWwgKz0geDsKCiAgICAgICAgICAgIGxsIHVuZm91bmQgPSB0b3RhbCAtIGZsb3c7CiAgICAgICAgICAgIHJldHVybiB1bmZvdW5kOwogICAgICAgIH07CgogICAgICAgIGZvcihpbnQgayA9IDE7IGsgPD0gbTsgaysrKSB7CiAgICAgICAgICAgIGNvdXQgPDwgc29sdmVfZm9yX2soaykgPDwgIlxuIjsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
