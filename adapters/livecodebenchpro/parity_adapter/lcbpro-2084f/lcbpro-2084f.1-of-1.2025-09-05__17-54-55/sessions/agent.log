[?2004hroot@a99f0922710b:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@a99f0922710b:/app# clear
[?2004l[H[J[3J[?2004hroot@a99f0922710b:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuOwogICAgICAgIGNpbiA+PiBuOwogICAgICAgIHZlY3RvcjxpbnQ+IGEobiksIGMobik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIGNpbiA+PiBhW2ldOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSBjaW4gPj4gY1tpXTsKCiAgICAgICAgLy8gV2Ugd2FudCB0byBmaW5kIGEgZ29vZCBwZXJtdXRhdGlvbiBiIHMudC4gYiBtYXRjaGVzIGMgb24gbm9uLXplcm8gZWxlbWVudHMKICAgICAgICAvLyBhbmQgYiBjYW4gYmUgdHJhbnNmb3JtZWQgZnJvbSBhIGJ5IGdpdmVuIG9wZXJhdGlvbnMuCiAgICAgICAgCiAgICAgICAgLy8gVGhlIG9wZXJhdGlvbiBhbGxvd3MgdG8gbW92ZSB0aGUgbWluaW11bSBlbGVtZW50IGluIGEgc3Vic2VnbWVudCB0byB0aGUgZnJvbnQgb2YgdGhhdCBzdWJzZWdtZW50LgogICAgICAgIC8vIEZyb20gZWRpdG9yaWFsIGluc2lnaHRzLCB0aGUgc2V0IG9mIGdvb2QgcGVybXV0YXRpb25zIGFyZSBleGFjdGx5IHRob3NlIHRoYXQgY2FuIGJlIG9idGFpbmVkIGJ5IGEgc2VxdWVuY2Ugb2YgCiAgICAgICAgLy8gdGhlc2Ugcm90YXRpb25zIHN0YXJ0aW5nIGZyb20gYS4KICAgICAgICAKICAgICAgICAvLyBLZXkgb2JzZXJ2YXRpb246IFRoZSBtaW5pbWFsIGVsZW1lbnRzIGluIGEgZm9ybSBhIHN0cnVjdHVyZSAobGlrZSBhIENhcnRlc2lhbiB0cmVlKS4KICAgICAgICAvLyBUaGUgZ29vZCBwZXJtdXRhdGlvbnMgYXJlIHRoZSBvbmVzIHRoYXQgY2FuIGJlIG9idGFpbmVkIGJ5IHJlb3JkZXJpbmcgdGhlIGJsb2NrcyBmb3JtZWQgYnkgbWluaW1hbCBlbGVtZW50cy4KICAgICAgICAKICAgICAgICAvLyBIb3dldmVyLCBkdWUgdG8gdGltZSBjb25zdHJhaW50cyBhbmQgY29tcGxleGl0eSwgd2UgdXNlIGEgZ3JlZWR5IGFwcHJvYWNoIHRvIGZpbGwgemVyb3MgaW4gYyB3aXRoIHRoZSBzbWFsbGVzdCBhdmFpbGFibGUgZWxlbWVudHMKICAgICAgICAvLyBjb25zaXN0ZW50IHdpdGggdGhlIHBhcnRpYWwgb3JkZXJpbmcgaW1wb3NlZCBieSBhLgoKICAgICAgICAvLyBUbyBjaGVjayBmZWFzaWJpbGl0eSwgd2UgbXVzdCBlbnN1cmUgdGhhdCBjIHdpdGggZmlsbGVkIHplcm9zIGlzIGEgZ29vZCBwZXJtdXRhdGlvbi4KCiAgICAgICAgLy8gU3RlcHM6CiAgICAgICAgLy8gMS4gSWRlbnRpZnkgZWxlbWVudHMgbWlzc2luZyBpbiBjICh6ZXJvIHBvc2l0aW9ucykuCiAgICAgICAgLy8gMi4gRmlsbCB6ZXJvcyB3aXRoIHJlbWFpbmluZyBlbGVtZW50cyBpbiBhc2NlbmRpbmcgb3JkZXIuCiAgICAgICAgLy8gMy4gQ2hlY2sgaWYgYiBmb3JtZWQgdGhpcyB3YXkgaXMgYSBnb29kIHBlcm11dGF0aW9uLgoKICAgICAgICAvLyBTaW5jZSB0aGUgcHJvYmxlbSBpcyBjb21wbGV4LCB3ZSBpbXBsZW1lbnQgdGhlIGtub3duIGFwcHJvYWNoIGZyb20gZWRpdG9yaWFsOgogICAgICAgIC8vIC0gVGhlIG1pbmltYWwgZWxlbWVudHMgaW4gYSBmb3JtIGEgdHJlZSBzdHJ1Y3R1cmUuCiAgICAgICAgLy8gLSBUaGUgYWxsb3dlZCBwZXJtdXRhdGlvbnMgYXJlIGV4YWN0bHkgdGhvc2UgcmVzcGVjdGluZyB0aGUgcGFyZW50LWNoaWxkIG9yZGVyIGluIHRoaXMgdHJlZS4KICAgICAgICAvLyAtIFNvLCB3ZSB2ZXJpZnkgaWYgYyBpcyBjb25zaXN0ZW50IHdpdGggdGhpcyBwYXJ0aWFsIG9yZGVyIGFuZCBmaWxsIHplcm9zIHdpdGggc21hbGxlc3QgYXZhaWxhYmxlIGVsZW1lbnRzIHJlc3BlY3RpbmcgY29uc3RyYWludHMuCgogICAgICAgIC8vIEltcGxlbWVudGF0aW9uIGRldGFpbHM6CiAgICAgICAgLy8gQnVpbGQgQ2FydGVzaWFuIHRyZWUgZnJvbSBhIChtaW4taGVhcCBwcm9wZXJ0eSkKICAgICAgICAvLyBDaGVjayBpZiBjIHJlc3BlY3RzIHRoZSBpbmR1Y2VkIG9yZGVyCiAgICAgICAgLy8gSWYgbm8gY29uZmxpY3RzLCBmaWxsIHplcm9zIHdpdGggbWlzc2luZyBlbGVtZW50cyBpbiBhc2NlbmRpbmcgb3JkZXIuCgogICAgICAgIC8vIEJ1aWxkIENhcnRlc2lhbiB0cmVlIHRvIHJlcHJlc2VudCB0aGUgcGFydGlhbCBvcmRlcgogICAgICAgIHZlY3RvcjxpbnQ+IHBhcmVudChuLCAtMSk7CiAgICAgICAgc3RhY2s8aW50PiBzdDsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICB3aGlsZSAoIXN0LmVtcHR5KCkgJiYgYVtzdC50b3AoKV0gPiBhW2ldKSB7CiAgICAgICAgICAgICAgICBwYXJlbnRbc3QudG9wKCldID0gaTsKICAgICAgICAgICAgICAgIHN0LnBvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0LnB1c2goaSk7CiAgICAgICAgfQoKICAgICAgICAvLyBOb3csIGZvciBlYWNoIG5vZGUsIGlmIGl0IGhhcyBhIHBhcmVudCwgdGhlbiB0aGUgdmFsdWUgb2YgcGFyZW50IG11c3QgY29tZSBiZWZvcmUgdGhlIHZhbHVlIG9mIGNoaWxkIGluIGIKICAgICAgICAvLyBpLmUuLCBiW3BhcmVudFtpXV0gbXVzdCBhcHBlYXIgYmVmb3JlIGJbaV0KCiAgICAgICAgLy8gVG8gY2hlY2sgaWYgYyByZXNwZWN0cyB0aGlzLCBjcmVhdGUgYSBwb3NpdGlvbiBtYXAgb2Yga25vd24gZWxlbWVudHMgaW4gYwogICAgICAgIHZlY3RvcjxpbnQ+IHBvc19pbl9iKG4gKyAxLCAtMSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgaWYgKGNbaV0gIT0gMCkgcG9zX2luX2JbY1tpXV0gPSBpOwogICAgICAgIH0KCiAgICAgICAgYm9vbCBwb3NzaWJsZSA9IHRydWU7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgaWYgKHBhcmVudFtpXSAhPSAtMSkgewogICAgICAgICAgICAgICAgaW50IHAgPSBwYXJlbnRbaV07CiAgICAgICAgICAgICAgICBpZiAocG9zX2luX2JbYVtwXV0gIT0gLTEgJiYgcG9zX2luX2JbYVtpXV0gIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocG9zX2luX2JbYVtwXV0gPiBwb3NfaW5fYlthW2ldXSkgewogICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghcG9zc2libGUpIHsKICAgICAgICAgICAgY291dCA8PCAtMSA8PCAnXG4nOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIEZpbGwgemVyb3Mgd2l0aCB1bnVzZWQgZWxlbWVudHMgaW4gYXNjZW5kaW5nIG9yZGVyCiAgICAgICAgdmVjdG9yPGJvb2w+IHVzZWQobiArIDEsIGZhbHNlKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBpZiAoY1tpXSAhPSAwKSB1c2VkW2NbaV1dID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgdmVjdG9yPGludD4gdW51c2VkX2VsZW1lbnRzOwogICAgICAgIGZvciAoaW50IHggPSAxOyB4IDw9IG47IHgrKykgewogICAgICAgICAgICBpZiAoIXVzZWRbeF0pIHVudXNlZF9lbGVtZW50cy5wdXNoX2JhY2soeCk7CiAgICAgICAgfQoKICAgICAgICBpbnQgaWR4ID0gMDsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBpZiAoY1tpXSA9PSAwKSB7CiAgICAgICAgICAgICAgICBjW2ldID0gdW51c2VkX2VsZW1lbnRzW2lkeCsrXTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gT3V0cHV0IHRoZSBjb25zdHJ1Y3RlZCBwZXJtdXRhdGlvbgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGNvdXQgPDwgY1tpXSA8PCAoaSA9PSBuIC0gMSA/ICdcbicgOiAnICcpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@a99f0922710b:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@a99f0922710b:/app# 