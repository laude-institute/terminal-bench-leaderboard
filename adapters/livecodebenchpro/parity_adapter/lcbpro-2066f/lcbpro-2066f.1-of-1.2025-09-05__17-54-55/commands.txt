['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dmVjdG9yPgojaW5jbHVkZSA8YWxnb3JpdGhtPgp1c2luZyBuYW1lc3BhY2Ugc3RkOwoKLy8gRnVuY3Rpb24gdG8gY29tcHV0ZSBtYXhpbXVtIHN1YmFycmF5IHN1bSB1c2luZyBLYWRhbmUncyBhbGdvcml0aG0KcGFpcjxpbnQsaW50PiBtYXhTdWJhcnJheVN1bShjb25zdCB2ZWN0b3I8aW50PiAmYSwgaW50ICZzdGFydCwgaW50ICZlbmQpIHsKICAgIGludCBtYXhfZW5kaW5nX2hlcmUgPSBhWzBdLCBtYXhfc29fZmFyID0gYVswXTsKICAgIGludCBzID0gMDsKICAgIHN0YXJ0ID0gMDsKICAgIGVuZCA9IDA7CiAgICBmb3IgKGludCBpID0gMTsgaSA8IChpbnQpYS5zaXplKCk7IGkrKykgewogICAgICAgIGlmIChtYXhfZW5kaW5nX2hlcmUgPCAwKSB7CiAgICAgICAgICAgIG1heF9lbmRpbmdfaGVyZSA9IGFbaV07CiAgICAgICAgICAgIHMgPSBpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1heF9lbmRpbmdfaGVyZSArPSBhW2ldOwogICAgICAgIH0KICAgICAgICBpZiAobWF4X2VuZGluZ19oZXJlID4gbWF4X3NvX2ZhcikgewogICAgICAgICAgICBtYXhfc29fZmFyID0gbWF4X2VuZGluZ19oZXJlOwogICAgICAgICAgICBzdGFydCA9IHM7CiAgICAgICAgICAgIGVuZCA9IGk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHttYXhfc29fZmFyLCBzdGFydH07Cn0KCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKICAgIGludCB0OwogICAgY2luID4+IHQ7CiAgICB3aGlsZSAodC0tKSB7CiAgICAgICAgaW50IG4sIG07CiAgICAgICAgY2luID4+IG4gPj4gbTsKICAgICAgICB2ZWN0b3I8aW50PiBhKG4pLCBiKG0pOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSBjaW4gPj4gYVtpXTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG07IGkrKykgY2luID4+IGJbaV07CgogICAgICAgIC8vIElmIGEgPT0gYiwgbm8gb3BlcmF0aW9ucyBuZWVkZWQKICAgICAgICBpZiAoYSA9PSBiKSB7CiAgICAgICAgICAgIGNvdXQgPDwgMCA8PCAiXG4iOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIFRoZSBvbmx5IHdheSB0byB0cmFuc2Zvcm0gYSBpbnRvIGIgaXMgdG8gcmVwbGFjZSB0aGUgbWF4IHN1bSBzdWJhcnJheSBvZiBhIHdpdGggYgogICAgICAgIC8vIEJlY2F1c2Ugb3BlcmF0aW9uIHJlcGxhY2VzIG1heCBzdW0gc3ViYXJyYXkgd2l0aCBhcmJpdHJhcnkgYXJyYXkKICAgICAgICAvLyBXZSBjaGVjayBpZiBtYXggc3VtIHN1YmFycmF5IGlzIHVuaXF1ZSBhbmQgaWYgcmVwbGFjaW5nIGl0IHdpdGggYiB5aWVsZHMgYgoKICAgICAgICBpbnQgbCwgcjsKICAgICAgICBpbnQgbWF4X3N1bSA9IC0xZTE1OwogICAgICAgIGludCBzdGFydCA9IDAsIGVuZCA9IDA7CgogICAgICAgIC8vIEthZGFuZSdzIGFsZ29yaXRobSB0byBmaW5kIG1heCBzdW0gc3ViYXJyYXkKICAgICAgICBpbnQgbWF4X2VuZGluZ19oZXJlID0gYVswXSwgbWF4X3NvX2ZhciA9IGFbMF07CiAgICAgICAgaW50IHMgPSAwOwogICAgICAgIHN0YXJ0ID0gMDsKICAgICAgICBlbmQgPSAwOwogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGlmIChtYXhfZW5kaW5nX2hlcmUgPCAwKSB7CiAgICAgICAgICAgICAgICBtYXhfZW5kaW5nX2hlcmUgPSBhW2ldOwogICAgICAgICAgICAgICAgcyA9IGk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtYXhfZW5kaW5nX2hlcmUgKz0gYVtpXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobWF4X2VuZGluZ19oZXJlID4gbWF4X3NvX2ZhcikgewogICAgICAgICAgICAgICAgbWF4X3NvX2ZhciA9IG1heF9lbmRpbmdfaGVyZTsKICAgICAgICAgICAgICAgIHN0YXJ0ID0gczsKICAgICAgICAgICAgICAgIGVuZCA9IGk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIG1heF9zdW0gPSBtYXhfc29fZmFyOwogICAgICAgIGwgPSBzdGFydDsgciA9IGVuZDsKCiAgICAgICAgLy8gQ2hlY2sgaWYgbWF4IHN1bSBzdWJhcnJheSBpcyB1bmlxdWUKICAgICAgICAvLyBDb3VudCBob3cgbWFueSBtYXggc3VtIHN1YmFycmF5cyBleGlzdAogICAgICAgIGludCBjb3VudF9tYXggPSAwOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGludCBzdW0gPSAwOwogICAgICAgICAgICBmb3IgKGludCBqID0gaTsgaiA8IG47IGorKykgewogICAgICAgICAgICAgICAgc3VtICs9IGFbal07CiAgICAgICAgICAgICAgICBpZiAoc3VtID09IG1heF9zdW0pIGNvdW50X21heCsrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBJZiBtdWx0aXBsZSBtYXggc3VtIHN1YmFycmF5cyBleGlzdCwgaW1wb3NzaWJsZSAoYmVjYXVzZSBvcGVyYXRpb24gcmVwbGFjZXMgbWF4IHN1bSBzdWJhcnJheSBhcmJpdHJhcmlseSwgc28gd2UgY2FuJ3QgZ3VhcmFudGVlIHdoaWNoIG9uZSkKICAgICAgICBpZiAoY291bnRfbWF4ICE9IDEpIHsKICAgICAgICAgICAgY291dCA8PCAtMSA8PCAiXG4iOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIENvbnN0cnVjdCBhcnJheSBhZnRlciByZXBsYWNlbWVudAogICAgICAgIHZlY3RvcjxpbnQ+IGFmdGVyOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbDsgaSsrKSBhZnRlci5wdXNoX2JhY2soYVtpXSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtOyBpKyspIGFmdGVyLnB1c2hfYmFjayhiW2ldKTsKICAgICAgICBmb3IgKGludCBpID0gciArIDE7IGkgPCBuOyBpKyspIGFmdGVyLnB1c2hfYmFjayhhW2ldKTsKCiAgICAgICAgLy8gQ2hlY2sgaWYgYWZ0ZXIgPT0gYgogICAgICAgIGlmIChhZnRlciA9PSBiKSB7CiAgICAgICAgICAgIC8vIE91dHB1dCAxIG9wZXJhdGlvbjogcmVwbGFjZSBtYXggc3VtIHN1YmFycmF5IHdpdGggYgogICAgICAgICAgICBjb3V0IDw8IDEgPDwgIlxuIjsKICAgICAgICAgICAgY291dCA8PCAobCArIDEpIDw8ICIgIiA8PCAociArIDEpIDw8ICIgIiA8PCBtIDw8ICJcbiI7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbTsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb3V0IDw8IGJbaV0gPDwgKGkgKyAxID09IG0gPyAnXG4nIDogJyAnKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpbXBvc3NpYmxlCiAgICAgICAgICAgIGNvdXQgPDwgLTEgPDwgIlxuIjsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
