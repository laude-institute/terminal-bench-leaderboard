['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CgogICAgaW50IHQ7CiAgICBjaW4gPj4gdDsKCiAgICB3aGlsZSAodC0tKSB7CiAgICAgICAgaW50IG47CiAgICAgICAgY2luID4+IG47CiAgICAgICAgdmVjdG9yPHBhaXI8aW50LGludD4+IHVzZXJzKG4pOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGNpbiA+PiB1c2Vyc1tpXS5maXJzdCA+PiB1c2Vyc1tpXS5zZWNvbmQ7CiAgICAgICAgfQoKICAgICAgICAvLyBQcmVjb21wdXRlIGdsb2JhbCBpbnRlcnNlY3Rpb24gZm9yIHByZWRpY3RvcnMKICAgICAgICAvLyBGb3IgdXNlciBpLCBwcmVkaWN0b3JzIGogc2F0aXNmeSBsX2ogPD0gbF9pIGFuZCByX2ogPj0gcl9pCiAgICAgICAgLy8gU28gcHJlZGljdG9ycycgaW50ZXJ2YWxzIGNvbnRhaW4gdXNlcidzIGludGVydmFsCgogICAgICAgIC8vIFRvIGZpbmQgcHJlZGljdG9ycyBlZmZpY2llbnRseToKICAgICAgICAvLyBGb3IgZWFjaCB1c2VyIGksIGZpbmQgdGhlIGludGVyc2VjdGlvbiBvZiBhbGwgcHJlZGljdG9ycycgaW50ZXJ2YWxzCiAgICAgICAgLy8gaS5lLiBpbnRlcnNlY3Rpb24gb2YgYWxsIGludGVydmFscyB0aGF0IGNvbnRhaW4gW2xfaSxyX2ldCgogICAgICAgIC8vIFdlIGZpcnN0IGZpbmQgdGhlIG1heGltdW0gbF9qIGFtb25nIHByZWRpY3RvcnMgYW5kIG1pbmltdW0gcl9qIGFtb25nIHByZWRpY3RvcnMKICAgICAgICAvLyBCdXQgcHJlZGljdG9ycyBhcmUgdGhvc2UgdXNlcnMgaiAhPSBpIHdpdGggbF9qIDw9IGxfaSBhbmQgcl9qID49IHJfaQoKICAgICAgICAvLyBGb3IgZWFjaCB1c2VyIGksIHdlIGZpbmQgbWF4IGxfaiBhbW9uZyBwcmVkaWN0b3JzIGFuZCBtaW4gcl9qIGFtb25nIHByZWRpY3RvcnMKCiAgICAgICAgLy8gQXBwcm9hY2g6CiAgICAgICAgLy8gRm9yIGVhY2ggdXNlciBpLCB3YW50IHRvIGZpbmQgbWF4X2wgPSBtYXggb2YgbF9qIGZvciBhbGwgaiB3aXRoIGxfaiA8PSBsX2kgYW5kIHJfaiA+PSByX2kKICAgICAgICAvLyBhbmQgbWluX3IgPSBtaW4gb2Ygcl9qIGZvciBzYW1lIGouCgogICAgICAgIC8vIFdlIHByb2Nlc3MgdXNlcnMgc29ydGVkIGJ5IGwgYXNjZW5kaW5nLCBhbmQgbWFpbnRhaW4gZGF0YSBzdHJ1Y3R1cmUgZm9yIHIncy4KCiAgICAgICAgLy8gSG93ZXZlciB0aGlzIGlzIGNvbXBsaWNhdGVkIHNpbmNlIHdlIGhhdmUgY29uc3RyYWludHMgb24gYm90aCBsX2ogYW5kIHJfai4KCiAgICAgICAgLy8gQWx0ZXJuYXRpdmUgYXBwcm9hY2g6CiAgICAgICAgLy8gRm9yIGVhY2ggdXNlciBpLCBwcmVkaWN0b3JzIGFyZSB0aG9zZSBqICE9IGkgd2l0aCBsX2ogPD0gbF9pIGFuZCByX2ogPj0gcl9pLgogICAgICAgIC8vIFNvIHByZWRpY3RvcnMgYXJlIGludGVydmFscyB0aGF0IGNvbnRhaW4gaW50ZXJ2YWwgaS4KCiAgICAgICAgLy8gSWYgd2UgY29uc2lkZXIgYWxsIGludGVydmFscywgd2UgY2FuIGZpbmQgZm9yIGVhY2ggdXNlciBpIHRoZSBpbnRlcnNlY3Rpb24gb2YgYWxsIGludGVydmFscyBjb250YWluaW5nIGkncyBpbnRlcnZhbC4KCiAgICAgICAgLy8gTGV0J3MgcHJlY29tcHV0ZToKICAgICAgICAvLyBGb3IgZWFjaCB1c2VyIGksIHRoZSBwcmVkaWN0b3JzJyBpbnRlcnNlY3Rpb24gaXMgdGhlIGludGVyc2VjdGlvbiBvZiBhbGwgaW50ZXJ2YWxzIHRoYXQgY29udGFpbiBbbF9pLCByX2ldLgoKICAgICAgICAvLyBUaGUgaW50ZXJzZWN0aW9uIG9mIGFsbCBwcmVkaWN0b3JzIGlzIHRoZSBzZWdtZW50CiAgICAgICAgLy8gW21heF97ajogaiBpcyBwcmVkaWN0b3J9IGxfaiwgbWluX3tqOiBqIGlzIHByZWRpY3Rvcn0gcl9qXQoKICAgICAgICAvLyBTbyBmb3IgZWFjaCB1c2VyIGksIHdlIHdhbnQgdG8gZmluZCBtYXggbF9qIGFuZCBtaW4gcl9qIG92ZXIgYWxsIGogIT0gaSB3aXRoIGxfaiA8PSBsX2kgYW5kIHJfaiA+PSByX2kuCgogICAgICAgIC8vIFdlIGNhbiBwcmVjb21wdXRlIGZvciBhbGwgdXNlcnM6CiAgICAgICAgLy8gbWF4X2xfZm9yX3ByZWRbaV0gPSBtYXggbF9qIGZvciBwcmVkaWN0b3JzIGogb2YgaQogICAgICAgIC8vIG1pbl9yX2Zvcl9wcmVkW2ldID0gbWluIHJfaiBmb3IgcHJlZGljdG9ycyBqIG9mIGkKCiAgICAgICAgLy8gVG8gZmluZCB0aGVzZSBlZmZpY2llbnRseSwgd2UgY2FuIHVzZSBzZWdtZW50IHRyZWUgb3Igb2ZmbGluZSBxdWVyaWVzLgoKICAgICAgICAvLyBIZXJlIGlzIGFuIGVmZmljaWVudCBhcHByb2FjaDoKICAgICAgICAvLyAxKSBTb3J0IHVzZXJzIGJ5IGwgYXNjZW5kaW5nLgogICAgICAgIC8vIDIpIEZvciBlYWNoIHVzZXIgaSwgZmluZCBhbGwgdXNlcnMgaiB3aXRoIGxfaiA8PSBsX2kgYW5kIHJfaiA+PSByX2kuCiAgICAgICAgLy8gICAgU2luY2UgbF9qIDw9IGxfaSwgYWxsIHVzZXJzIHVwIHRvIHBvc2l0aW9uIG9mIGkgaW4gc29ydGVkIG9yZGVyLgogICAgICAgIC8vICAgIEZvciByX2ogPj0gcl9pLCB3ZSBjYW4gcXVlcnkgYSBkYXRhIHN0cnVjdHVyZSB0aGF0IGtlZXBzIHRyYWNrIG9mIHJfai4KCiAgICAgICAgLy8gV2Ugd2lsbCBwcm9jZXNzIHVzZXJzIHNvcnRlZCBieSBsIGFzY2VuZGluZyBhbmQgdXNlIGEgc2VnbWVudCB0cmVlIG9yIG1hcCB0byBxdWVyeSBtYXggbCBhbmQgbWluIHIuCgogICAgICAgIC8vIEJ1dCBwcm9ibGVtIGlzIGNvbXBsZXhpdHkgYW5kIHRpbWUgbGltaXQuCgogICAgICAgIC8vIEluc3RlYWQsIHdlIHVzZSBhIG1vcmUgc3VidGxlIGFwcHJvYWNoOgogICAgICAgIC8vIFNpbmNlIGludGVydmFscyBhcmUgc2VnbWVudHMgb24gMS4uMTBeOSwgYW5kIG4gY2FuIGJlIHVwIHRvIDJlNSwKICAgICAgICAvLyB3ZSBjYW4gZG8gY29vcmRpbmF0ZSBjb21wcmVzc2lvbiBvbiBsIGFuZCByLgoKICAgICAgICAvLyBCdXQgc2luY2UgbCBhbmQgciBjYW4gYmUgbGFyZ2UsIGNvbXByZXNzIGwgYW5kIHIgc2VwYXJhdGVseS4KCiAgICAgICAgLy8gVGhlbiBmb3IgZWFjaCB1c2VyIGksIHdlIGNhbiBzdG9yZSB1c2VycyBpbiBhIG1hcCBrZXllZCBieSBsLgoKICAgICAgICAvLyBXZSBjYW4gcHJlY29tcHV0ZSBmb3IgZWFjaCB1c2VyOgogICAgICAgIC8vIC0gbWF4IGxfaiBhbW9uZyBwcmVkaWN0b3JzCiAgICAgICAgLy8gLSBtaW4gcl9qIGFtb25nIHByZWRpY3RvcnMKCiAgICAgICAgLy8gTGV0J3MgY3JlYXRlIHR3byBGZW53aWNrcyAoQklUcyk6CiAgICAgICAgLy8gT25lIGZvciBtYXggbF9qLCBvbmUgZm9yIG1pbiByX2ouCgogICAgICAgIC8vIFdlIHByb2Nlc3MgdXNlcnMgc29ydGVkIGJ5IGwgYXNjZW5kaW5nLgoKICAgICAgICAvLyBGb3IgZWFjaCB1c2VyIGksIHByZWRpY3RvcnMgaiBzYXRpc2Z5IGxfaiA8PSBsX2kgYW5kIHJfaiA+PSByX2kuCgogICAgICAgIC8vIFNvIGZvciBlYWNoIHVzZXIgaSAoaW4gb3JkZXIgb2YgaW5jcmVhc2luZyBsKSwgd2UgY2FuIHF1ZXJ5IGFtb25nIHVzZXJzIHdpdGggbF9qIDw9IGxfaSBhbmQgcl9qID49IHJfaS4KCiAgICAgICAgLy8gV2UgY2FuIHNvcnQgdXNlcnMgYnkgciBkZXNjZW5kaW5nIHRvIHF1ZXJ5IGVmZmljaWVudGx5LgoKICAgICAgICAvLyBBbm90aGVyIGFwcHJvYWNoOgogICAgICAgIC8vIEZvciBlYWNoIHVzZXIgaSwgcHJlZGljdG9ycyBhcmUgdGhvc2UgaW50ZXJ2YWxzIHRoYXQgY29udGFpbiBbbF9pLCByX2ldLgogICAgICAgIC8vIFNvIHByZWRpY3RvcnMnIGxfaiA8PSBsX2kgYW5kIHJfaiA+PSByX2kuCgogICAgICAgIC8vIEhlbmNlLCBmb3IgdXNlciBpLCBwcmVkaWN0b3JzJyBsX2ogPD0gbF9pIGFuZCByX2ogPj0gcl9pLgoKICAgICAgICAvLyBXZSBjYW46CiAgICAgICAgLy8gLSBTb3J0IHVzZXJzIGJ5IGwgYXNjZW5kaW5nLgogICAgICAgIC8vIC0gRm9yIGVhY2ggbF9pLCBidWlsZCBhIGxpc3Qgb2YgdXNlcnMuCiAgICAgICAgLy8gLSBGb3IgZWFjaCB1c2VyIGksIHRvIGZpbmQgcHJlZGljdG9ycywgd2UgZmluZCB1c2VycyB3aXRoIGxfaiA8PSBsX2kgYW5kIHJfaiA+PSByX2kuCgogICAgICAgIC8vIFdlIGNhbiBzb3J0IHVzZXJzIGJ5IHIgZGVzY2VuZGluZy4KCiAgICAgICAgLy8gVXNpbmcgc2VnbWVudCB0cmVlIG9uIHIgY29vcmRpbmF0ZSBjb21wcmVzc2VkLCB3ZSBjYW4gZmluZCBtYXggbCBhbmQgbWluIHIgYW1vbmcgdXNlcnMgd2l0aCByID49IHJfaSBhbmQgbCA8PSBsX2kuCgogICAgICAgIC8vIEltcGxlbWVudGF0aW9uIGRldGFpbHM6CgogICAgICAgIC8vIENvbXByZXNzIGFsbCBsIGFuZCByIHZhbHVlcy4KCiAgICAgICAgdmVjdG9yPGludD4gYWxsX2wsIGFsbF9yOwogICAgICAgIGZvciAoYXV0byAmcCA6IHVzZXJzKSB7CiAgICAgICAgICAgIGFsbF9sLnB1c2hfYmFjayhwLmZpcnN0KTsKICAgICAgICAgICAgYWxsX3IucHVzaF9iYWNrKHAuc2Vjb25kKTsKICAgICAgICB9CgogICAgICAgIC8vIGNvb3JkaW5hdGUgY29tcHJlc3Npb24KICAgICAgICB2ZWN0b3I8aW50PiBzb3J0ZWRfbCA9IGFsbF9sOwogICAgICAgIHZlY3RvcjxpbnQ+IHNvcnRlZF9yID0gYWxsX3I7CiAgICAgICAgc29ydChzb3J0ZWRfbC5iZWdpbigpLCBzb3J0ZWRfbC5lbmQoKSk7CiAgICAgICAgc29ydGVkX2wuZXJhc2UodW5pcXVlKHNvcnRlZF9sLmJlZ2luKCksIHNvcnRlZF9sLmVuZCgpKSwgc29ydGVkX2wuZW5kKCkpOwogICAgICAgIHNvcnQoc29ydGVkX3IuYmVnaW4oKSwgc29ydGVkX3IuZW5kKCkpOwogICAgICAgIHNvcnRlZF9yLmVyYXNlKHVuaXF1ZShzb3J0ZWRfci5iZWdpbigpLCBzb3J0ZWRfci5lbmQoKSksIHNvcnRlZF9yLmVuZCgpKTsKCiAgICAgICAgaW50IG1fbCA9IChpbnQpc29ydGVkX2wuc2l6ZSgpOwogICAgICAgIGludCBtX3IgPSAoaW50KXNvcnRlZF9yLnNpemUoKTsKCiAgICAgICAgLy8gRmVud2lja3MgZm9yIG1heCBsIGFuZCBtaW4gcgogICAgICAgIC8vIFdlJ2xsIHVzZSBhIEZlbndpY2tzIChCSVQpIG92ZXIgciBjb21wcmVzc2VkIGNvb3JkaW5hdGUKICAgICAgICAvLyB0byBmaW5kIG1heCBsIGZvciByID49IHJfaSBhbmQgbWluIHIgZm9yIHIgPj0gcl9pCgogICAgICAgIC8vIEJ1dCB3ZSB3YW50IHRvIHF1ZXJ5IG92ZXIgcl9qID49IHJfaSwgc28gRmVud2lja3MgbXVzdCBzdXBwb3J0IHJhbmdlIHF1ZXJpZXMgb24gc3VmZml4IG9mIHIuCgogICAgICAgIC8vIEZlbndpY2tzIGFyZSAxLWluZGV4ZWQKCiAgICAgICAgc3RydWN0IEZlbndpY2tzIHsKICAgICAgICAgICAgdmVjdG9yPGludD4gbWF4X2w7CiAgICAgICAgICAgIHZlY3RvcjxpbnQ+IG1pbl9yOwogICAgICAgICAgICBpbnQgbjsKICAgICAgICAgICAgY29uc3QgaW50IElORiA9IDFlOSsxMDsKICAgICAgICAgICAgRmVud2lja3MoaW50IHNpemUpIDogbihzaXplKSB7CiAgICAgICAgICAgICAgICBtYXhfbC5hc3NpZ24obisyLCAwKTsKICAgICAgICAgICAgICAgIG1pbl9yLmFzc2lnbihuKzIsIElORik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdm9pZCB1cGRhdGUoaW50IGlkeCwgaW50IHZhbF9sLCBpbnQgdmFsX3IpIHsKICAgICAgICAgICAgICAgIGZvciAoOyBpZHggPD0gbjsgaWR4ICs9IGlkeCAmIC1pZHgpIHsKICAgICAgICAgICAgICAgICAgICBtYXhfbFtpZHhdID0gbWF4KG1heF9sW2lkeF0sIHZhbF9sKTsKICAgICAgICAgICAgICAgICAgICBtaW5fcltpZHhdID0gbWluKG1pbl9yW2lkeF0sIHZhbF9yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBwYWlyPGludCxpbnQ+IHF1ZXJ5KGludCBpZHgpIHsKICAgICAgICAgICAgICAgIGludCBteF9sID0gMDsKICAgICAgICAgICAgICAgIGludCBtbl9yID0gSU5GOwogICAgICAgICAgICAgICAgZm9yICg7IGlkeCA+IDA7IGlkeCAtPSBpZHggJiAtaWR4KSB7CiAgICAgICAgICAgICAgICAgICAgbXhfbCA9IG1heChteF9sLCBtYXhfbFtpZHhdKTsKICAgICAgICAgICAgICAgICAgICBtbl9yID0gbWluKG1uX3IsIG1pbl9yW2lkeF0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHtteF9sLCBtbl9yfTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBRdWVyeSBzdWZmaXggW2lkeC4ubl0KICAgICAgICAgICAgcGFpcjxpbnQsaW50PiBxdWVyeV9zdWZmaXgoaW50IGlkeCkgewogICAgICAgICAgICAgICAgLy8gcXVlcnkgc3VmZml4IFtpZHguLm5dID0gdG90YWwgLSBwcmVmaXggWzEuLmlkeC0xXQogICAgICAgICAgICAgICAgLy8gQnV0IEZlbndpY2tzIHN0b3JlcyBtYXggYW5kIG1pbiwgbm90IHN1bXMuCiAgICAgICAgICAgICAgICAvLyBTbyB3ZSBjYW5ub3QgZG8gdG90YWwgLSBwcmVmaXggZWFzaWx5LgogICAgICAgICAgICAgICAgLy8gSW5zdGVhZCB3ZSBjYW4gc3RvcmUgRmVud2lja3MgcmV2ZXJzZWQuCiAgICAgICAgICAgICAgICAvLyBXZSdsbCBjcmVhdGUgRmVud2lja3Mgb24gcmV2ZXJzZWQgaW5kaWNlcyB0byBxdWVyeSBzdWZmaXguCiAgICAgICAgICAgICAgICAvLyBXZSdsbCBpbXBsZW1lbnQgc2VwYXJhdGUgRmVud2lja3MgZm9yIHJldmVyc2VkIGluZGljZXMgYmVsb3cuCiAgICAgICAgICAgICAgICByZXR1cm4gezAsMH07CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICAvLyBTaW5jZSB3ZSBuZWVkIHRvIHF1ZXJ5IG1heCBsIGFuZCBtaW4gciBmb3Igcl9qID49IHJfaSwgd2UgYnVpbGQgRmVud2lja3Mgb24gcmV2ZXJzZWQgciBjb29yZGluYXRlCgogICAgICAgIC8vIE1hcCByIHRvIHJldmVyc2VkIGluZGV4CiAgICAgICAgYXV0byByZXZfciA9IFsmXShpbnQgcl92YWwpIHsKICAgICAgICAgICAgLy8gcl92YWwgY29tcHJlc3NlZCBjb29yZGluYXRlCiAgICAgICAgICAgIHJldHVybiBtX3IgLSByX3ZhbCArIDE7CiAgICAgICAgfTsKCiAgICAgICAgLy8gV2UnbGwgY3JlYXRlIEZlbndpY2tzIGZvciBtYXggbCBhbmQgbWluIHIgd2l0aCByZXZlcnNlZCByCiAgICAgICAgLy8gRmVud2lja3MgMS1pbmRleGVkIHdpdGggc2l6ZSBtX3IKCiAgICAgICAgc3RydWN0IEZlbndpY2tzUmV2IHsKICAgICAgICAgICAgdmVjdG9yPGludD4gbWF4X2w7CiAgICAgICAgICAgIHZlY3RvcjxpbnQ+IG1pbl9yOwogICAgICAgICAgICBpbnQgbjsKICAgICAgICAgICAgY29uc3QgaW50IElORiA9IDFlOSsxMDsKICAgICAgICAgICAgRmVud2lja3NSZXYoaW50IHNpemUpIDogbihzaXplKSB7CiAgICAgICAgICAgICAgICBtYXhfbC5hc3NpZ24obisyLCAwKTsKICAgICAgICAgICAgICAgIG1pbl9yLmFzc2lnbihuKzIsIElORik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdm9pZCB1cGRhdGUoaW50IGlkeCwgaW50IHZhbF9sLCBpbnQgdmFsX3IpIHsKICAgICAgICAgICAgICAgIGZvciAoOyBpZHggPD0gbjsgaWR4ICs9IGlkeCAmIC1pZHgpIHsKICAgICAgICAgICAgICAgICAgICBtYXhfbFtpZHhdID0gbWF4KG1heF9sW2lkeF0sIHZhbF9sKTsKICAgICAgICAgICAgICAgICAgICBtaW5fcltpZHhdID0gbWluKG1pbl9yW2lkeF0sIHZhbF9yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBwYWlyPGludCxpbnQ+IHF1ZXJ5KGludCBpZHgpIHsKICAgICAgICAgICAgICAgIGludCBteF9sID0gMDsKICAgICAgICAgICAgICAgIGludCBtbl9yID0gSU5GOwogICAgICAgICAgICAgICAgZm9yICg7IGlkeCA+IDA7IGlkeCAtPSBpZHggJiAtaWR4KSB7CiAgICAgICAgICAgICAgICAgICAgbXhfbCA9IG1heChteF9sLCBtYXhfbFtpZHhdKTsKICAgICAgICAgICAgICAgICAgICBtbl9yID0gbWluKG1uX3IsIG1pbl9yW2lkeF0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHtteF9sLCBtbl9yfTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIEZlbndpY2tzUmV2IGZlbncobV9yKTsKCiAgICAgICAgLy8gTm93IHdlIHVwZGF0ZSBmZW53IGZvciBhbGwgdXNlcnMgagogICAgICAgIC8vIGFmdGVyIHByb2Nlc3NpbmcsIGZvciBlYWNoIHVzZXIgaSwgd2UgcXVlcnkgZmVudyBmb3Igcl9pIGNvbXByZXNzZWQgcmV2ZXJzZWQgaW5kZXgKCiAgICAgICAgLy8gV2UgcHJvY2VzcyB1c2VycyBzb3J0ZWQgYnkgbCBhc2NlbmRpbmcKCiAgICAgICAgdmVjdG9yPGludD4gaWR4cyhuKTsKICAgICAgICBpb3RhKGlkeHMuYmVnaW4oKSwgaWR4cy5lbmQoKSwgMCk7CiAgICAgICAgc29ydChpZHhzLmJlZ2luKCksIGlkeHMuZW5kKCksIFsmXShpbnQgYSwgaW50IGIpIHsKICAgICAgICAgICAgcmV0dXJuIHVzZXJzW2FdLmZpcnN0IDwgdXNlcnNbYl0uZmlyc3Q7CiAgICAgICAgfSk7CgogICAgICAgIC8vIEZvciBlYWNoIHVzZXIgaW4gb3JkZXIgb2YgaW5jcmVhc2luZyBsLCB1cGRhdGUgZmVud2lja3MKCiAgICAgICAgLy8gV2Ugd2lsbCBzdG9yZSByZXN1bHRzIGluIGFycmF5cwogICAgICAgIHZlY3RvcjxpbnQ+IG1heF9sX3ByZWQobiwgMCk7CiAgICAgICAgdmVjdG9yPGludD4gbWluX3JfcHJlZChuLCBJTlRfTUFYKTsKCiAgICAgICAgLy8gRmlyc3QsIGNyZWF0ZSBtYXBwaW5nIGZyb20gb3JpZ2luYWwgaW5kZXggdG8gc29ydGVkIHBvc2l0aW9uCiAgICAgICAgdmVjdG9yPGludD4gcG9zX2luX3NvcnRlZChuKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBwb3NfaW5fc29ydGVkW2lkeHNbaV1dID0gaTsKICAgICAgICB9CgogICAgICAgIC8vIFRvIGFuc3dlciBxdWVyaWVzIGZvciBlYWNoIHVzZXIgaToKICAgICAgICAvLyBwcmVkaWN0b3JzIGhhdmUgbF9qIDw9IGxfaSBhbmQgcl9qID49IHJfaQogICAgICAgIC8vIFNvIGZvciB1c2VyIGksIHF1ZXJ5IGZlbndpY2tzIGZvciBzdWZmaXggb2Ygcl9pIGNvbXByZXNzZWQKCiAgICAgICAgLy8gRmlyc3QsIHByZXBhcmUgYXJyYXlzIG9mIGNvbXByZXNzZWQgbCBhbmQgcgogICAgICAgIHZlY3RvcjxpbnQ+IGNvbXBfbChuKSwgY29tcF9yKG4pOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGNvbXBfbFtpXSA9IGludChsb3dlcl9ib3VuZChzb3J0ZWRfbC5iZWdpbigpLCBzb3J0ZWRfbC5lbmQoKSwgdXNlcnNbaV0uZmlyc3QpIC0gc29ydGVkX2wuYmVnaW4oKSkgKyAxOwogICAgICAgICAgICBjb21wX3JbaV0gPSBpbnQobG93ZXJfYm91bmQoc29ydGVkX3IuYmVnaW4oKSwgc29ydGVkX3IuZW5kKCksIHVzZXJzW2ldLnNlY29uZCkgLSBzb3J0ZWRfci5iZWdpbigpKSArIDE7CiAgICAgICAgfQoKICAgICAgICAvLyBQcm9jZXNzIHVzZXJzIGluIG9yZGVyIG9mIGluY3JlYXNpbmcgbAogICAgICAgIGZvciAoaW50IG9yZGVyX2lkeCA9IDA7IG9yZGVyX2lkeCA8IG47IG9yZGVyX2lkeCsrKSB7CiAgICAgICAgICAgIGludCBpID0gaWR4c1tvcmRlcl9pZHhdOwogICAgICAgICAgICAvLyBRdWVyeSBmZW53aWNrcyBmb3IgcHJlZGljdG9ycwogICAgICAgICAgICAvLyBwcmVkaWN0b3JzIGogc2F0aXNmeSBsX2ogPD0gbF9pIChhbHJlYWR5IHByb2Nlc3NlZCBzaW5jZSBpbiBvcmRlcikKICAgICAgICAgICAgLy8gYW5kIHJfaiA+PSByX2kKICAgICAgICAgICAgaW50IHJfcmV2ID0gbV9yIC0gY29tcF9yW2ldICsgMTsKICAgICAgICAgICAgYXV0byByZXMgPSBmZW53LnF1ZXJ5KHJfcmV2KTsKCiAgICAgICAgICAgIGludCBtYXhsID0gcmVzLmZpcnN0OwogICAgICAgICAgICBpbnQgbWluciA9IHJlcy5zZWNvbmQ7CgogICAgICAgICAgICAvLyBJZiBubyBwcmVkaWN0b3JzIChtYXhsID09IDApLCBwcmludCAwCiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBudW1iZXIgb2YgdHJhY2tzIHN0cm9uZ2x5IHJlY29tbWVuZGVkIGlzCiAgICAgICAgICAgIC8vIGludGVyc2VjdGlvbiBsZW5ndGggPSBtYXgoMCwgbWluciAtIG1heGwgKyAxIC0gKHJfaSAtIGxfaSArIDEpKQoKICAgICAgICAgICAgbWF4X2xfcHJlZFtpXSA9IG1heGw7CiAgICAgICAgICAgIG1pbl9yX3ByZWRbaV0gPSBtaW5yOwoKICAgICAgICAgICAgLy8gVXBkYXRlIGZlbndpY2tzIHdpdGggY3VycmVudCB1c2VyCiAgICAgICAgICAgIC8vIFVwZGF0ZSBhdCBwb3NpdGlvbiByX3JldiB3aXRoIGxfaSBhbmQgcl9pCiAgICAgICAgICAgIGZlbncudXBkYXRlKHJfcmV2LCBjb21wX2xbaV0sIGNvbXBfcltpXSk7CiAgICAgICAgfQoKICAgICAgICAvLyBPdXRwdXQgcmVzdWx0cwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGlmIChtYXhfbF9wcmVkW2ldID09IDApIHsKICAgICAgICAgICAgICAgIGNvdXQgPDwgMCA8PCAnXG4nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaW50IGxlbl9wcmVkID0gbWluX3JfcHJlZFtpXSAtIG1heF9sX3ByZWRbaV0gKyAxOwogICAgICAgICAgICAgICAgaW50IGxlbl91c2VyID0gdXNlcnNbaV0uc2Vjb25kIC0gdXNlcnNbaV0uZmlyc3QgKyAxOwogICAgICAgICAgICAgICAgaW50IHJlcyA9IGxlbl9wcmVkIC0gbGVuX3VzZXI7CiAgICAgICAgICAgICAgICBpZiAocmVzIDwgMCkgcmVzID0gMDsKICAgICAgICAgICAgICAgIGNvdXQgPDwgcmVzIDw8ICdcbic7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
