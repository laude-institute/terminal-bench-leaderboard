[?2004hroot@1cc6650ccdd9:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@1cc6650ccdd9:/app# clear
[?2004l[H[J[3J[?2004hroot@1cc6650ccdd9:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgpzdHJ1Y3QgRFNVIHsKICAgIHZlY3RvcjxpbnQ+IHBhcmVudCwgc2l6ZTsKICAgIHZlY3Rvcjxsb25nIGxvbmc+IHN1bV9sYXRlbmN5OwogICAgRFNVKGludCBuKSA6IHBhcmVudChuKSwgc2l6ZShuLCAxKSwgc3VtX2xhdGVuY3kobiwgMCkgewogICAgICAgIGlvdGEocGFyZW50LmJlZ2luKCksIHBhcmVudC5lbmQoKSwgMCk7CiAgICB9CiAgICBpbnQgZmluZChpbnQgYSkgewogICAgICAgIHdoaWxlIChhICE9IHBhcmVudFthXSkgYSA9IHBhcmVudFthXSA9IHBhcmVudFtwYXJlbnRbYV1dOwogICAgICAgIHJldHVybiBhOwogICAgfQogICAgdm9pZCB1bml0ZShpbnQgYSwgaW50IGIpIHsKICAgICAgICBhID0gZmluZChhKTsKICAgICAgICBiID0gZmluZChiKTsKICAgICAgICBpZiAoYSAhPSBiKSB7CiAgICAgICAgICAgIGlmIChzaXplW2FdIDwgc2l6ZVtiXSkgc3dhcChhLCBiKTsKICAgICAgICAgICAgcGFyZW50W2JdID0gYTsKICAgICAgICAgICAgc2l6ZVthXSArPSBzaXplW2JdOwogICAgICAgICAgICBzdW1fbGF0ZW5jeVthXSArPSBzdW1fbGF0ZW5jeVtiXTsKICAgICAgICB9CiAgICB9Cn07CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CgogICAgaW50IHQ7IGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuLCBtLCBwOwogICAgICAgIGNpbiA+PiBuID4+IG0gPj4gcDsKCiAgICAgICAgdmVjdG9yPGJvb2w+IG5lZWRfaW50ZXJuZXQobiArIDEsIGZhbHNlKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHA7IGkrKykgewogICAgICAgICAgICBpbnQgczsgY2luID4+IHM7CiAgICAgICAgICAgIG5lZWRfaW50ZXJuZXRbc10gPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgdmVjdG9yPHR1cGxlPGludCxpbnQsaW50Pj4gZWRnZXMobSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtOyBpKyspIHsKICAgICAgICAgICAgaW50IHUsIHYsIHc7CiAgICAgICAgICAgIGNpbiA+PiB1ID4+IHYgPj4gdzsKICAgICAgICAgICAgZWRnZXNbaV0gPSB7dyx1LHZ9OwogICAgICAgIH0KCiAgICAgICAgLy8gU29ydCBlZGdlcyBieSBpbmNyZWFzaW5nIHdlaWdodAogICAgICAgIHNvcnQoZWRnZXMuYmVnaW4oKSwgZWRnZXMuZW5kKCkpOwoKICAgICAgICAvLyBEU1UgZm9yIE1TVAogICAgICAgIERTVSBkc3UobisxKTsKCiAgICAgICAgLy8gQnVpbGQgTVNUIChLcnVza2FsKQogICAgICAgIHZlY3Rvcjx2ZWN0b3I8cGFpcjxpbnQsaW50Pj4+IG1zdChuKzEpOwogICAgICAgIGZvciAoYXV0byAmW3csdSx2XSA6IGVkZ2VzKSB7CiAgICAgICAgICAgIGlmIChkc3UuZmluZCh1KSAhPSBkc3UuZmluZCh2KSkgewogICAgICAgICAgICAgICAgZHN1LnVuaXRlKHUsdik7CiAgICAgICAgICAgICAgICBtc3RbdV0uZW1wbGFjZV9iYWNrKHYsdyk7CiAgICAgICAgICAgICAgICBtc3Rbdl0uZW1wbGFjZV9iYWNrKHUsdyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIFdlIHdhbnQgdG8gZmluZCBmb3IgZWFjaCBub2RlIHRoYXQgbmVlZHMgaW50ZXJuZXQsIHRoZSBtYXggZWRnZSB3ZWlnaHQgb24gcGF0aCB0byBpdHMgY2xvc2VzdCBzZXJ2ZXIuCiAgICAgICAgLy8gSWYgd2UgcGxhY2Ugc2VydmVycyBhdCBzb21lIGhvdXNlcywgaG91c2VzIGNvbm5lY3RlZCB0byBzZXJ2ZXJzIGhhdmUgbGF0ZW5jeSBhcyBtYXggZWRnZSB3ZWlnaHQgb24gcGF0aC4KICAgICAgICAvLyBGb3Igaz0xIHRvIG4sIG1pbmltdW0gdG90YWwgbGF0ZW5jeSBpcyBzdW0gb2YgbGF0ZW5jaWVzIHdoZW4gd2UgY2hvb3NlIGJlc3QgayBzZXJ2ZXIgbG9jYXRpb25zLgoKICAgICAgICAvLyBLZXkgaWRlYToKICAgICAgICAvLyBUaGUgcHJvYmxlbSB0cmFuc2xhdGVzIHRvIHBhcnRpdGlvbmluZyBNU1QgaW50byBrIGNvbm5lY3RlZCBjb21wb25lbnRzIGJ5IHJlbW92aW5nIGstMSBlZGdlcy4KICAgICAgICAvLyBUaGUgdG90YWwgbGF0ZW5jeSBpcyBzdW0gb3ZlciBhbGwgaG91c2VzIG5lZWRpbmcgaW50ZXJuZXQgb2YgbWF4IGVkZ2Ugd2VpZ2h0IG9uIHBhdGggdG8gdGhlaXIgc2VydmVyLgogICAgICAgIC8vIFRoaXMgZXF1YWxzIHN1bSBvZiB3ZWlnaHRzIG9mIGVkZ2VzIGN1dCBpbiB0aGUgTVNUIHRoYXQgc2VwYXJhdGUgdGhlIGNvbXBvbmVudHMgY292ZXJpbmcgbmVlZGVkIGhvdXNlcy4KCiAgICAgICAgLy8gQXBwcm9hY2g6CiAgICAgICAgLy8gMS4gSW5pdGlhbGx5LCBhbGwgbmVlZGVkIGhvdXNlcyBhcmUgY29ubmVjdGVkIGluIG9uZSBjb21wb25lbnQsIHRvdGFsIGxhdGVuY3kgaXMgc3VtIG9mIG1heCBlZGdlcyBvbiBwYXRocy4KICAgICAgICAvLyAyLiBSZW1vdmluZyBhbiBlZGdlIHNwbGl0cyBhIGNvbXBvbmVudCBhbmQgcmVkdWNlcyB0b3RhbCBsYXRlbmN5LgogICAgICAgIC8vIDMuIFRvIG1pbmltaXplIHRvdGFsIGxhdGVuY3kgZm9yIGVhY2ggaywgd2UgcmVtb3ZlIHRoZSBrLTEgbGFyZ2VzdCAndXNlZnVsJyBlZGdlcyBmcm9tIHRoZSBNU1QuCgogICAgICAgIC8vIFRvIGZpbmQgdGhlc2UgZWRnZXM6CiAgICAgICAgLy8gRm9yIGVhY2ggZWRnZSBpbiBNU1QsIGZpbmQgaG93IG1hbnkgbmVlZGVkIGhvdXNlcyBhcmUgaW4gc3VidHJlZXMgc2VwYXJhdGVkIGJ5IHJlbW92aW5nIHRoYXQgZWRnZS4KCiAgICAgICAgLy8gU3RlcCAxOiBERlMgdG8gY291bnQgbnVtYmVyIG9mIG5lZWRlZCBob3VzZXMgaW4gZWFjaCBzdWJ0cmVlCiAgICAgICAgdmVjdG9yPGludD4gc3VidHJlZV9uZWVkKG4rMSwwKTsKICAgICAgICB2ZWN0b3I8aW50PiBwYXJlbnQobisxLDApOwogICAgICAgIHZlY3RvcjxpbnQ+IGVkZ2Vfd2VpZ2h0KG4rMSwwKTsKICAgICAgICB2ZWN0b3I8Ym9vbD4gdmlzaXRlZChuKzEsZmFsc2UpOwoKICAgICAgICBmdW5jdGlvbjx2b2lkKGludCxpbnQsaW50KT4gZGZzID0gWyZdKGludCB1LGludCBwLGludCB3KSB7CiAgICAgICAgICAgIHZpc2l0ZWRbdV0gPSB0cnVlOwogICAgICAgICAgICBwYXJlbnRbdV0gPSBwOwogICAgICAgICAgICBlZGdlX3dlaWdodFt1XSA9IHc7CiAgICAgICAgICAgIHN1YnRyZWVfbmVlZFt1XSA9IG5lZWRfaW50ZXJuZXRbdV0gPyAxIDogMDsKICAgICAgICAgICAgZm9yIChhdXRvICZbdixjXSA6IG1zdFt1XSkgewogICAgICAgICAgICAgICAgaWYgKHYgPT0gcCkgY29udGludWU7CiAgICAgICAgICAgICAgICBkZnModix1LGMpOwogICAgICAgICAgICAgICAgc3VidHJlZV9uZWVkW3VdICs9IHN1YnRyZWVfbmVlZFt2XTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGRmcygxLDAsMCk7CgogICAgICAgIC8vIEVkZ2VzIGN1dHRpbmc6CiAgICAgICAgLy8gRm9yIGVhY2ggZWRnZSBmcm9tIHBhcmVudFt1XSB0byB1LCB0aGUgc3VidHJlZSByb290ZWQgYXQgdSBoYXMgc3VidHJlZV9uZWVkW3VdIG5lZWRlZCBob3VzZXMuCiAgICAgICAgLy8gVGhlIG90aGVyIHBhcnQgaGFzIHAgLSBzdWJ0cmVlX25lZWRbdV0gbmVlZGVkIGhvdXNlcy4KCiAgICAgICAgLy8gT25seSBlZGdlcyB3aGVyZSBib3RoIHNpZGVzIGhhdmUgbmVlZGVkIGhvdXNlcyBhcmUgY2FuZGlkYXRlcyB0byBjdXQuCgogICAgICAgIHZlY3Rvcjxsb25nIGxvbmc+IGN1dHM7CiAgICAgICAgZm9yIChpbnQgdSA9IDI7IHUgPD0gbjsgdSsrKSB7CiAgICAgICAgICAgIGludCBjbnQxID0gc3VidHJlZV9uZWVkW3VdOwogICAgICAgICAgICBpbnQgY250MiA9IHAgLSBjbnQxOwogICAgICAgICAgICBpZiAoY250MSA+IDAgJiYgY250MiA+IDApIHsKICAgICAgICAgICAgICAgIC8vIEVkZ2UgY2FuIGJlIGN1dCB0byByZWR1Y2UgbGF0ZW5jeQogICAgICAgICAgICAgICAgY3V0cy5wdXNoX2JhY2soZWRnZV93ZWlnaHRbdV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBTb3J0IGN1dHMgZGVzY2VuZGluZwogICAgICAgIHNvcnQoY3V0cy5yYmVnaW4oKSwgY3V0cy5yZW5kKCkpOwoKICAgICAgICAvLyBGb3Igaz0xLCB0b3RhbCBsYXRlbmN5IGlzIHN1bSBvZiBhbGwgbmVlZGVkIGhvdXNlcycgbGF0ZW5jeSB3aXRoIG9uZSBzZXJ2ZXIKICAgICAgICAvLyB3aGljaCBpcyBzdW0gb2YgbGF0ZW5jeSBvZiBwYXRocyAobWF4IGVkZ2Ugd2VpZ2h0IG9uIHBhdGggdG8gc2VydmVyKQogICAgICAgIC8vIFRoaXMgZXF1YWxzIHN1bSBvZiB3ZWlnaHRzIG9mIGVkZ2VzIG9uIHBhdGhzIHRvIHNlcnZlcnMgKGFsbCBuZWVkZWQgaG91c2VzIGNvbm5lY3RlZCkKCiAgICAgICAgLy8gVGhlIHRvdGFsIGxhdGVuY3kgZm9yIGs9MSBpcyBzdW0gb2YgbWF4IGVkZ2Ugd2VpZ2h0cyBvbiBwYXRocyBmcm9tIG5lZWRlZCBob3VzZXMgdG8gdGhlIHNpbmdsZSBzZXJ2ZXIuCiAgICAgICAgLy8gV2UgY2FuIGNvbXB1dGUgdG90YWwgbGF0ZW5jeSB3aGVuIGs9MSBhcyBzdW0gb2YgbWF4IGVkZ2Ugd2VpZ2h0cyBvbiBwYXRocwogICAgICAgIC8vIEJ1dCBwcm9ibGVtIHNpbXBsaWZpZXMgdG8gc3VtIG9mIG1heCBlZGdlcyBvbiBwYXRocyB0byBzZXJ2ZXIgPSBzdW0gb2YgZWRnZSB3ZWlnaHRzIG9uIE1TVCBjb3VudGluZyBuZWVkZWQgaG91c2VzLgoKICAgICAgICAvLyBUbyBjb21wdXRlIGluaXRpYWwgdG90YWwgbGF0ZW5jeSBmb3Igaz0xOgogICAgICAgIC8vIEZvciBlYWNoIGVkZ2UgaW4gTVNULCBjb3VudCBtaW4oc3VidHJlZV9uZWVkW3VdLCBwIC0gc3VidHJlZV9uZWVkW3VdKSAqIGVkZ2Vfd2VpZ2h0CiAgICAgICAgLy8gQmVjYXVzZSBlYWNoIG5lZWRlZCBob3VzZSBvbiBvbmUgc2lkZSBoYXMgdG8gdHJhdmVyc2UgdGhpcyBlZGdlIHRvIGdldCB0byB0aGUgc2VydmVyIG9uIHRoZSBvdGhlciBzaWRlLgoKICAgICAgICBsb25nIGxvbmcgdG90YWxfbGF0ZW5jeSA9IDA7CiAgICAgICAgZm9yIChpbnQgdSA9IDI7IHUgPD0gbjsgdSsrKSB7CiAgICAgICAgICAgIGludCBjbnQxID0gc3VidHJlZV9uZWVkW3VdOwogICAgICAgICAgICBpbnQgY250MiA9IHAgLSBjbnQxOwogICAgICAgICAgICBsb25nIGxvbmcgdXNlID0gbWluKGNudDEsIGNudDIpOwogICAgICAgICAgICB0b3RhbF9sYXRlbmN5ICs9IHVzZSAqIChsb25nIGxvbmcpZWRnZV93ZWlnaHRbdV07CiAgICAgICAgfQoKICAgICAgICB2ZWN0b3I8bG9uZyBsb25nPiBhbnN3ZXIobisxLDApOwogICAgICAgIGFuc3dlclsxXSA9IHRvdGFsX2xhdGVuY3k7CgogICAgICAgIC8vIEZvciBrPTIuLm4sIHJlbW92ZSBrLTEgbGFyZ2VzdCBlZGdlcyBmcm9tIGN1dHMKICAgICAgICAvLyBFYWNoIHJlbW92YWwgcmVkdWNlcyB0b3RhbCBsYXRlbmN5IGJ5IHRoYXQgZWRnZSdzIHdlaWdodCAqIG51bWJlciBvZiBuZWVkZWQgaG91c2VzIHNlcGFyYXRlZAogICAgICAgIC8vIEJ1dCBzaW5jZSB3ZSBzdW1tZWQgbWluKGNudDEsY250MikgKiBlZGdlX3dlaWdodCwgcmVtb3ZpbmcgZWRnZXMgcmVkdWNlcyBsYXRlbmN5IGJ5IGVkZ2Ugd2VpZ2h0ICogbWluKGNudDEsY250MikKICAgICAgICAvLyBXZSBhbHJlYWR5IGFjY291bnRlZCBtaW4oY250MSxjbnQyKSBpbiB0b3RhbF9sYXRlbmN5LCBzbyBqdXN0IHN1YnRyYWN0IGVkZ2Ugd2VpZ2h0cyBmcm9tIHRvdGFsX2xhdGVuY3kKCiAgICAgICAgLy8gQWN0dWFsbHksIHdlIGp1c3Qgc3VidHJhY3QgZWRnZV93ZWlnaHRbdV0gKiBtaW4oY250MSxjbnQyKSBmb3IgZWRnZXMgcmVtb3ZlZC4KICAgICAgICAvLyBXZSBzYXZlZCBvbmx5IGVkZ2Vfd2VpZ2h0IGluIGN1dHMgdmVjdG9yLCBidXQgbWluKGNudDEsY250MikgaXMgbmVlZGVkIGZvciBleGFjdCBkZWNyZW1lbnQuCiAgICAgICAgLy8gU28gd2UgbXVzdCBzdG9yZSBmdWxsIHZhbHVlLCBub3QganVzdCBlZGdlX3dlaWdodC4KCiAgICAgICAgLy8gQ29ycmVjdCB0aGUgYXBwcm9hY2g6IHN0b3JlIHRoZSBkZWNyZW1lbnQgdmFsdWVzIGZvciBlZGdlcy4KICAgICAgICBjdXRzLmNsZWFyKCk7CiAgICAgICAgZm9yIChpbnQgdSA9IDI7IHUgPD0gbjsgdSsrKSB7CiAgICAgICAgICAgIGludCBjbnQxID0gc3VidHJlZV9uZWVkW3VdOwogICAgICAgICAgICBpbnQgY250MiA9IHAgLSBjbnQxOwogICAgICAgICAgICBpZiAoY250MSA+IDAgJiYgY250MiA+IDApIHsKICAgICAgICAgICAgICAgIGxvbmcgbG9uZyBkZWNyZW1lbnQgPSBtaW4oY250MSwgY250MikgKiAobG9uZyBsb25nKWVkZ2Vfd2VpZ2h0W3VdOwogICAgICAgICAgICAgICAgY3V0cy5wdXNoX2JhY2soZGVjcmVtZW50KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc29ydChjdXRzLnJiZWdpbigpLCBjdXRzLnJlbmQoKSk7CgogICAgICAgIGxvbmcgbG9uZyBjdXIgPSB0b3RhbF9sYXRlbmN5OwogICAgICAgIGZvciAoaW50IGsgPSAyOyBrIDw9IG47IGsrKykgewogICAgICAgICAgICBpZiAoay0yIDwgKGludCljdXRzLnNpemUoKSkgewogICAgICAgICAgICAgICAgY3VyIC09IGN1dHNbay0yXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY3VyIDwgMCkgY3VyID0gMDsKICAgICAgICAgICAgYW5zd2VyW2tdID0gY3VyOwogICAgICAgIH0KCiAgICAgICAgZm9yIChpbnQgayA9IDE7IGsgPD0gbjsgaysrKSB7CiAgICAgICAgICAgIGNvdXQgPDwgYW5zd2VyW2tdIDw8IChrID09IG4gPyAnXG4nIDogJyAnKTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@1cc6650ccdd9:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@1cc6650ccdd9:/app# 