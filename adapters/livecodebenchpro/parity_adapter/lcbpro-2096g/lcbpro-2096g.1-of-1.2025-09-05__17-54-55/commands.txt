['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBXZSB3aWxsIGltcGxlbWVudCBhIHN0cmF0ZWd5IHRoYXQgYXNrcyBxPTIwIHF1ZXJpZXMgdG8gaWRlbnRpZnkgdGhlIG51bWJlci4KLy8gRWFjaCBxdWVyeSBwYXJ0aXRpb25zIHRoZSBudW1iZXJzIGludG8gMyBwYXJ0czogTCwgUiwgYW5kIE4uCi8vIE9uZSBxdWVyeSBjYW4gYmUgaWdub3JlZCwgc28gd2UgZGVzaWduIHF1ZXJpZXMgc28gdGhhdCB0aGUgcmVzcG9uc2VzIGNhbgovLyBuYXJyb3cgZG93biB0aGUgcG9zc2libGUgbnVtYmVyIGRlc3BpdGUgb25lIGlnbm9yZWQgcXVlcnkuCgovLyBPdXIgYXBwcm9hY2ggaXMgdG8gdXNlIGEgdGVybmFyeS1saWtlIHNlYXJjaCB3aXRoIHJlZHVuZGFuY3k6Ci8vIEZvciBlYWNoIGJpdCAodXAgdG8gMjApLCB3ZSBjcmVhdGUgYSBxdWVyeSB0aGF0IGRpdmlkZXMgdGhlIGN1cnJlbnQgY2FuZGlkYXRlcwovLyBpbnRvIHRocmVlIHBhcnRzOiBsZWZ0IGhhbGYsIHJpZ2h0IGhhbGYsIGFuZCBub3QgaW5jbHVkZWQuCi8vIEJ5IGVuY29kaW5nIHRoZSBzZXRzIGNsZXZlcmx5LCB3ZSBjYW4gcmVjb3ZlciB0aGUgbnVtYmVyIHdpdGggYXQgbW9zdCBvbmUgaWdub3JlZCBxdWVyeS4KCi8vIFNpbmNlIHRoZSBwcm9ibGVtIHN0YXRlcyBmKG4pIDw9IDIwLCBhbmQgcSA8PSAyMCBhbGxvd2VkLCB3ZSBmaXggcT0yMC4KCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKCiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwoKICAgIHdoaWxlICh0LS0pIHsKICAgICAgICBpbnQgbjsKICAgICAgICBjaW4gPj4gbjsKCiAgICAgICAgLy8gTnVtYmVyIG9mIHF1ZXJpZXMKICAgICAgICBjb25zdCBpbnQgcSA9IDIwOwogICAgICAgIGNvdXQgPDwgcSA8PCAiXG4iIDw8IGZsdXNoOwoKICAgICAgICAvLyBXZSB3aWxsIGNyZWF0ZSAyMCBxdWVyaWVzLgogICAgICAgIC8vIEVhY2ggcXVlcnkgY29ycmVzcG9uZHMgdG8gYSBiaXQgcG9zaXRpb24uCiAgICAgICAgLy8gRm9yIGVhY2ggbnVtYmVyIGZyb20gMSB0byBuLCB3ZSBjb25zaWRlciBpdHMgYmluYXJ5IHJlcHJlc2VudGF0aW9uLgoKICAgICAgICAvLyBGb3IgcXVlcnkgaSwgd2UgaW5jbHVkZSBhbGwgbnVtYmVycyB3aG9zZSBpLXRoIGJpdCBpcyAwIGluIHRoZSBsZWZ0IGhhbGYsCiAgICAgICAgLy8gYWxsIG51bWJlcnMgd2hvc2UgaS10aCBiaXQgaXMgMSBpbiB0aGUgcmlnaHQgaGFsZi4KICAgICAgICAvLyBUbyBzYXRpc2Z5IHRoZSByZXF1aXJlbWVudCBvZiBldmVuIGsgYW5kIGRpc3RpbmN0IGVsZW1lbnRzLCB3ZSB3aWxsIGFycmFuZ2UKICAgICAgICAvLyBlYWNoIHF1ZXJ5IGFycmF5IGFzIFtsZWZ0IGhhbGZdW3JpZ2h0IGhhbGZdLCB3aGVyZSBib3RoIGhhbHZlcyBoYXZlIGVxdWFsIHNpemUuCiAgICAgICAgLy8gSWYgaGFsdmVzIGFyZSB1bmVxdWFsLCB3ZSBhZGQgZHVtbXkgZWxlbWVudHMgbm90IGluIDEuLm4gKGltcG9zc2libGUpLCBzbyBpbnN0ZWFkCiAgICAgICAgLy8gd2Ugb25seSBpbmNsdWRlIG51bWJlcnMgd2hlcmUgaS10aCBiaXQgaXMgZGVmaW5lZCwgYW5kIHBhZCB3aXRoIHNvbWUgbnVtYmVycyB0byBtYWtlIGV2ZW4gc2l6ZS4KCiAgICAgICAgLy8gQnV0IHByb2JsZW0gc3RhdGVzIGFsbCBudW1iZXJzIG11c3QgYmUgZnJvbSAxLi5uLCBzbyB3ZSBjYW4ndCBhZGQgZHVtbXkgbnVtYmVycy4KICAgICAgICAvLyBTbyB3ZSBuZWVkIHRvIGNhcmVmdWxseSBzZWxlY3QgbnVtYmVycyBmb3IgZWFjaCBxdWVyeS4KCiAgICAgICAgLy8gV2UnbGwgaW1wbGVtZW50IGEgc2ltcGxlIGJhbGFuY2VkIGFwcHJvYWNoOgogICAgICAgIC8vIEZvciBlYWNoIHF1ZXJ5IGkgKDAgdG8gMTkpLCBzZWxlY3QgYWxsIG51bWJlcnMgd2hlcmUgYml0IGkgaXMgMCBhbmQgYWxsIG51bWJlcnMgd2hlcmUgYml0IGkgaXMgMS4KICAgICAgICAvLyBCdXQgd2UgbmVlZCBib3RoIGhhbHZlcyB0byBoYXZlIGVxdWFsIGxlbmd0aC4KCiAgICAgICAgLy8gV2UnbGwgcHJvY2VlZCBhcyBmb2xsb3dzOgogICAgICAgIC8vIEZvciBlYWNoIGJpdCBpLCBjb2xsZWN0IGFsbCBudW1iZXJzIHdpdGggYml0IGkgPT0gMCBhbmQgYml0IGkgPT0gMS4KICAgICAgICAvLyBJZiB0aGVpciBzaXplcyBkaWZmZXIgYnkgYXQgbW9zdCAxLCByZW1vdmUgb25lIGVsZW1lbnQgZnJvbSB0aGUgbGFyZ2VyIHNpZGUgdG8gbWFrZSBlcXVhbC4KICAgICAgICAvLyBJZiBkaWZmZXJlbmNlIGlzIG1vcmUgdGhhbiAxLCByZW1vdmUgZWxlbWVudHMgZnJvbSBsYXJnZXIgc2lkZSB1bnRpbCBlcXVhbC4KCiAgICAgICAgLy8gSWYgb25lIHNpZGUgaXMgZW1wdHksIHNraXAgdGhhdCBiaXQuCgogICAgICAgIHZlY3Rvcjx2ZWN0b3I8aW50Pj4gcXVlcmllcyhxKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHE7IGkrKykgewogICAgICAgICAgICB2ZWN0b3I8aW50PiB6ZXJvcywgb25lczsKICAgICAgICAgICAgZm9yIChpbnQgeCA9IDE7IHggPD0gbjsgeCsrKSB7CiAgICAgICAgICAgICAgICBpZiAoKHggPj4gaSkgJiAxKSBvbmVzLnB1c2hfYmFjayh4KTsKICAgICAgICAgICAgICAgIGVsc2UgemVyb3MucHVzaF9iYWNrKHgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGludCBzeiA9IG1pbigoaW50KXplcm9zLnNpemUoKSwgKGludClvbmVzLnNpemUoKSk7CiAgICAgICAgICAgIGlmIChzeiA9PSAwKSB7CiAgICAgICAgICAgICAgICAvLyBubyBxdWVyeSBmb3IgdGhpcyBiaXQKICAgICAgICAgICAgICAgIHF1ZXJpZXNbaV0gPSB7fTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHplcm9zLnJlc2l6ZShzeik7CiAgICAgICAgICAgIG9uZXMucmVzaXplKHN6KTsKCiAgICAgICAgICAgIC8vIENvbWJpbmUgemVyb3MgYW5kIG9uZXMKICAgICAgICAgICAgcXVlcmllc1tpXS5yZXNlcnZlKDIgKiBzeik7CiAgICAgICAgICAgIGZvciAoaW50IHggOiB6ZXJvcykgcXVlcmllc1tpXS5wdXNoX2JhY2soeCk7CiAgICAgICAgICAgIGZvciAoaW50IHggOiBvbmVzKSBxdWVyaWVzW2ldLnB1c2hfYmFjayh4KTsKICAgICAgICB9CgogICAgICAgIC8vIE91dHB1dCBxdWVyaWVzCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxOyBpKyspIHsKICAgICAgICAgICAgaWYgKHF1ZXJpZXNbaV0uZW1wdHkoKSkgewogICAgICAgICAgICAgICAgLy8gT3V0cHV0IGEgbWluaW1hbCBxdWVyeSB0byBhdm9pZCBlbXB0eSBxdWVyaWVzIChtdXN0IGJlID49MiBhbmQgZXZlbikKICAgICAgICAgICAgICAgIC8vIEp1c3Qgb3V0cHV0IDIgbnVtYmVyczogMSAyCiAgICAgICAgICAgICAgICBjb3V0IDw8IDIgPDwgIiAxIDJcbiI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb3V0IDw8IChpbnQpcXVlcmllc1tpXS5zaXplKCk7CiAgICAgICAgICAgICAgICBmb3IgKGludCB4IDogcXVlcmllc1tpXSkgY291dCA8PCAiICIgPDwgeDsKICAgICAgICAgICAgICAgIGNvdXQgPDwgIlxuIjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb3V0LmZsdXNoKCk7CgogICAgICAgIHN0cmluZyBzOwogICAgICAgIGNpbiA+PiBzOwoKICAgICAgICAvLyBXZSBub3cgcHJvY2VzcyB0aGUgcmVzcG9uc2VzLgogICAgICAgIC8vIE9uZSByZXNwb25zZSBpcyAnPycsIG1lYW5pbmcgaWdub3JlZC4KICAgICAgICAvLyBXZSB0cnkgYWxsIHBvc3NpYmlsaXRpZXMgb2Ygd2hpY2ggcXVlcnkgd2FzIGlnbm9yZWQuCgogICAgICAgIGludCBpZ25vcmVkID0gLTE7CiAgICAgICAgaW50IG0gPSAoaW50KXMuc2l6ZSgpOwoKICAgICAgICAvLyBGb3IgZWFjaCBjYW5kaWRhdGUgbnVtYmVyLCBjaGVjayBpZiBpdCBmaXRzIHRoZSByZXNwb25zZXMgd2l0aCBleGFjdGx5IG9uZSBpZ25vcmVkIHF1ZXJ5CiAgICAgICAgaW50IGFuc3dlciA9IC0xOwogICAgICAgIGZvciAoaW50IGNhbmRpZGF0ZSA9IDE7IGNhbmRpZGF0ZSA8PSBuOyBjYW5kaWRhdGUrKykgewogICAgICAgICAgICBpbnQgaWdub3JlX2NvdW50ID0gMDsKICAgICAgICAgICAgYm9vbCBwb3NzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbTsgaSsrKSB7CiAgICAgICAgICAgICAgICBjaGFyIGMgPSBzW2ldOwogICAgICAgICAgICAgICAgaWYgKGMgPT0gJz8nKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBxdWVyeSBpZ25vcmVkCiAgICAgICAgICAgICAgICAgICAgLy8gb25seSBvbmUgcXVlcnkgY2FuIGJlIGlnbm9yZWQKICAgICAgICAgICAgICAgICAgICBpZ25vcmVfY291bnQrKzsKICAgICAgICAgICAgICAgICAgICBpZiAoaWdub3JlX2NvdW50ID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocXVlcmllc1tpXS5lbXB0eSgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBxdWVyeSB3YXMgbWluaW1hbCAyIDEgMiBxdWVyeSwgc28gY2FuZGlkYXRlIGluIFsxLDJdCiAgICAgICAgICAgICAgICAgICAgLy8gcmVzcG9uc2VzOiBMIG1lYW5zIGNhbmRpZGF0ZSBpbiBmaXJzdCBoYWxmLCBSIGluIHNlY29uZCBoYWxmLCBOIG5vdCBpbiBhcnJheQogICAgICAgICAgICAgICAgICAgIC8vIEJ1dCBvdXIgbWluaW1hbCBxdWVyaWVzIGFyZSBhbHdheXMgWzEsMl0KICAgICAgICAgICAgICAgICAgICAvLyBmaXJzdCBoYWxmID0gWzFdLCBzZWNvbmQgaGFsZiA9IFsyXQogICAgICAgICAgICAgICAgICAgIGlmIChjID09ICdMJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlICE9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PSAnUicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZSAhPSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMgPT0gJ04nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgPT0gMSB8fCBjYW5kaWRhdGUgPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpbnQgaGFsZiA9IChpbnQpcXVlcmllc1tpXS5zaXplKCkgLyAyOwogICAgICAgICAgICAgICAgICAgIC8vIGxlZnQgaGFsZiBpbmRpY2VzOiAwLi5oYWxmLTEKICAgICAgICAgICAgICAgICAgICAvLyByaWdodCBoYWxmIGluZGljZXM6IGhhbGYuLnNpemUtMQogICAgICAgICAgICAgICAgICAgIGJvb2wgaW5fbGVmdCA9IGZhbHNlLCBpbl9yaWdodCA9IGZhbHNlLCBpbl9hcnJheSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgaGFsZjsgaisrKSBpZiAocXVlcmllc1tpXVtqXSA9PSBjYW5kaWRhdGUpIGluX2xlZnQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBoYWxmOyBqIDwgKGludClxdWVyaWVzW2ldLnNpemUoKTsgaisrKSBpZiAocXVlcmllc1tpXVtqXSA9PSBjYW5kaWRhdGUpIGluX3JpZ2h0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpbl9hcnJheSA9IGluX2xlZnQgfHwgaW5fcmlnaHQ7CgogICAgICAgICAgICAgICAgICAgIGlmIChjID09ICdMJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluX2xlZnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PSAnUicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbl9yaWdodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjID09ICdOJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5fYXJyYXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocG9zc2libGUgJiYgaWdub3JlX2NvdW50ID09IDEpIHsKICAgICAgICAgICAgICAgIGFuc3dlciA9IGNhbmRpZGF0ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb3V0IDw8IGFuc3dlciA8PCAiXG4iIDw8IGZsdXNoOwogICAgfQoKICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
