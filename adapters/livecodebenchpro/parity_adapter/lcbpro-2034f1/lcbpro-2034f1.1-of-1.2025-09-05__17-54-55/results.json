{
    "id": "21d19836-c419-4b16-b107-c2efea36d99a",
    "trial_name": "lcbpro-2034f1.1-of-1.2025-09-05__17-54-55",
    "task_id": "lcbpro-2034f1",
    "instruction": "LiveCodeBench Pro (Mini) - external judge.\n\nThe agent must create a C++17 solution file at /app/main.cpp.\nThis task does not include local test cases. Instead, the test harness:\n  1) POSTs the code to the external judge (/submit) to get a sid,\n  2) polls GET /result/{sid}?short=1 until status == \"done\",\n  3) passes only if the judge returns passed == true.\n\nEnvironment variables (overridable at runtime):\n  - BASE_URL: judge base URL (default http://38.80.122.117:8081)\n  - PID: problem id (default 2034F1)\n  - LANG: language (default cpp)\n  - CODE_PATH: path to code (default /app/main.cpp)\n  - JUDGE_TIMEOUT_SECS: poll timeout seconds (default 120)\n\nThis is the easy version of the problem. The only differences between the two versions are the constraints on $k$ and the sum of $k$.\n\nIn ancient Persia, [Khayyam](https://en.wikipedia.org/wiki/Omar_Khayyam), a clever merchant and mathematician, is playing a game with his prized treasure chest containing $n$ red rubies worth $2$ dinars each and $m$ blue sapphires worth $1$ dinar each. He also has a satchel, which starts empty, and $k$ scrolls with pairs $(r_1, b_1), (r_2, b_2), \\ldots, (r_k, b_k)$ that describe special conditions.\n\n![](https://espresso.codeforces.com/3576d678d9cd8a4cfa1efad5eb4bc61b9ecbcf4d.webp)\n\nThe game proceeds for $n + m$ turns as follows:\n\n1. Khayyam draws a gem uniformly at random from the chest.\n2. He removes the gem from the chest and places it in his satchel.\n3. If there exists a scroll $i$ ($1 \\leq i \\leq k$) such that the chest contains exactly $r_i$ red rubies and $b_i$ blue sapphires, Khayyam receives a royal decree that doubles the value of all the gems in his satchel as a reward for achieving a special configuration.\n\nNote that the value of some gems might be affected by multiple decrees, and in that case the gems' value is doubled multiple times.\n\nDetermine the expected value of Khayyam's satchel at the end of the game, modulo $998,244,353$.\n\nFormally, let $M = 998,244,353$. It can be shown that the exact answer can be expressed as an irreducible fraction $\\frac{p}{q}$, where $p$ and $q$ are integers and $q \\not \\equiv 0 \\pmod{M}$. Output the integer equal to $p \\cdot q^{-1} \\bmod M$. In other words, output such an integer $x$ that $0 \\le x < M$ and $x \\cdot q \\equiv p \\pmod{M}$.\n\n### Input\n\nEach test contains multiple test cases. The first line contains the number of test cases $t$ ($1 \\le t \\le 500$). The description of the test cases follows.\n\nThe first line of each test case contains three integers $n$, $m$, and $k$ ($1 \\leq n, m \\leq 2 \\cdot 10^5$, $0 \\leq k \\leq 500$)Â -- the number of red rubies, the number of blue sapphires, and the number of scrolls describing special conditions, respectively.\n\nEach of the next $k$ lines contains two integers $r_i$, $b_i$ ($0 \\leq r_i \\leq n$, $0 \\leq b_i \\leq m$, $1 \\leq r_i + b_i \\leq n+m-1$). It is guaranteed that the pairs $(r_i, b_i)$ are distinct.\n\nIt is guaranteed that the sum of $n$ and the sum of $m$ over all test cases do not exceed $2 \\cdot 10^5$, and the sum of $k$ over all test cases does not exceed $500$.\n\n### Output\n\nFor each test case, print a single integer: the expected value of Khayyam's satchel at the end of the process, modulo $998,244,353$.\n\n### Example\n\n#### Input #1\n\n```\n\n5\n\n3 4 0\n\n1 1 1\n\n1 0\n\n3 3 2\n\n1 1\n\n2 2\n\n3 3 2\n\n2 1\n\n1 2\n\n10 4 5\n\n1 0\n\n8 0\n\n6 4\n\n0 2\n\n7 4\n\n```\n\n#### Output #1\n\n```\n10\n499122180\n798595498\n149736666\n414854846\n```\n\n### Note\n\nIn the first test case, at the end of the process, there will always be $3$ red rubies and $4$ blue sapphires. None of the special conditions described in the scrolls are met, so the value of Khayyam's satchel remains unchanged. The total value of the satchel at the end is always $2 \\cdot 3 + 1 \\cdot 4 = 10$.\n\nIn the second test case, consider the following two cases:\n\n- With probability $1/2$, Khayyam draws a red ruby, and the value of his satchel becomes $2$. Then with probability $1$, he draws a blue sapphire, and the value of his satchel becomes $3$.\n- With probability $1/2$, Khayyam draws a blue sapphire, and the value of his satchel becomes $1$. At this point, the chest contains $r_1 = 1$ red rubies and $b_1 = 0$ blue sapphires, which match the special condition described in a scroll. As a result, the value of the satchel is doubled to $2 \\cdot 1 = 2$. Then with probability $1$, he draws a red ruby, and the value of his satchel becomes $4$.\n\nThus, the expected value at the end is $\\frac{1}{2} \\cdot 3 + \\frac{1}{2} \\cdot 4 = \\frac{7}{2}$, which is $499,122,180$ modulo $998,244,353$.",
    "is_resolved": false,
    "failure_mode": "unset",
    "parser_results": {
        "test_external_judge": "failed"
    },
    "recording_path": "2025-09-05__17-54-55/lcbpro-2034f1/lcbpro-2034f1.1-of-1.2025-09-05__17-54-55/sessions/agent.cast",
    "total_input_tokens": 1633,
    "total_output_tokens": 2139,
    "trial_started_at": "2025-09-06T01:36:56.115410+00:00",
    "trial_ended_at": "2025-09-06T01:38:02.780387+00:00",
    "agent_started_at": "2025-09-06T01:37:10.886474+00:00",
    "agent_ended_at": "2025-09-06T01:37:40.371756+00:00",
    "test_started_at": "2025-09-06T01:37:41.880660+00:00",
    "test_ended_at": "2025-09-06T01:37:45.432934+00:00"
}