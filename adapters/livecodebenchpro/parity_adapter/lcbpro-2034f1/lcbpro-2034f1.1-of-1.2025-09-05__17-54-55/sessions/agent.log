[?2004hroot@95931226d936:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@95931226d936:/app# clear
[?2004l[H[J[3J[?2004hroot@95931226d936:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7Cgpjb25zdCBpbnQgTU9EID0gOTk4MjQ0MzUzOwoKaW5saW5lIGludCBhZGQoaW50IGEsIGludCBiKSB7CiAgICBhICs9IGI7CiAgICBpZiAoYSA+PSBNT0QpIGEgLT0gTU9EOwogICAgcmV0dXJuIGE7Cn0KCmlubGluZSBpbnQgc3ViKGludCBhLCBpbnQgYikgewogICAgYSAtPSBiOwogICAgaWYgKGEgPCAwKSBhICs9IE1PRDsKICAgIHJldHVybiBhOwp9CgppbmxpbmUgaW50IG11bChpbnQgYSwgaW50IGIpIHsKICAgIHJldHVybiAoaW50KSgoMUxMICogYSAqIGIpICUgTU9EKTsKfQoKaW50IG1vZHBvdyhpbnQgYSwgaW50IGIpIHsKICAgIGludCByZXMgPSAxOwogICAgd2hpbGUgKGIgPiAwKSB7CiAgICAgICAgaWYgKGIgJiAxKSByZXMgPSBtdWwocmVzLCBhKTsKICAgICAgICBhID0gbXVsKGEsIGEpOwogICAgICAgIGIgPj49IDE7CiAgICB9CiAgICByZXR1cm4gcmVzOwp9CgppbnQgbW9kaW52KGludCBhKSB7CiAgICByZXR1cm4gbW9kcG93KGEsIE1PRCAtIDIpOwp9CgovLyBQcmVjb21wdXRlIGZhY3RvcmlhbHMgYW5kIGludmVyc2UgZmFjdG9yaWFscyBmb3IgY29tYmluYXRpb25zCmNvbnN0IGludCBNQVggPSA0MDAwMDU7CmludCBmYWN0W01BWF0sIGludmZhY3RbTUFYXTsKCnZvaWQgcHJlY29tcHV0ZV9mYWN0b3JpYWxzKCkgewogICAgZmFjdFswXSA9IDE7CiAgICBmb3IgKGludCBpID0gMTsgaSA8IE1BWDsgaSsrKSBmYWN0W2ldID0gbXVsKGZhY3RbaSAtIDFdLCBpKTsKICAgIGludmZhY3RbTUFYIC0gMV0gPSBtb2RpbnYoZmFjdFtNQVggLSAxXSk7CiAgICBmb3IgKGludCBpID0gTUFYIC0gMjsgaSA+PSAwOyBpLS0pIGludmZhY3RbaV0gPSBtdWwoaW52ZmFjdFtpICsgMV0sIGkgKyAxKTsKfQoKaW50IG5DcihpbnQgbiwgaW50IHIpIHsKICAgIGlmIChyID4gbiB8fCByIDwgMCkgcmV0dXJuIDA7CiAgICByZXR1cm4gbXVsKGZhY3Rbbl0sIG11bChpbnZmYWN0W3JdLCBpbnZmYWN0W24gLSByXSkpOwp9CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CiAgICBwcmVjb21wdXRlX2ZhY3RvcmlhbHMoKTsKCiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwoKICAgIHdoaWxlICh0LS0pIHsKICAgICAgICBpbnQgbiwgbSwgazsKICAgICAgICBjaW4gPj4gbiA+PiBtID4+IGs7CgogICAgICAgIHZlY3RvcjxwYWlyPGludCxpbnQ+PiBzY3JvbGxzKGspOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKSB7CiAgICAgICAgICAgIGNpbiA+PiBzY3JvbGxzW2ldLmZpcnN0ID4+IHNjcm9sbHNbaV0uc2Vjb25kOwogICAgICAgIH0KCiAgICAgICAgLy8gVG90YWwgdHVybnMKICAgICAgICBpbnQgdG90YWwgPSBuICsgbTsKCiAgICAgICAgLy8gZHBbaV1bal0gPSBudW1iZXIgb2Ygd2F5cyB0byBoYXZlIGkgcmVkIGFuZCBqIGJsdWUgZ2VtcyByZW1vdmVkIHNvIGZhcgogICAgICAgIC8vIFdlIG9ubHkgbmVlZCBkcCBmb3IgY3VycmVudCBhbmQgbmV4dCB0byBvcHRpbWl6ZSBtZW1vcnkKICAgICAgICAvLyBCdXQgaGVyZSwgd2Ugd2lsbCB1c2UgYSB2ZWN0b3Igb2Ygc2l6ZSAobisxKSoobSsxKSB0byBzdG9yZSBwcm9iYWJpbGl0aWVzIG1vZAoKICAgICAgICAvLyBQcm9iYWJpbGl0eSBkaXN0cmlidXRpb24gb2YgcmVkIGRyYXduIHNvIGZhcgogICAgICAgIC8vIFVzaW5nIE4gY2hvb3NlIGsgYW5kIGh5cGVyZ2VvbWV0cmljIHByb2JhYmlsaXRpZXMgbW9kdWxvCgogICAgICAgIC8vIFdlIHdhbnQgdG8gZmluZCBleHBlY3RlZCB2YWx1ZSBvZiBmaW5hbCBzYXRjaGVsOgogICAgICAgIC8vIEUgPSBzdW0gb3ZlciBhbGwgc2VxdWVuY2VzIG9mIGRyYXdzIG9mIHRoZSBmaW5hbCB2YWx1ZQoKICAgICAgICAvLyBPYnNlcnZhdGlvbjoKICAgICAgICAvLyBUaGUgZXhwZWN0ZWQgdmFsdWUgb2YgZ2VtcyB3aXRob3V0IGRlY3JlZXMgaXMgMipuICsgbS4KICAgICAgICAvLyBFYWNoIGRlY3JlZSBkb3VibGVzIHRoZSB2YWx1ZSBvZiBnZW1zIGluIHNhdGNoZWwgd2hlbiBjaGVzdCBoYXMgZXhhY3RseSAocl9pLCBiX2kpLgoKICAgICAgICAvLyBBbHRlcm5hdGUgYXBwcm9hY2g6CiAgICAgICAgLy8gVGhlIHZhbHVlIGRvdWJsZXMgYXQgbW9tZW50cyB3aGVuIGNoZXN0IGhhcyAocl9pLCBiX2kpCiAgICAgICAgLy8gV2hpY2ggbWVhbnMgYXQgdGhlIG1vbWVudCB3aGVuIG51bWJlciBvZiByZWQgcmVtb3ZlZCA9IG4gLSByX2kgYW5kIGJsdWUgcmVtb3ZlZCA9IG0gLSBiX2kKCiAgICAgICAgLy8gV2UgY2FuIG1vZGVsIHRoZSBleHBlY3RlZCBkb3VibGluZyBmYWN0b3IgYXMgcHJvZHVjdCBvdmVyIGkgb2YgZXhwZWN0ZWQgMl57WF9pfQogICAgICAgIC8vIHdoZXJlIFhfaSBpcyB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBjaGVzdCBoaXRzIHRoZSBjb25kaXRpb24gKHJfaSxiX2kpLgoKICAgICAgICAvLyBCdXQgdGhlIGNvbmRpdGlvbiBjYW4gb25seSBiZSBtZXQgb25jZSBkdXJpbmcgdGhlIHByb2Nlc3MgYXQgZXhhY3Qgc3RlcAogICAgICAgIC8vIHNpbmNlIGF0IGVhY2ggc3RlcCB0aGUgY2hlc3Qgc2l6ZSByZWR1Y2VzIGJ5IG9uZSBhbmQgdGhlIGNoZXN0IHN0YXRlIChyLGIpIGlzIHVuaXF1ZS4KCiAgICAgICAgLy8gU28gdGhlIGRvdWJsaW5nIGhhcHBlbnMgZXhhY3RseSBvbmNlIGF0IHN0ZXAgc19pID0gKG4gKyBtKSAtIChyX2kgKyBiX2kpCiAgICAgICAgLy8gQXQgc3RlcCBzX2ksIHRoZSBjaGVzdCBoYXMgKHJfaSwgYl9pKSBnZW1zLgoKICAgICAgICAvLyBBdCB0aGF0IHN0ZXAsIHRoZSBzYXRjaGVsIGhhcyBzX2kgZ2VtcyBkcmF3bi4KCiAgICAgICAgLy8gVGhlIGV4cGVjdGVkIHZhbHVlIG9mIHRoZSBzYXRjaGVsIGF0IHN0ZXAgc19pIGlzIEVfc19pID0gMiAqIEVbbnVtYmVyIG9mIHJlZCBkcmF3biBpbiBmaXJzdCBzX2kgc3RlcHNdICsgRVtudW1iZXIgb2YgYmx1ZSBkcmF3biBpbiBmaXJzdCBzX2kgc3RlcHNdCiAgICAgICAgLy8gPSAyICogZXhwZWN0ZWQgcmVkICsgZXhwZWN0ZWQgYmx1ZSBkcmF3biA9IDIgKiBzX2kgKiAobi90b3RhbCkgKyBzX2kgKiAobS90b3RhbCkgPSBzX2kgKiAoMm4gKyBtKS90b3RhbAoKICAgICAgICAvLyBCdXQgc2luY2UgdGhlIHZhbHVlIGRvdWJsZXMgYXQgc3RlcCBzX2ksIHRoZSBleHBlY3RlZCBtdWx0aXBsaWVyIGZvciB0aGF0IHN0ZXAgaXMgMl57MX0gdGltZXMgdGhlIGV4cGVjdGVkIHZhbHVlIG9mIHNhdGNoZWwgYXQgdGhhdCBzdGVwLgoKICAgICAgICAvLyBUaGUgZmluYWwgZXhwZWN0ZWQgdmFsdWUgaXMgdGhlIGJhc2UgdmFsdWUgKDIqbiArIG0pIHBsdXMgc3VtIG92ZXIgc2Nyb2xscyBvZiBleHBlY3RlZCB2YWx1ZSBjb250cmlidXRlZCBieSBkb3VibGluZ3MuCgogICAgICAgIC8vIEFjdHVhbGx5LCB0aGUgdmFsdWUgZG91YmxlcyB0aGUgZW50aXJlIHNhdGNoZWwgYXQgdGhhdCBtb21lbnQsIHNvIHRoZSBmaW5hbCBleHBlY3RlZCB2YWx1ZSBpczoKICAgICAgICAvLyBFID0gKDIqbiArIG0pICogcHJvZHVjdCBvdmVyIHNjcm9sbHMgaSBvZiAyXntQX2l9IHdoZXJlIFBfaSBpcyBwcm9iYWJpbGl0eSB0aGF0IGNoZXN0IGhpdHMgKHJfaSxiX2kpIGF0IHN0ZXAgc19pLgoKICAgICAgICAvLyBCdXQgdGhlIGNoZXN0IHN0YXRlIGF0IHN0ZXAgc19pIGlzIGRldGVybWluaXN0aWMgZm9yIHRoZSBkcmF3biBnZW1zOiBudW1iZXIgb2YgcmVkIGRyYXduID0gbiAtIHJfaSwgYmx1ZSBkcmF3biA9IG0gLSBiX2kKICAgICAgICAKICAgICAgICAvLyBQcm9iYWJpbGl0eSB0aGF0IGFmdGVyIHNfaSBkcmF3cywgZXhhY3RseSBuIC0gcl9pIHJlZCBhbmQgbSAtIGJfaSBibHVlIGdlbXMgYXJlIGRyYXduOgogICAgICAgIC8vIGh5cGVyZ2VvbWV0cmljOiBDKG4sIG4tcl9pKSAqIEMobSwgbS1iX2kpIC8gQyhuK20sIHNfaSkKCiAgICAgICAgLy8gU28gdGhlIGV4cGVjdGVkIG11bHRpcGxpZXIgaXM6CiAgICAgICAgLy8gcHJvZHVjdCBvdmVyIGkgb2YgKDEgKyAoMi0xKSpwcm9iX2kpID0gcHJvZHVjdCBvdmVyIGkgb2YgKDEgKyBwcm9iX2kpIHNpbmNlIGRvdWJsaW5nIG1lYW5zIG11bHRpcGx5IGJ5IDIsIHdoaWNoIGlzICsxIHRpbWVzIG9yaWdpbmFsCiAgICAgICAgCiAgICAgICAgLy8gQnV0IHRoZSBwcm9ibGVtIHN0YXRlcyB0aGF0IHZhbHVlIGRvdWJsZXMgZm9yIGVhY2ggZGVjcmVlLCBzbyB0b3RhbCBtdWx0aXBsaWVyIGlzIHByb2R1Y3Qgb2YgMl57SV9pfSB3aGVyZSBJX2kgaXMgaW5kaWNhdG9yIHZhcmlhYmxlIGlmIGRlY3JlZSBhcHBsaWVzCiAgICAgICAgLy8gU28gZXhwZWN0ZWQgbXVsdGlwbGllciA9IHByb2R1Y3Qgb2YgKDEgKyBwcm9iX2kpIGlzIGluY29ycmVjdCwgYmVjYXVzZSBkb3VibGluZyBpcyBtdWx0aXBsaWNhdGl2ZSwgYnV0IGV4cGVjdGVkIG11bHRpcGxpY2F0aW9uIGlzIG5vdCBwcm9kdWN0IG9mIGV4cGVjdGF0aW9ucy4KCiAgICAgICAgLy8gU2luY2UgZGVjcmVlcyBhcmUgYXQgZGlmZmVyZW50IHN0ZXBzLCBhbmQgdGhlIGNoZXN0IHN0YXRlcyBhcmUgZGlzdGluY3QsIHRoZSBldmVudHMgYXJlIG11dHVhbGx5IGV4Y2x1c2l2ZSBhdCBkaWZmZXJlbnQgdGltZXM/CiAgICAgICAgLy8gTm8sIGl0IGNhbiBiZSBtdWx0aXBsZSB0aW1lcywgc28gZG91YmxpbmcgY2FuIGhhcHBlbiBtdWx0aXBsZSB0aW1lcy4KCiAgICAgICAgLy8gQWN0dWFsbHksIHRoZSBkZWNyZWVzIGFwcGx5IHdoZW4gY2hlc3QgaGFzIGV4YWN0bHkgKHJfaSwgYl9pKSBhdCB0aGF0IG1vbWVudCAtIHVuaXF1ZSBzdGVwLgogICAgICAgIC8vIFNvIGRpc3RpbmN0IHN0ZXBzLCBldmVudHMgYXJlIGluZGVwZW5kZW50IGluIHRpbWUgYnV0IG11dHVhbGx5IGV4Y2x1c2l2ZSBpbiB0ZXJtcyBvZiBjaGVzdCBzdGF0ZT8KCiAgICAgICAgLy8gU2luY2UgZXZlbnRzIGhhcHBlbiBhdCBkaXN0aW5jdCBzdGVwcyBhbmQgdGhlIGNoZXN0IHN0YXRlcyBhcmUgdW5pcXVlLCB0aGVzZSBldmVudHMgYXJlIGluZGVwZW5kZW50IGluIHRoZSBzZW5zZSB0aGF0IHRoZXkgb2NjdXIgYXQgZGlmZmVyZW50IHRpbWVzLgoKICAgICAgICAvLyBUaGUgZXhwZWN0ZWQgbXVsdGlwbGllciBpcyBFWzJee251bWJlcl9vZl9kZWNyZWVzfV0KICAgICAgICAvLyA9IHN1bSBvdmVyIHN1YnNldHMgUyBvZiBzY3JvbGxzIG9mIHByb2JhYmlsaXR5IHRoYXQgYWxsIGRlY3JlZXMgaW4gUyBvY2N1ciAqIDJee3xTfH0KCiAgICAgICAgLy8gQnV0IHRoZSBkZWNyZWVzIG9jY3VyIGF0IGRpZmZlcmVudCBzdGVwcywgc28gdGhlIHByb2JhYmlsaXRpZXMgbXVsdGlwbHk6CiAgICAgICAgLy8gUChhbGwgZGVjcmVlcyBpbiBTIG9jY3VyKSA9IHByb2R1Y3Qgb3ZlciBpIGluIFMgb2YgcHJvYl9pCgogICAgICAgIC8vIFNvIGV4cGVjdGVkIG11bHRpcGxpZXIgPSBzdW0gb3ZlciBTIHN1YnNldCBvZiBzY3JvbGxzIG9mICgyXnt8U3x9ICogcHJvZHVjdF97aSBpbiBTfSBwcm9iX2kgKiBwcm9kdWN0X3tqIG5vdCBpbiBTfSAoMSAtIHByb2JfaikpCgogICAgICAgIC8vIFdoaWNoIHNpbXBsaWZpZXMgdG8gcHJvZHVjdCBvdmVyIGkgb2YgKDEgLSBwcm9iX2kgKyAyICogcHJvYl9pKSA9IHByb2R1Y3Qgb3ZlciBpIG9mICgxICsgcHJvYl9pKQoKICAgICAgICAvLyBTbyBleHBlY3RlZCBtdWx0aXBsaWVyID0gcHJvZHVjdCBvZiAoMSArIHByb2JfaSkKCiAgICAgICAgLy8gRmluYWwgZXhwZWN0ZWQgdmFsdWUgPSBiYXNlIHZhbHVlICogZXhwZWN0ZWQgbXVsdGlwbGllcgoKICAgICAgICAvLyBDb21wdXRlIGJhc2UgdmFsdWUKICAgICAgICBpbnQgYmFzZV92YWx1ZSA9IGFkZChtdWwobiwgMiksIG0pOwoKICAgICAgICAvLyBDb21wdXRlIGV4cGVjdGVkIG11bHRpcGxpZXIKICAgICAgICAvLyBwcm9iX2kgPSBDKG4sIG4tcl9pKSAqIEMobSwgbS1iX2kpIC8gQyhuK20sIHNfaSkKCiAgICAgICAgaW50IHRvdGFsQyA9IDE7IC8vIEMobittLCBzX2kpIHZhcmllcyB3aXRoIHNfaSwgc28gcHJlY29tcHV0ZSBmYWN0b3JpYWwgY29tYmluYXRpb25zCgogICAgICAgIC8vIFdlJ2xsIHVzZSBtb2R1bGFyIGludmVyc2VzIGFuZCBuQ3IgdG8gY29tcHV0ZSBwcm9iYWJpbGl0aWVzCgogICAgICAgIGludDY0X3QgdG90YWxfbm0gPSBuICsgbTsKCiAgICAgICAgLy8gV2UnbGwgY29tcHV0ZSB0aGUgbXVsdGlwbGllciBhcyBhIHByb2R1Y3QgbW9kdWxvCiAgICAgICAgaW50IG11bHRpcGxpZXIgPSAxOwoKICAgICAgICBmb3IgKGF1dG8gJnNjciA6IHNjcm9sbHMpIHsKICAgICAgICAgICAgaW50IHJfaSA9IHNjci5maXJzdDsKICAgICAgICAgICAgaW50IGJfaSA9IHNjci5zZWNvbmQ7CiAgICAgICAgICAgIGludCBzX2kgPSB0b3RhbF9ubSAtIChyX2kgKyBiX2kpOwoKICAgICAgICAgICAgaW50IHdheXNfcmVkID0gbkNyKG4sIG4gLSByX2kpOwogICAgICAgICAgICBpbnQgd2F5c19ibHVlID0gbkNyKG0sIG0gLSBiX2kpOwogICAgICAgICAgICBpbnQgd2F5c190b3RhbCA9IG5Dcih0b3RhbF9ubSwgc19pKTsKCiAgICAgICAgICAgIGlmICh3YXlzX3RvdGFsID09IDApIHsKICAgICAgICAgICAgICAgIC8vIFByb2JhYmlsaXR5IHplcm8KICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpbnQgcHJvYl9udW0gPSBtdWwod2F5c19yZWQsIHdheXNfYmx1ZSk7CiAgICAgICAgICAgIGludCBwcm9iID0gbXVsKHByb2JfbnVtLCBtb2RpbnYod2F5c190b3RhbCkpOwoKICAgICAgICAgICAgaW50IHRlcm0gPSBhZGQoMSwgcHJvYik7IC8vIDEgKyBwcm9iCiAgICAgICAgICAgIG11bHRpcGxpZXIgPSBtdWwobXVsdGlwbGllciwgdGVybSk7CiAgICAgICAgfQoKICAgICAgICBpbnQgYW5zd2VyID0gbXVsKGJhc2VfdmFsdWUsIG11bHRpcGxpZXIpOwoKICAgICAgICBjb3V0IDw8IGFuc3dlciA8PCAiXG4iOwogICAgfQogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@95931226d936:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@95931226d936:/app# 