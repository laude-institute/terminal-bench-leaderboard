['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8c3RyaW5nPgojaW5jbHVkZSA8dmVjdG9yPgojaW5jbHVkZSA8YWxnb3JpdGhtPgp1c2luZyBuYW1lc3BhY2Ugc3RkOwoKaW50IG1haW4oKSB7CiAgICBpb3M6OnN5bmNfd2l0aF9zdGRpbyhmYWxzZSk7CiAgICBjaW4udGllKG51bGxwdHIpOwogICAgCiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuOwogICAgICAgIHN0cmluZyBzOwogICAgICAgIGNpbiA+PiBuID4+IHM7CiAgICAgICAgCiAgICAgICAgLy8gQ291bnQgaW5pdGlhbCBvY2N1cnJlbmNlcwogICAgICAgIGludCBjTCA9IGNvdW50KHMuYmVnaW4oKSwgcy5lbmQoKSwgJ0wnKTsKICAgICAgICBpbnQgY0kgPSBjb3VudChzLmJlZ2luKCksIHMuZW5kKCksICdJJyk7CiAgICAgICAgaW50IGNUID0gY291bnQocy5iZWdpbigpLCBzLmVuZCgpLCAnVCcpOwoKICAgICAgICAvLyBJZiBhbHJlYWR5IGJhbGFuY2VkCiAgICAgICAgaWYgKGNMID09IGNJICYmIGNJID09IGNUKSB7CiAgICAgICAgICAgIGNvdXQgPDwgMCA8PCAiXG4iOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gQ2hlY2sgaWYgaW1wb3NzaWJsZTogaWYgbGVuZ3RoIGlzIDEsIG5vIG9wZXJhdGlvbnMgY2FuIGJlIGRvbmUKICAgICAgICAvLyBvciBpZiBhbGwgY2hhcmFjdGVycyBhcmUgc2FtZSAobm8gYWRqYWNlbnQgZGlmZmVyZW50IHBhaXJzKQogICAgICAgIGJvb2wgaGFzX2Fkal9kaWZmID0gZmFsc2U7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAoaW50KXMuc2l6ZSgpIC0gMTsgaSsrKSB7CiAgICAgICAgICAgIGlmIChzW2ldICE9IHNbaSsxXSkgewogICAgICAgICAgICAgICAgaGFzX2Fkal9kaWZmID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChuID09IDEgfHwgIWhhc19hZGpfZGlmZikgewogICAgICAgICAgICBjb3V0IDw8IC0xIDw8ICJcbiI7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgLy8gVGFyZ2V0IGNvdW50IHBlciBjaGFyYWN0ZXIKICAgICAgICBpbnQgdG90YWwgPSBjTCArIGNJICsgY1Q7CiAgICAgICAgaW50IHRhcmdldCA9IHRvdGFsIC8gMzsKICAgICAgICAvLyBXZSB3YW50IGVxdWFsIGNvdW50IG9mIEwsIEksIFQsIGJ1dCBsZW5ndGggY2FuIGluY3JlYXNlIGJ5IGluc2VydGlvbnMKICAgICAgICAvLyBTbyB3ZSBjYW4gYWRkIGNoYXJhY3RlcnMgdG8gcmVhY2ggYmFsYW5jZWQgY291bnRzCgogICAgICAgIC8vIFdlIHdpbGwgcGVyZm9ybSBhdCBtb3N0IDJuIG9wZXJhdGlvbnMgYXMgYWxsb3dlZC4KICAgICAgICAvLyBJZGVhOiByZXBlYXRlZGx5IGluc2VydCBiZXR3ZWVuIGFkamFjZW50IGRpZmZlcmVudCBjaGFyYWN0ZXJzIGEgY2hhcmFjdGVyIGRpZmZlcmVudCBmcm9tIGJvdGgsCiAgICAgICAgLy8gd2hpY2ggaW5jcmVhc2VzIGxlbmd0aCBhbmQgYWRkcyBvbmUgY291bnQgb2YgdGhhdCBjaGFyYWN0ZXIuCgogICAgICAgIC8vIE91ciBwbGFuOgogICAgICAgIC8vIFdoaWxlIGNvdW50cyBub3QgYmFsYW5jZWQsIGluc2VydCBhdCBzb21lIHN1aXRhYmxlIHBvc2l0aW9uLgoKICAgICAgICAvLyBXZSdsbCBzdG9yZSBvcGVyYXRpb25zIChwb3NpdGlvbnMgd2hlcmUgd2UgaW5zZXJ0KQogICAgICAgIHZlY3RvcjxpbnQ+IG9wczsKICAgICAgICBzdHJpbmcgY3VyID0gczsKICAgICAgICBpbnQgY3VyTCA9IGNMLCBjdXJJID0gY0ksIGN1clQgPSBjVDsKCiAgICAgICAgLy8gSGVscGVyIHRvIGdldCB0aGUgdGhpcmQgY2hhcmFjdGVyIGRpZmZlcmVudCBmcm9tIHR3byBnaXZlbgogICAgICAgIGF1dG8gdGhpcmRfY2hhciA9IFtdKGNoYXIgYSwgY2hhciBiKSAtPiBjaGFyIHsKICAgICAgICAgICAgc3RyaW5nIGNoYXJzID0gIkxJVCI7CiAgICAgICAgICAgIGZvciAoY2hhciBjIDogY2hhcnMpIHsKICAgICAgICAgICAgICAgIGlmIChjICE9IGEgJiYgYyAhPSBiKSByZXR1cm4gYzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJ0wnOyAvLyBmYWxsYmFjawogICAgICAgIH07CgogICAgICAgIC8vIEhlbHBlciB0byBjaGVjayBiYWxhbmNlZAogICAgICAgIGF1dG8gYmFsYW5jZWQgPSBbJl0oaW50IGwsIGludCBpLCBpbnQgdCkgLT4gYm9vbCB7CiAgICAgICAgICAgIHJldHVybiAobCA9PSBpKSAmJiAoaSA9PSB0KTsKICAgICAgICB9OwoKICAgICAgICAvLyBXZSB3aWxsIHRyeSB0byBiYWxhbmNlIGJ5IGFkZGluZyB0aGUgbmVlZGVkIGNoYXJhY3RlciBhdCBzb21lIHBvc2l0aW9uCgogICAgICAgIC8vIEJlY2F1c2UgbGVuZ3RoIGdyb3dzLCB0YXJnZXQgY2hhbmdlcyBkeW5hbWljYWxseTogd2Ugd2FudCBhbGwgY291bnRzIGVxdWFsIHRvIChjdXIuc2l6ZSgpKS8zIGlmIGRpdmlzaWJsZQogICAgICAgIC8vIEJ1dCBpdCBtYXkgbm90IGJlIGRpdmlzaWJsZSBieSAzLCBzbyBpbXBvc3NpYmxlIGlmIGxlbmd0aCBtb2QgMyAhPSAwCgogICAgICAgIC8vIFNvIHdlIHdpbGwgdHJ5IHRvIHJlYWNoIGxlbmd0aCBkaXZpc2libGUgYnkgMyBhbmQgYmFsYW5jZWQgY291bnRzLgoKICAgICAgICAvLyBNYXggbGVuZ3RoIHdlIGNhbiByZWFjaCBpcyBuICsgMm4gPSAzbgogICAgICAgIC8vIFdlJ2xsIHRyeSB0byBidWlsZCBiYWxhbmNlZCBzdHJpbmcgYnkgYXBwZW5kaW5nIGluc2VydHMKCiAgICAgICAgYm9vbCBwb3NzaWJsZSA9IGZhbHNlOwoKICAgICAgICBmb3IgKGludCBpdGVyID0gMDsgaXRlciA8PSAyKm47IGl0ZXIrKykgewogICAgICAgICAgICBpbnQgbGVuID0gKGludCljdXIuc2l6ZSgpOwogICAgICAgICAgICBpZiAobGVuICUgMyA9PSAwKSB7CiAgICAgICAgICAgICAgICBpbnQgd2FudCA9IGxlbiAvIDM7CiAgICAgICAgICAgICAgICBpZiAoY3VyTCA9PSB3YW50ICYmIGN1ckkgPT0gd2FudCAmJiBjdXJUID09IHdhbnQpIHsKICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gSWYgYWxyZWFkeSBleGNlZWRlZCBtYXggb3BlcmF0aW9ucwogICAgICAgICAgICBpZiAoKGludClvcHMuc2l6ZSgpID49IDIqbikgYnJlYWs7CgogICAgICAgICAgICAvLyBGaW5kIGZpcnN0IGFkamFjZW50IHBhaXIgd2l0aCBkaWZmZXJlbnQgY2hhcnMgdG8gaW5zZXJ0CiAgICAgICAgICAgIGludCBwb3MgPSAtMTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAoaW50KWN1ci5zaXplKCkgLSAxOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChjdXJbaV0gIT0gY3VyW2krMV0pIHsKICAgICAgICAgICAgICAgICAgICBwb3MgPSBpICsgMTsgLy8gaW5zZXJ0IGJldHdlZW4gaSBhbmQgaSsxLCBwb3NpdGlvbnMgYXJlIDEtYmFzZWQKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocG9zID09IC0xKSB7CiAgICAgICAgICAgICAgICAvLyBubyBzdWl0YWJsZSBwYWlyIHRvIGluc2VydAogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNoYXIgYSA9IGN1cltwb3MgLSAxXTsKICAgICAgICAgICAgY2hhciBiID0gY3VyW3Bvc107CiAgICAgICAgICAgIGNoYXIgeCA9IHRoaXJkX2NoYXIoYSwgYik7CgogICAgICAgICAgICAvLyBJbnNlcnQgeCBhdCBwb3NpdGlvbiBwb3MgKDEtYmFzZWQpCiAgICAgICAgICAgIGN1ci5pbnNlcnQoY3VyLmJlZ2luKCkgKyBwb3MsIHgpOwogICAgICAgICAgICBvcHMucHVzaF9iYWNrKHBvcyk7CgogICAgICAgICAgICAvLyBVcGRhdGUgY291bnRzCiAgICAgICAgICAgIGlmICh4ID09ICdMJykgY3VyTCsrOwogICAgICAgICAgICBlbHNlIGlmICh4ID09ICdJJykgY3VySSsrOwogICAgICAgICAgICBlbHNlIGlmICh4ID09ICdUJykgY3VyVCsrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHBvc3NpYmxlKSB7CiAgICAgICAgICAgIGNvdXQgPDwgKGludClvcHMuc2l6ZSgpIDw8ICJcbiI7CiAgICAgICAgICAgIGZvciAoaW50IHAgOiBvcHMpIGNvdXQgPDwgcCA8PCAiXG4iOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvdXQgPDwgLTEgPDwgIlxuIjsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
