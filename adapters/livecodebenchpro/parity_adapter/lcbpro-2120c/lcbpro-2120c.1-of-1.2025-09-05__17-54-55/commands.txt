['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBXZSBuZWVkIHRvIGNvbnN0cnVjdCBhIHJvb3RlZCB0cmVlIHdpdGggbiBub2RlcyBhbmQgdG90YWwgZGl2aW5lbmVzcyBzdW0gbS4KLy8gRGl2aW5lbmVzcyBkKHYpIGlzIHRoZSBzbWFsbGVzdCBub2RlIGxhYmVsIG9uIHRoZSBwYXRoIGZyb20gcm9vdCB0byB2LgovLyBUaGUgcm9vdCdzIGRpdmluZW5lc3MgaXMgaXRzIG93biBsYWJlbC4KCi8vIEtleSBvYnNlcnZhdGlvbnM6Ci8vIC0gVGhlIG1pbmltYWwgcG9zc2libGUgc3VtIGlzIHdoZW4gcm9vdD0xIGFuZCB0cmVlIGlzIGEgc3Rhcjogc3VtID0gbioxID0gbgovLyAtIFRoZSBtYXhpbWFsIHBvc3NpYmxlIHN1bSBpcyB3aGVuIHJvb3Q9biBhbmQgdHJlZSBpcyBhIGNoYWluIGZyb20gbiBkb3duIHRvIDE6Ci8vICAgc3VtID0gbioobisxKS8yCi8vIEJlY2F1c2UgZGl2aW5lbmVzcyBvZiBlYWNoIG5vZGUgaW4gY2hhaW4gd2l0aCByb290PW4gaXMgbm9kZSBsYWJlbCBpdHNlbGYuCgovLyBXZSB3aWxsIHRyeSByb290cyBmcm9tIDEgdG8gbiBhbmQgY2hlY2sgaWYgbSBpcyBhY2hpZXZhYmxlLgovLyBGb3IgYSBjaG9zZW4gcm9vdCBrOgovLyBtaW5pbWFsIHN1bSA9IG4qayAoc3RhciB0cmVlIHdpdGggcm9vdCBrKQovLyBtYXhpbWFsIHN1bSA9IHN1bSBvZiBhbGwgbGFiZWxzIGZyb20gayB0byBuIHBsdXMgKGstMSkqMQovLyBCdXQgc2luY2UgZGl2aW5lbmVzcyBpcyBtaW5pbXVtIGxhYmVsIG9uIHBhdGggZnJvbSByb290LAovLyBhbmQgcm9vdCBpcyBrLCBhbGwgbm9kZXMgaGF2ZSBkaXZpbmVuZXNzID49IGsKLy8gVGhlIHNtYWxsZXN0IGRpdmluZW5lc3MgZm9yIG5vZGUgdiBpcyBtaW4oaywgdicpIHdoZXJlIHYnIGlzIG9uIHBhdGggZnJvbSByb290IHRvIHYuCgovLyBBY3R1YWxseSwgZm9yIHJvb3QgaywgbWluaW1hbCBzdW0gaXMgbiprIChzdGFyKQovLyBtYXhpbWFsIHN1bSBpcyBrICsgKGsrMSkgKyAuLi4gKyBuICsgKGstMSkqMQovLyBiZWNhdXNlIG5vZGVzIDwgayBtdXN0IGJlIGNvbm5lY3RlZCB0aHJvdWdoIHJvb3Qgaywgc28gdGhlaXIgZGl2aW5lbmVzcyBpcyAxCi8vIEJ1dCAxIDwgaywgc28gZGl2aW5lbmVzcyBpcyAxIGZvciBub2RlcyA8IGsuCgovLyBTbyBzdW1fbWluID0gbiprCi8vIHN1bV9tYXggPSBzdW0gb2YgbGFiZWxzIGZyb20gayB0byBuICsgKGstMSkqMQovLyBzdW1fbWF4ID0gKG4qKG4rMSkpLzIgLSAoKGstMSkqaykvMiArIChrLTEpID0gKG4qKG4rMSkpLzIgLSAoayooay0xKSkvMiArIChrLTEpCgovLyBXZSdsbCB0cnkgdG8gZmluZCBhIHJvb3QgayBzdWNoIHRoYXQgc3VtX21pbiA8PSBtIDw9IHN1bV9tYXgKCi8vIFRoZW4gY29uc3RydWN0IHRoZSB0cmVlIGFjY29yZGluZ2x5OgovLyBDb25uZWN0IHJvb3QgayB0byBhbGwgbm9kZXMgPCBrIChkaXZpbmVuZXNzIDEpCi8vIENvbm5lY3Qgb3RoZXJzIGluIGEgY2hhaW4gd2l0aCBpbmNyZWFzaW5nIGxhYmVscyB0byBnZXQgZGVzaXJlZCBzdW0KCi8vIEltcGxlbWVudGF0aW9uIGRldGFpbHM6Ci8vIFdlJ2xsIGltcGxlbWVudCBhIGJpbmFyeSBzZWFyY2ggZm9yIGsuCgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CgogICAgaW50IHQ7IGNpbiA+PiB0OwogICAgd2hpbGUodC0tKSB7CiAgICAgICAgaW50IG47IGxvbmcgbG9uZyBtOwogICAgICAgIGNpbiA+PiBuID4+IG07CgogICAgICAgIGxvbmcgbG9uZyB0b3RhbF9zdW0gPSAobG9uZyBsb25nKW4gKiAobiArIDEpIC8gMjsKICAgICAgICBpZiAobSA8IG4gfHwgbSA+IHRvdGFsX3N1bSkgewogICAgICAgICAgICBjb3V0IDw8IC0xIDw8ICdcbic7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgLy8gQmluYXJ5IHNlYXJjaCBmb3IgayAocm9vdCkKICAgICAgICBpbnQgbGVmdCA9IDEsIHJpZ2h0ID0gbiwgcm9vdCA9IC0xOwogICAgICAgIHdoaWxlKGxlZnQgPD0gcmlnaHQpIHsKICAgICAgICAgICAgaW50IG1pZCA9IChsZWZ0ICsgcmlnaHQpIC8gMjsKICAgICAgICAgICAgbG9uZyBsb25nIG1pbl9zdW0gPSAobG9uZyBsb25nKW1pZCAqIG47CiAgICAgICAgICAgIGxvbmcgbG9uZyBtYXhfc3VtID0gdG90YWxfc3VtIC0gKGxvbmcgbG9uZykobWlkIC0gMSkgKiBtaWQgLyAyICsgKG1pZCAtIDEpOwogICAgICAgICAgICBpZiAobSA+PSBtaW5fc3VtICYmIG0gPD0gbWF4X3N1bSkgewogICAgICAgICAgICAgICAgcm9vdCA9IG1pZDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtIDwgbWluX3N1bSkgcmlnaHQgPSBtaWQgLSAxOwogICAgICAgICAgICBlbHNlIGxlZnQgPSBtaWQgKyAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJvb3QgPT0gLTEpIHsKICAgICAgICAgICAgY291dCA8PCAtMSA8PCAnXG4nOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIENvbnN0cnVjdCB0cmVlOgogICAgICAgIC8vIDEpIFJvb3QgPSByb290CiAgICAgICAgLy8gMikgQ29ubmVjdCBhbGwgbm9kZXMgPCByb290IHRvIG5vZGUgMSAob3Igcm9vdCksIGRpdmluZW5lc3MgPSAxCiAgICAgICAgLy8gMykgRm9yIG5vZGVzID49IHJvb3QsIGJ1aWxkIGEgY2hhaW4gdG8gYWRqdXN0IHN1bQoKICAgICAgICAvLyBGaXJzdCBjcmVhdGUgYWRqYWNlbmN5IGxpc3QgZm9yIGVkZ2VzCiAgICAgICAgdmVjdG9yPHBhaXI8aW50LGludD4+IGVkZ2VzOwoKICAgICAgICAvLyBDb25uZWN0IGFsbCBub2RlcyA8IHJvb3QgdG8gbm9kZSAxIChpZiByb290ICE9MSksIGVsc2UgdG8gcm9vdAogICAgICAgIC8vIFRvIGtlZXAgZGl2aW5lbmVzcyAxIGZvciB0aGVzZSBub2RlcwogICAgICAgIGludCBjb25uZWN0X3RvID0gKHJvb3QgPT0gMSkgPyByb290IDogMTsKICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IHJvb3Q7IGkrKykgewogICAgICAgICAgICBlZGdlcy5lbXBsYWNlX2JhY2soY29ubmVjdF90bywgaSk7CiAgICAgICAgfQoKICAgICAgICAvLyBOb3cgaGFuZGxlIG5vZGVzID49IHJvb3QKICAgICAgICAvLyBTdGFydCBjaGFpbiBmcm9tIHJvb3QKICAgICAgICB2ZWN0b3I8aW50PiBjaGFpbl9ub2RlczsKICAgICAgICBmb3IgKGludCBpID0gcm9vdDsgaSA8PSBuOyBpKyspIGNoYWluX25vZGVzLnB1c2hfYmFjayhpKTsKCiAgICAgICAgLy8gc3VtX21pbiBmb3IgdGhlc2Ugbm9kZXMgaXMgcm9vdCAqIChuIC0gcm9vdCArIDEpCiAgICAgICAgbG9uZyBsb25nIGN1cnJlbnRfc3VtID0gKGxvbmcgbG9uZylyb290ICogbjsgLy8gaW5pdGlhbCBzdW0gZnJvbSBhbGwgbm9kZXMgaGF2aW5nIGRpdmluZW5lc3Mgcm9vdAoKICAgICAgICAvLyBXZSB3aWxsIHRyeSB0byBpbmNyZW1lbnQgZGl2aW5lbmVzcyBmb3Igc29tZSBub2RlcyBieSBwdXR0aW5nIHRoZW0gZGVlcGVyIGluIGNoYWluCiAgICAgICAgLy8gVGhlIG1heGltdW0gZGl2aW5lbmVzcyBzdW0gZm9yIG5vZGVzID49IHJvb3QgaXMgc3VtIG9mIGxhYmVscyBmcm9tIHJvb3QgdG8gbgogICAgICAgIGxvbmcgbG9uZyBtYXhfY2hhaW5fc3VtID0gMDsKICAgICAgICBmb3IgKGludCB4IDogY2hhaW5fbm9kZXMpIG1heF9jaGFpbl9zdW0gKz0geDsKCiAgICAgICAgLy8gVGhlIGRpdmluZW5lc3Mgc3VtIHdlIHdhbnQgZm9yIHRoZXNlIG5vZGVzIGlzIG0gLSAocm9vdC0xKSoxICh0aGUgbm9kZXMgPCByb290IGhhdmUgZGl2aW5lbmVzcyAxKQogICAgICAgIGxvbmcgbG9uZyB0YXJnZXRfY2hhaW5fc3VtID0gbSAtIChyb290IC0gMSk7CgogICAgICAgIC8vIFdlIG11c3QgYXJyYW5nZSBlZGdlcyB0byBmb3JtIGEgY2hhaW4gdG8gaW5jcmVhc2UgZGl2aW5lbmVzcyBzdW0gZnJvbSBtaW5fc3VtIHRvIG0KICAgICAgICAvLyBXZSdsbCBidWlsZCBhIGNoYWluIGZyb20gcm9vdCB0byBuIGluIGluY3JlYXNpbmcgb3JkZXIgdG8gbWF4aW1pemUgc3VtCgogICAgICAgIC8vIElmIHRhcmdldF9jaGFpbl9zdW0gPCByb290ICogKG4gLSByb290ICsgMSksIHdlIG5lZWQgdG8gYWRqdXN0CiAgICAgICAgLy8gQnV0IGJ5IHByb2JsZW0gY29uc3RyYWludHMsIHRhcmdldF9jaGFpbl9zdW0gPj0gcm9vdCAqIChuIC0gcm9vdCArIDEpCgogICAgICAgIC8vIFdlIGNhbiBidWlsZCBlZGdlcyBhcyBhIGNoYWluIHJvb3QgLT4gcm9vdCsxIC0+IHJvb3QrMiAtPiAuLi4gLT4gbgogICAgICAgIC8vIHN1bSBvZiBkaXZpbmVuZXNzID0gc3VtIG9mIGxhYmVscyBpbiBjaGFpbgogICAgICAgIC8vIFdlIG5lZWQgdG8gYWRqdXN0IGVkZ2VzIHNvIHRoYXQgc3VtIGVxdWFscyB0YXJnZXRfY2hhaW5fc3VtCgogICAgICAgIC8vIFRoZSBtaW5pbWFsIGNoYWluIHN1bSBpcyByb290ICogKG4gLSByb290ICsgMSkgKGFsbCBjb25uZWN0ZWQgZGlyZWN0bHkgdG8gcm9vdCkKICAgICAgICAvLyBUaGUgbWF4aW1hbCBjaGFpbiBzdW0gaXMgc3VtIG9mIGxhYmVscyBmcm9tIHJvb3QgdG8gbgoKICAgICAgICAvLyBXZSdsbCBidWlsZCBhIGNoYWluIHdpdGggbm9kZXMgc29ydGVkIGJ5IGxhYmVsIGFzY2VuZGluZwoKICAgICAgICAvLyBBc3NpZ24gcGFyZW50IGFycmF5CiAgICAgICAgdmVjdG9yPGludD4gcGFyZW50KG4gKyAxLCAtMSk7CiAgICAgICAgcGFyZW50W3Jvb3RdID0gMDsgLy8gcm9vdCBoYXMgbm8gcGFyZW50CgogICAgICAgIGZvciAoc2l6ZV90IGkgPSAxOyBpIDwgY2hhaW5fbm9kZXMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgcGFyZW50W2NoYWluX25vZGVzW2ldXSA9IGNoYWluX25vZGVzW2kgLSAxXTsKICAgICAgICB9CgogICAgICAgIC8vIE5vdyBzdW0gZGl2aW5lbmVzcyBvZiBjaGFpbiBpcyBzdW0gb2YgbGFiZWxzIGluIGNoYWluCiAgICAgICAgLy8gd2hpY2ggaXMgbWF4X2NoYWluX3N1bQogICAgICAgIC8vIElmIG1heF9jaGFpbl9zdW0gPT0gdGFyZ2V0X2NoYWluX3N1bSwgZG9uZQogICAgICAgIC8vIEVsc2Ugd2UgbmVlZCB0byBhZGp1c3QgZWRnZXMgdG8gcmVkdWNlIHN1bQoKICAgICAgICBsb25nIGxvbmcgZGlmZiA9IG1heF9jaGFpbl9zdW0gLSB0YXJnZXRfY2hhaW5fc3VtOwoKICAgICAgICAvLyBUbyByZWR1Y2Ugc3VtIGJ5IGRpZmYsIHdlIGNhbiByZWNvbm5lY3Qgc29tZSBub2RlcyBjbG9zZXIgdG8gcm9vdAogICAgICAgIC8vIENoYW5naW5nIHBhcmVudCBvZiBub2RlIHYgZnJvbSB1IHRvIHJvb3QgcmVkdWNlcyBkaXZpbmVuZXNzIGZyb20gdiB0byByb290CiAgICAgICAgCiAgICAgICAgLy8gV2UnbGwgdHJ5IHRvIHJlY29ubmVjdCBub2RlcyBmcm9tIHRoZSBlbmQgdG93YXJkcyByb290IHRvIHJvb3QgdG8gcmVkdWNlIHN1bQogICAgICAgIGZvciAoaW50IGkgPSAoaW50KWNoYWluX25vZGVzLnNpemUoKSAtIDE7IGkgPj0gMSAmJiBkaWZmID4gMDsgaS0tKSB7CiAgICAgICAgICAgIGludCB2ID0gY2hhaW5fbm9kZXNbaV07CiAgICAgICAgICAgIGludCB1ID0gcGFyZW50W3ZdOwogICAgICAgICAgICAvLyBDdXJyZW50IGRpdmluZW5lc3Mgb2YgdiBpcyB2CiAgICAgICAgICAgIC8vIElmIHdlIGNvbm5lY3QgdiBkaXJlY3RseSB0byByb290LCBkaXZpbmVuZXNzID0gcm9vdAogICAgICAgICAgICBsb25nIGxvbmcgZGVjcmVhc2UgPSB2IC0gcm9vdDsKICAgICAgICAgICAgaWYgKGRlY3JlYXNlIDw9IGRpZmYpIHsKICAgICAgICAgICAgICAgIHBhcmVudFt2XSA9IHJvb3Q7CiAgICAgICAgICAgICAgICBkaWZmIC09IGRlY3JlYXNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gQ2FuJ3QgcmVkdWNlIGZ1bGx5LCBza2lwCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChkaWZmICE9IDApIHsKICAgICAgICAgICAgLy8gSWYgd2UgY291bGRuJ3QgYWRqdXN0IGZ1bGx5LCBwcmludCAtMQogICAgICAgICAgICBjb3V0IDw8IC0xIDw8ICdcbic7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgLy8gQWRkIGVkZ2VzIGZvciBjaGFpbgogICAgICAgIGZvciAoaW50IGkgPSByb290ICsgMTsgaSA8PSBuOyBpKyspIHsKICAgICAgICAgICAgaWYgKHBhcmVudFtpXSAhPSAtMSkgewogICAgICAgICAgICAgICAgZWRnZXMuZW1wbGFjZV9iYWNrKHBhcmVudFtpXSwgaSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIFByaW50IHJlc3VsdAogICAgICAgIGNvdXQgPDwgcm9vdCA8PCAnXG4nOwogICAgICAgIGZvciAoYXV0byAmZSA6IGVkZ2VzKSB7CiAgICAgICAgICAgIGNvdXQgPDwgZS5maXJzdCA8PCAnICcgPDwgZS5zZWNvbmQgPDwgJ1xuJzsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
