[?2004hroot@f13c0c97fcb0:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@f13c0c97fcb0:/app# clear
[?2004l[H[J[3J[?2004hroot@f13c0c97fcb0:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBDaGVjayBpZiBhIG51bWJlciBpcyB6ZWJyYS1saWtlOiBiaW5hcnkgcmVwcmVzZW50YXRpb24gYWx0ZXJuYXRlcyBiaXRzIGFuZCBlbmRzIHdpdGggMQpib29sIGlzWmVicmEodWludDY0X3QgeCkgewogICAgaWYgKCh4ICYgMSkgPT0gMCkgcmV0dXJuIGZhbHNlOyAvLyBMU0IgbXVzdCBiZSAxCiAgICAvLyBjaGVjayBhbHRlcm5hdGluZyBiaXRzCiAgICB1aW50NjRfdCBwcmV2ID0geCAmIDE7CiAgICB4ID4+PSAxOwogICAgd2hpbGUgKHgpIHsKICAgICAgICB1aW50NjRfdCBjdXIgPSB4ICYgMTsKICAgICAgICBpZiAoY3VyID09IHByZXYpIHJldHVybiBmYWxzZTsKICAgICAgICBwcmV2ID0gY3VyOwogICAgICAgIHggPj49IDE7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKfQoKLy8gUHJlY29tcHV0ZSBhbGwgemVicmEtbGlrZSBudW1iZXJzIHVwIHRvIDFlMTgKLy8gWmVicmEtbGlrZSBudW1iZXJzIGFyZSBiaW5hcnkgbnVtYmVycyB3aXRoIGFsdGVybmF0aW5nIGJpdHMgc3RhcnRpbmcgZnJvbSAxIGFuZCBlbmRpbmcgd2l0aCAxCi8vIEZvciBleGFtcGxlOiAxICgxKSwgNSAoMTAxKSwgMTAoMTAxMCBubyksIDIxICgxMDEwMSkKLy8gV2UgY2FuIGdlbmVyYXRlIHplYnJhLWxpa2UgbnVtYmVycyBieSBjb25zdHJ1Y3RpbmcgbnVtYmVycyB3aXRoIGxlbmd0aHMgMSB0byA2MAoKdmVjdG9yPHVpbnQ2NF90PiBnZW5lcmF0ZVplYnJhKCkgewogICAgdmVjdG9yPHVpbnQ2NF90PiB6ZWJyYTsKICAgIC8vIGxlbmd0aCBpcyB0aGUgYml0IGxlbmd0aAogICAgZm9yIChpbnQgbGVuID0gMTsgbGVuIDw9IDYwOyBsZW4rKykgewogICAgICAgIC8vIGJ1aWxkIHR3byBwYXR0ZXJucyBzdGFydGluZyB3aXRoIDEgYml0CiAgICAgICAgLy8gcGF0dGVybiBBOiBiaXRzIGF0IGV2ZW4gcG9zaXRpb25zIGFyZSAxLCBvZGQgcG9zaXRpb25zIGFyZSAwCiAgICAgICAgLy8gcGF0dGVybiBCOiBiaXRzIGF0IGV2ZW4gcG9zaXRpb25zIGFyZSAwLCBvZGQgcG9zaXRpb25zIGFyZSAxCiAgICAgICAgLy8gYnV0IExTQiBtdXN0IGJlIDEsIHNvIG9ubHkgY29uc2lkZXIgcGF0dGVybnMgd2hlcmUgTFNCIGlzIDEKCiAgICAgICAgLy8gcGF0dGVybiBBOiBiaXRzIGF0IGV2ZW4gcG9zaXRpb25zICgwLWJhc2VkKSA9IDEsIG9kZCA9IDAKICAgICAgICB1aW50NjRfdCBudW1BID0gMDsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpICUgMiA9PSAwKSBudW1BIHw9ICh1aW50NjRfdCkxIDw8IGk7CiAgICAgICAgfQogICAgICAgIGlmIChudW1BID4+IChsZW4gLSAxKSAmIDEpIHsgLy8gTVNCIG11c3QgYmUgMQogICAgICAgICAgICB6ZWJyYS5wdXNoX2JhY2sobnVtQSk7CiAgICAgICAgfQoKICAgICAgICAvLyBwYXR0ZXJuIEI6IGJpdHMgYXQgZXZlbiBwb3NpdGlvbnMgPSAwLCBvZGQgPSAxCiAgICAgICAgdWludDY0X3QgbnVtQiA9IDA7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICBpZiAoaSAlIDIgPT0gMSkgbnVtQiB8PSAodWludDY0X3QpMSA8PCBpOwogICAgICAgIH0KICAgICAgICBpZiAoKG51bUIgPj4gKGxlbiAtIDEpICYgMSkgJiYgKG51bUIgJiAxKSkgewogICAgICAgICAgICB6ZWJyYS5wdXNoX2JhY2sobnVtQik7CiAgICAgICAgfQogICAgfQogICAgc29ydCh6ZWJyYS5iZWdpbigpLCB6ZWJyYS5lbmQoKSk7CiAgICB6ZWJyYS5lcmFzZSh1bmlxdWUoemVicmEuYmVnaW4oKSwgemVicmEuZW5kKCkpLCB6ZWJyYS5lbmQoKSk7CiAgICByZXR1cm4gemVicmE7Cn0KCi8vIEZvciBrPTE6IHggbXVzdCBiZSB6ZWJyYS1saWtlCi8vIEZvciBrPj0zOiBldmVyeSBudW1iZXIgY2FuIGJlIHJlcHJlc2VudGVkIGFzIHN1bSBvZiAzIHplYnJhLWxpa2UgbnVtYmVycyAocHJvdmVkIGJ5IHByb2JsZW0gc2V0dGVyKQovLyBGb3Igaz0yOiB4IG11c3QgYmUgc3VtIG9mIHR3byB6ZWJyYS1saWtlIG51bWJlcnMKLy8gU28gd2Ugb25seSBuZWVkIHRvIGhhbmRsZSBrPTEsMiBhbmQgaz49MyBjYXNlcwoKLy8gRm9yIGs9MTogY291bnQgbnVtYmVycyBpbiBbbCxyXSB0aGF0IGFyZSB6ZWJyYS1saWtlCgovLyBGb3Igaz0yOiBjb3VudCBudW1iZXJzIGluIFtsLHJdIHRoYXQgY2FuIGJlIHJlcHJlc2VudGVkIGFzIHN1bSBvZiB0d28gemVicmEtbGlrZSBudW1iZXJzCi8vIFdlIGNhbiB1c2UgdHdvIHBvaW50ZXJzIG9uIHRoZSBwcmVjb21wdXRlZCB6ZWJyYS1saWtlIGxpc3QKCi8vIEZvciBrPj0zOiBhbnN3ZXIgPSByLWwrMSBiZWNhdXNlIGFsbCBudW1iZXJzIGNhbiBiZSByZXByZXNlbnRlZAoKdWludDY0X3QgY291bnRaZWJyYUluUmFuZ2UoY29uc3QgdmVjdG9yPHVpbnQ2NF90PiYgemVicmEsIHVpbnQ2NF90IGwsIHVpbnQ2NF90IHIpIHsKICAgIC8vIENvdW50IHplYnJhLWxpa2UgbnVtYmVycyBpbiBbbCxyXQogICAgYXV0byBpdEwgPSBsb3dlcl9ib3VuZCh6ZWJyYS5iZWdpbigpLCB6ZWJyYS5lbmQoKSwgbCk7CiAgICBhdXRvIGl0UiA9IHVwcGVyX2JvdW5kKHplYnJhLmJlZ2luKCksIHplYnJhLmVuZCgpLCByKTsKICAgIHJldHVybiAodWludDY0X3QpKGl0UiAtIGl0TCk7Cn0KCnVpbnQ2NF90IGNvdW50U3VtVHdvWmVicmEoY29uc3QgdmVjdG9yPHVpbnQ2NF90PiYgemVicmEsIHVpbnQ2NF90IGwsIHVpbnQ2NF90IHIpIHsKICAgIC8vIFVzZSB0d28gcG9pbnRlcnMgdG8gY291bnQgc3VtcyBvZiB0d28gemVicmEgbnVtYmVycyBpbiBbbCxyXQogICAgLy8gVG8gaGFuZGxlIGxhcmdlIHJhbmdlcyBlZmZpY2llbnRseSwgd2UgdXNlIGEgdHdvIHBvaW50ZXJzIHdpdGggYSBzZXQgb3IgYmluYXJ5IHNlYXJjaAogICAgLy8gQnV0IHNpbmNlIHplYnJhIGxpc3Qgc2l6ZSB+MTIwLCBPKG5eMikgaXMgYWNjZXB0YWJsZQoKICAgIHVpbnQ2NF90IGNvdW50ID0gMDsKICAgIGludCBuID0gKGludCl6ZWJyYS5zaXplKCk7CiAgICB1bm9yZGVyZWRfc2V0PHVpbnQ2NF90PiBzdW1zOwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICBmb3IgKGludCBqID0gaTsgaiA8IG47IGorKykgewogICAgICAgICAgICB1aW50NjRfdCBzID0gemVicmFbaV0gKyB6ZWJyYVtqXTsKICAgICAgICAgICAgaWYgKHMgPiByKSBicmVhazsgLy8gc3VtcyBzb3J0ZWQgaW5jcmVhc2luZyB3aXRoIGoKICAgICAgICAgICAgaWYgKHMgPj0gbCkgc3Vtcy5pbnNlcnQocyk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICh1aW50NjRfdClzdW1zLnNpemUoKTsKfQoKaW50IG1haW4oKSB7CiAgICBpb3M6OnN5bmNfd2l0aF9zdGRpbyhmYWxzZSk7CiAgICBjaW4udGllKG51bGxwdHIpOwoKICAgIGludCB0OyBjaW4gPj4gdDsKICAgIHZlY3Rvcjx1aW50NjRfdD4gemVicmEgPSBnZW5lcmF0ZVplYnJhKCk7CgogICAgd2hpbGUgKHQtLSkgewogICAgICAgIHVpbnQ2NF90IGwsIHIsIGs7CiAgICAgICAgY2luID4+IGwgPj4gciA+PiBrOwoKICAgICAgICBpZiAoayA9PSAxKSB7CiAgICAgICAgICAgIGNvdXQgPDwgY291bnRaZWJyYUluUmFuZ2UoemVicmEsIGwsIHIpIDw8ICdcbic7CiAgICAgICAgfSBlbHNlIGlmIChrID09IDIpIHsKICAgICAgICAgICAgY291dCA8PCBjb3VudFN1bVR3b1plYnJhKHplYnJhLCBsLCByKSA8PCAnXG4nOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEZvciBrID49IDMsIGFsbCBudW1iZXJzIGluIFtsLHJdIGNhbiBiZSByZXByZXNlbnRlZAogICAgICAgICAgICBjb3V0IDw8IChyIC0gbCArIDEpIDw8ICdcbic7CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@f13c0c97fcb0:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@f13c0c97fcb0:/app# 