[?2004hroot@36484b5d2677:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@36484b5d2677:/app# clear
[?2004l[H[J[3J[?2004hroot@36484b5d2677:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuOwogICAgICAgIHN0cmluZyBzOwogICAgICAgIGNpbiA+PiBuID4+IHM7CgogICAgICAgIC8vIEZ1bmN0aW9uIHRvIGNoZWNrIG1pbmltYWwgcmVwbGFjZW1lbnQgb3BlcmF0aW9ucyB0byBtYWtlIHMgYWx0ZXJuYXRpbmcgd2l0aCBnaXZlbiBldmVuIGFuZCBvZGQgY2hhcnMKICAgICAgICBhdXRvIGNvc3RfdG9fYWx0ZXJuYXRlID0gWyZdKGNoYXIgZXZlbl9jaGFyLCBjaGFyIG9kZF9jaGFyLCBjb25zdCBzdHJpbmcgJnN0cikgewogICAgICAgICAgICBpbnQgY29zdCA9IDA7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgKGludClzdHIuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChpICUgMiA9PSAwICYmIHN0cltpXSAhPSBldmVuX2NoYXIpIGNvc3QrKzsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgJSAyID09IDEgJiYgc3RyW2ldICE9IG9kZF9jaGFyKSBjb3N0Kys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGNvc3Q7CiAgICAgICAgfTsKCiAgICAgICAgLy8gV2Ugd2FudCB0byBtYWtlIGxlbmd0aCBldmVuCiAgICAgICAgLy8gVHdvIG9wdGlvbnM6IGtlZXAgbGVuZ3RoIGlmIGV2ZW4sIG9yIGRlbGV0ZSBvbmUgY2hhciBpZiBvZGQKICAgICAgICBpbnQgYW5zID0gSU5UX01BWDsKCiAgICAgICAgLy8gSWYgbGVuZ3RoIGlzIGV2ZW4sIHRyeSBhbGwgcGFpcnMgKGV2ZW5fY2hhciwgb2RkX2NoYXIpCiAgICAgICAgaWYgKG4gJSAyID09IDApIHsKICAgICAgICAgICAgLy8gVHJ5IGFsbCBwYWlycyBvZiBkaXN0aW5jdCBjaGFycyAoc2luY2UgdGhleSBtdXN0IGFsdGVybmF0ZSkKICAgICAgICAgICAgZm9yIChjaGFyIGV2ZW5fY2hhciA9ICdhJzsgZXZlbl9jaGFyIDw9ICd6JzsgZXZlbl9jaGFyKyspIHsKICAgICAgICAgICAgICAgIGZvciAoY2hhciBvZGRfY2hhciA9ICdhJzsgb2RkX2NoYXIgPD0gJ3onOyBvZGRfY2hhcisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW5fY2hhciA9PSBvZGRfY2hhcikgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgaW50IG9wcyA9IGNvc3RfdG9fYWx0ZXJuYXRlKGV2ZW5fY2hhciwgb2RkX2NoYXIsIHMpOwogICAgICAgICAgICAgICAgICAgIGFucyA9IG1pbihhbnMsIG9wcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBJZiBsZW5ndGggaXMgb2RkLCB0cnkgZGVsZXRpbmcgb25lIGNoYXJhY3RlciBhdCBlYWNoIHBvc2l0aW9uIHRvIGdldCBldmVuIGxlbmd0aCBzdHJpbmcKICAgICAgICAgICAgLy8gRm9yIGVhY2ggZGVsZXRpb24sIHRyeSBhbGwgcGFpcnMgKGV2ZW5fY2hhciwgb2RkX2NoYXIpCiAgICAgICAgICAgIGZvciAoaW50IGRlbF9wb3MgPSAwOyBkZWxfcG9zIDwgbjsgZGVsX3BvcysrKSB7CiAgICAgICAgICAgICAgICBzdHJpbmcgdCA9IHMuc3Vic3RyKDAsIGRlbF9wb3MpICsgcy5zdWJzdHIoZGVsX3BvcyArIDEpOwogICAgICAgICAgICAgICAgZm9yIChjaGFyIGV2ZW5fY2hhciA9ICdhJzsgZXZlbl9jaGFyIDw9ICd6JzsgZXZlbl9jaGFyKyspIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNoYXIgb2RkX2NoYXIgPSAnYSc7IG9kZF9jaGFyIDw9ICd6Jzsgb2RkX2NoYXIrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbl9jaGFyID09IG9kZF9jaGFyKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaW50IG9wcyA9IGNvc3RfdG9fYWx0ZXJuYXRlKGV2ZW5fY2hhciwgb2RkX2NoYXIsIHQpICsgMTsgLy8gKzEgZm9yIGRlbGV0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGFucyA9IG1pbihhbnMsIG9wcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb3V0IDw8IGFucyA8PCAiXG4iOwogICAgfQogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@36484b5d2677:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@36484b5d2677:/app# 