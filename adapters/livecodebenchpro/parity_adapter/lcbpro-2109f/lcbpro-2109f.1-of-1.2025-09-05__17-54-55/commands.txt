['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7Cgpjb25zdCBpbnQgSU5GID0gMWU5OwoKc3RydWN0IENlbGwgewogICAgaW50IHgsIHk7Cn07CgppbnQgbiwgciwgazsKdmVjdG9yPHZlY3RvcjxpbnQ+PiBhOwp2ZWN0b3I8dmVjdG9yPGludD4+IGM7CgppbnQgZHhbNF0gPSB7MSwgLTEsIDAsIDB9OwppbnQgZHlbNF0gPSB7MCwgMCwgMSwgLTF9OwoKLy8gQ2hlY2sgaWYgcGF0aCBleGlzdHMgZnJvbSBzdGFydCB0byAocixuKSB3aXRoIG1heCB2YWx1ZSA8PSBtaWQKLy8gQWxzbyByZWNvcmQgdGhlIHNldCBvZiBjZWxscyBvbiBhbGwgbWluaW1hbCBwYXRocwpib29sIGJmcyhpbnQgc3RhcnRYLCBpbnQgc3RhcnRZLCBpbnQgbWF4VmFsLCB2ZWN0b3I8dmVjdG9yPGJvb2w+PiAmcmVhY2hhYmxlKSB7CiAgICAvLyBCRlMgdG8gZmluZCBpZiBwYXRoIGV4aXN0cyB3aXRoIG1heCBjZWxsIHZhbHVlIDw9IG1heFZhbAogICAgdmVjdG9yPHZlY3Rvcjxib29sPj4gdmlzaXRlZChuLCB2ZWN0b3I8Ym9vbD4obiwgZmFsc2UpKTsKICAgIHF1ZXVlPHBhaXI8aW50LGludD4+IHE7CiAgICBpZiAoYVtzdGFydFhdW3N0YXJ0WV0gPiBtYXhWYWwpIHJldHVybiBmYWxzZTsKICAgIHZpc2l0ZWRbc3RhcnRYXVtzdGFydFldID0gdHJ1ZTsKICAgIHEucHVzaCh7c3RhcnRYLCBzdGFydFl9KTsKICAgIHdoaWxlICghcS5lbXB0eSgpKSB7CiAgICAgICAgYXV0byBbeCwgeV0gPSBxLmZyb250KCk7IHEucG9wKCk7CiAgICAgICAgaWYgKHggPT0gci0xICYmIHkgPT0gbi0xKSB7CiAgICAgICAgICAgIHJlYWNoYWJsZSA9IHZpc2l0ZWQ7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBmb3IgKGludCBkaXI9MDsgZGlyPDQ7IGRpcisrKSB7CiAgICAgICAgICAgIGludCBueCA9IHggKyBkeFtkaXJdOwogICAgICAgICAgICBpbnQgbnkgPSB5ICsgZHlbZGlyXTsKICAgICAgICAgICAgaWYgKG54Pj0wICYmIG54PG4gJiYgbnk+PTAgJiYgbnk8biAmJiAhdmlzaXRlZFtueF1bbnldICYmIGFbbnhdW255XSA8PSBtYXhWYWwpIHsKICAgICAgICAgICAgICAgIHZpc2l0ZWRbbnhdW255XSA9IHRydWU7CiAgICAgICAgICAgICAgICBxLnB1c2goe254LCBueX0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIGZhbHNlOwp9CgppbnQgZmluZE1pbkNvc3QoaW50IHN0YXJ0WCwgaW50IHN0YXJ0WSkgewogICAgLy8gQmluYXJ5IHNlYXJjaCBvbiBtYXggY29zdAogICAgaW50IGxvdyA9IDEsIGhpZ2ggPSAxMDAwMDAwOwogICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHsKICAgICAgICBpbnQgbWlkID0gKGxvdyArIGhpZ2gpIC8gMjsKICAgICAgICB2ZWN0b3I8dmVjdG9yPGJvb2w+PiBkdW1teTsKICAgICAgICBpZiAoYmZzKHN0YXJ0WCwgc3RhcnRZLCBtaWQsIGR1bW15KSkgewogICAgICAgICAgICBoaWdoID0gbWlkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIGxvdzsKfQoKLy8gRmluZCBhbGwgY2VsbHMgb24gYW55IG1pbmltYWwgcGF0aCBmcm9tIHN0YXJ0IHRvIGV4aXQgd2l0aCBjb3N0IGRpcwovLyBXZSBkbyBCRlMgZnJvbSBzdGFydCBhbmQgQkZTIGZyb20gZXhpdCBvbiBjZWxscyB3aXRoIHZhbHVlIDw9IGRpcwovLyBUaGUgaW50ZXJzZWN0aW9uIG9mIHJlYWNoYWJsZS1mcm9tLXN0YXJ0IGFuZCByZWFjaGFibGUtZnJvbS1leGl0IGFyZSBjZWxscyBvbiBzb21lIG1pbmltYWwgcGF0aAp2b2lkIGZpbmRNaW5pbWFsUGF0aENlbGxzKGludCBzdGFydFgsIGludCBzdGFydFksIGludCBkaXMsIHZlY3Rvcjx2ZWN0b3I8Ym9vbD4+ICZvblBhdGgpIHsKICAgIHZlY3Rvcjx2ZWN0b3I8Ym9vbD4+IGZyb21TdGFydChuLCB2ZWN0b3I8Ym9vbD4obiwgZmFsc2UpKTsKICAgIHZlY3Rvcjx2ZWN0b3I8Ym9vbD4+IGZyb21FbmQobiwgdmVjdG9yPGJvb2w+KG4sIGZhbHNlKSk7CiAgICAvLyBCRlMgZnJvbSBzdGFydAogICAgcXVldWU8cGFpcjxpbnQsaW50Pj4gcTsKICAgIGZyb21TdGFydFtzdGFydFhdW3N0YXJ0WV0gPSB0cnVlOwogICAgcS5wdXNoKHtzdGFydFgsIHN0YXJ0WX0pOwogICAgd2hpbGUgKCFxLmVtcHR5KCkpIHsKICAgICAgICBhdXRvIFt4LHldID0gcS5mcm9udCgpOyBxLnBvcCgpOwogICAgICAgIGZvciAoaW50IGRpcj0wOyBkaXI8NDsgZGlyKyspIHsKICAgICAgICAgICAgaW50IG54ID0geCArIGR4W2Rpcl07CiAgICAgICAgICAgIGludCBueSA9IHkgKyBkeVtkaXJdOwogICAgICAgICAgICBpZiAobng+PTAgJiYgbng8biAmJiBueT49MCAmJiBueTxuICYmICFmcm9tU3RhcnRbbnhdW255XSAmJiBhW254XVtueV08PWRpcykgewogICAgICAgICAgICAgICAgZnJvbVN0YXJ0W254XVtueV0gPSB0cnVlOwogICAgICAgICAgICAgICAgcS5wdXNoKHtueCwgbnl9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIC8vIEJGUyBmcm9tIGVuZAogICAgZnJvbUVuZFtyLTFdW24tMV0gPSB0cnVlOwogICAgcS5wdXNoKHtyLTEsIG4tMX0pOwogICAgd2hpbGUgKCFxLmVtcHR5KCkpIHsKICAgICAgICBhdXRvIFt4LHldID0gcS5mcm9udCgpOyBxLnBvcCgpOwogICAgICAgIGZvciAoaW50IGRpcj0wOyBkaXI8NDsgZGlyKyspIHsKICAgICAgICAgICAgaW50IG54ID0geCArIGR4W2Rpcl07CiAgICAgICAgICAgIGludCBueSA9IHkgKyBkeVtkaXJdOwogICAgICAgICAgICBpZiAobng+PTAgJiYgbng8biAmJiBueT49MCAmJiBueTxuICYmICFmcm9tRW5kW254XVtueV0gJiYgYVtueF1bbnldPD1kaXMpIHsKICAgICAgICAgICAgICAgIGZyb21FbmRbbnhdW255XSA9IHRydWU7CiAgICAgICAgICAgICAgICBxLnB1c2goe254LCBueX0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgLy8gSW50ZXJzZWN0aW9uCiAgICBmb3IgKGludCBpPTA7IGk8bjsgaSsrKSB7CiAgICAgICAgZm9yIChpbnQgaj0wOyBqPG47IGorKykgewogICAgICAgICAgICBvblBhdGhbaV1bal0gPSBmcm9tU3RhcnRbaV1bal0gJiYgZnJvbUVuZFtpXVtqXTsKICAgICAgICB9CiAgICB9Cn0KCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKCiAgICBpbnQgdDsgY2luID4+IHQ7CiAgICB3aGlsZSAodC0tKSB7CiAgICAgICAgY2luID4+IG4gPj4gciA+PiBrOwogICAgICAgIGEuYXNzaWduKG4sIHZlY3RvcjxpbnQ+KG4pKTsKICAgICAgICBjLmFzc2lnbihuLCB2ZWN0b3I8aW50PihuKSk7CiAgICAgICAgZm9yIChpbnQgaT0wOyBpPG47IGkrKykKICAgICAgICAgICAgZm9yIChpbnQgaj0wOyBqPG47IGorKykKICAgICAgICAgICAgICAgIGNpbiA+PiBhW2ldW2pdOwogICAgICAgIGZvciAoaW50IGk9MDsgaTxuOyBpKyspIHsKICAgICAgICAgICAgc3RyaW5nIHM7IGNpbiA+PiBzOwogICAgICAgICAgICBmb3IgKGludCBqPTA7IGo8bjsgaisrKQogICAgICAgICAgICAgICAgY1tpXVtqXSA9IChzW2pdID09ICcxJyA/IDEgOiAwKTsKICAgICAgICB9CgogICAgICAgIGludCBkaXNNID0gZmluZE1pbkNvc3QoMCwgMCk7CiAgICAgICAgaW50IGRpc0YgPSBmaW5kTWluQ29zdChuLTEsIDApOwoKICAgICAgICAvLyBGaW5kIGNlbGxzIG9uIG1pbmltYWwgTW91ZiBwYXRocwogICAgICAgIHZlY3Rvcjx2ZWN0b3I8Ym9vbD4+IG9uTW91ZlBhdGgobiwgdmVjdG9yPGJvb2w+KG4sIGZhbHNlKSk7CiAgICAgICAgZmluZE1pbmltYWxQYXRoQ2VsbHMoMCwgMCwgZGlzTSwgb25Nb3VmUGF0aCk7CgogICAgICAgIC8vIE1vdWYgY2FuIG9ubHkgaW5jcmVtZW50IGJsYWNrIGNlbGxzIG5vdCBvbiBoaXMgbWluaW1hbCBwYXRoCiAgICAgICAgLy8gV2UgdHJ5IHRvIHVzZSBvcGVyYXRpb25zIHRvIGluY3JlYXNlIEZvdWFkJ3MgbWluaW1hbCBwYXRoIGNvc3QKCiAgICAgICAgLy8gRmlyc3QsIGZpbmQgbWluaW1hbCBwYXRoIGNlbGxzIGZvciBGb3VhZCB3aXRoIGN1cnJlbnQgY29zdHMKICAgICAgICAvLyBUaGVuIHdlIHRyeSB0byBpbmNyZWFzZSB2YWx1ZXMgb2YgYmxhY2sgY2VsbHMgbm90IG9uIE1vdWYncyBtaW5pbWFsIHBhdGgsCiAgICAgICAgLy8gdG8gaW5jcmVhc2UgRm91YWQncyBtaW5pbWFsIHBhdGggY29zdCBhcyBtdWNoIGFzIHBvc3NpYmxlCgogICAgICAgIC8vIFdlIGRvIGJpbmFyeSBzZWFyY2ggb24gcG9zc2libGUgaW5jcmVhc2VkIGRpc0YKICAgICAgICBpbnQgbG93ID0gZGlzRiwgaGlnaCA9IDEwMDAwMDAgKyBrICsgMTsKCiAgICAgICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHsKICAgICAgICAgICAgaW50IG1pZCA9IChsb3cgKyBoaWdoICsgMSkgLyAyOwogICAgICAgICAgICAvLyBDaGVjayBpZiBwb3NzaWJsZSB0byBoYXZlIEZvdWFkJ3MgbWluaW1hbCBjb3N0ID49IG1pZAogICAgICAgICAgICAvLyB3aXRob3V0IGNoYW5naW5nIE1vdWYncyBtaW5pbWFsIGNvc3QKCiAgICAgICAgICAgIC8vIFdlIG11c3QgY2hlY2sgaWYgTW91ZiBzdGlsbCBoYXMgYSBwYXRoIHdpdGggbWF4IHZhbHVlIDw9IGRpc00KICAgICAgICAgICAgLy8gYW5kIEZvdWFkIGRvZXMgbm90IGhhdmUgYW55IHBhdGggd2l0aCBtYXggdmFsdWUgPCBtaWQKCiAgICAgICAgICAgIC8vIFdlIGNyZWF0ZSBhIGNvcHkgb2YgYSwgYW5kIGltYWdpbmUgd2UgYWRkIGluY3JlbWVudHMgdG8gYmxhY2sgY2VsbHMgbm90IG9uIE1vdWYncyBwYXRoCgogICAgICAgICAgICAvLyBBcHByb2FjaDoKICAgICAgICAgICAgLy8gV2Ugd2FudCB0byByYWlzZSBibGFjayBjZWxscyBub3Qgb24gTW91ZidzIHBhdGggYnkgaW5jcmVtZW50cyB0byBibG9jayBGb3VhZCdzIHBhdGhzIHdpdGggY29zdCA8IG1pZAogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRmluZCBtaW5pbWFsIGNvc3QgcGF0aCBmb3IgRm91YWQgd2l0aCBtYXggYWxsb3dlZCBtYXggdmFsdWUgPSBtaWQgLSAxCiAgICAgICAgICAgIC8vIElmIG5vIHBhdGggZXhpc3RzLCB0aGVuIEZvdWFkIG1pbmltYWwgY29zdCA+PSBtaWQKICAgICAgICAgICAgLy8gQnV0IHdlIG11c3QgZW5zdXJlIE1vdWYgbWluaW1hbCBwYXRoIGNvc3QgZG9lcyBub3QgaW5jcmVhc2UKCiAgICAgICAgICAgIC8vIE1vdWYncyBtaW5pbWFsIHBhdGggY29zdCBpcyBmaXhlZCBhdCBkaXNNLCBzbyBvbiBNb3VmJ3MgbWluaW1hbCBwYXRoIGNlbGxzIG1heCB2YWx1ZSA8PSBkaXNNCiAgICAgICAgICAgIC8vIFdlIGNhbm5vdCBpbmNyZWFzZSBhbnkgYmxhY2sgY2VsbCBvbiBNb3VmJ3MgcGF0aCwgc28gdGhvc2UgY2VsbHMgdmFsdWVzIHJlbWFpbiBzYW1lCgogICAgICAgICAgICAvLyBTbywgd2Ugb25seSBpbmNyZWFzZSBibGFjayBjZWxscyBub3Qgb24gTW91ZidzIHBhdGgKCiAgICAgICAgICAgIC8vIFRvIGJsb2NrIEZvdWFkJ3MgcGF0aCB3aXRoIG1heCBjb3N0IDwgbWlkLCB3ZSBuZWVkIHRvIGluY3JlYXNlIHNvbWUgYmxhY2sgY2VsbHMgbm90IG9uIE1vdWYncyBwYXRoIHRoYXQgYXBwZWFyIG9uIEZvdWFkJ3MgbWluaW1hbCBwYXRocyB3aXRoIGNvc3QgPCBtaWQKCiAgICAgICAgICAgIC8vIFdlIHNpbXVsYXRlIHRoZSBpbmNyZW1lbnRzIG5lZWRlZCB0byBibG9jayBhbGwgRm91YWQncyBwYXRocyB3aXRoIG1heCBjb3N0IDwgbWlkCgogICAgICAgICAgICAvLyBJbXBsZW1lbnRhdGlvbjoKICAgICAgICAgICAgLy8gUnVuIEJGUyB0byBmaW5kIGFsbCBGb3VhZCdzIG1pbmltYWwgcGF0aHMgd2l0aCBtYXggY29zdCA8IG1pZAogICAgICAgICAgICAvLyBGaW5kIGJsYWNrIGNlbGxzIG5vdCBvbiBNb3VmJ3MgbWluaW1hbCBwYXRoIHZpc2l0ZWQgaW4gdGhlc2UgcGF0aHMKICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGluY3JlbWVudHMgbmVlZGVkIHRvIGluY3JlYXNlIHRoZXNlIGNlbGxzIHRvIGF0IGxlYXN0IG1pZAoKICAgICAgICAgICAgLy8gSWYgdG90YWwgaW5jcmVtZW50cyA8PSBrLCB0aGVuIG1pZCBhY2hpZXZhYmxlCgogICAgICAgICAgICAvLyBCRlMgZm9yIEZvdWFkIHdpdGggbWF4IHZhbCA8IG1pZAogICAgICAgICAgICB2ZWN0b3I8dmVjdG9yPGJvb2w+PiB2aXNpdGVkKG4sIHZlY3Rvcjxib29sPihuLCBmYWxzZSkpOwogICAgICAgICAgICBxdWV1ZTxwYWlyPGludCxpbnQ+PiBxOwogICAgICAgICAgICBpZiAoYVtuLTFdWzBdIDwgbWlkKSB7CiAgICAgICAgICAgICAgICB2aXNpdGVkW24tMV1bMF0gPSB0cnVlOwogICAgICAgICAgICAgICAgcS5wdXNoKHtuLTEsMH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSAoIXEuZW1wdHkoKSkgewogICAgICAgICAgICAgICAgYXV0byBbeCx5XSA9IHEuZnJvbnQoKTsgcS5wb3AoKTsKICAgICAgICAgICAgICAgIGZvciAoaW50IGRpcj0wOyBkaXI8NDsgZGlyKyspIHsKICAgICAgICAgICAgICAgICAgICBpbnQgbnggPSB4ICsgZHhbZGlyXTsKICAgICAgICAgICAgICAgICAgICBpbnQgbnkgPSB5ICsgZHlbZGlyXTsKICAgICAgICAgICAgICAgICAgICBpZiAobng+PTAgJiYgbng8biAmJiBueT49MCAmJiBueTxuICYmICF2aXNpdGVkW254XVtueV0gJiYgYVtueF1bbnldIDwgbWlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRbbnhdW255XSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHEucHVzaCh7bngsIG55fSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJZiBleGl0IGNlbGwgcmVhY2hhYmxlLCB0aGVuIEZvdWFkJ3MgbWluaW1hbCBjb3N0IDwgbWlkLCBuZWVkIHRvIHRyeSB0byBibG9jawogICAgICAgICAgICBpZiAoIXZpc2l0ZWRbci0xXVtuLTFdKSB7CiAgICAgICAgICAgICAgICAvLyBGb3VhZCBtaW5pbWFsIGNvc3QgPj0gbWlkIGFscmVhZHkKICAgICAgICAgICAgICAgIGhpZ2ggPSBtaWQgLSAxOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIENvbGxlY3QgYmxhY2sgY2VsbHMgbm90IG9uIE1vdWYncyBwYXRoIHRoYXQgYXBwZWFyIGluIEZvdWFkJ3MgcGF0aHMgd2l0aCBtYXggY29zdCA8IG1pZAogICAgICAgICAgICB2ZWN0b3I8aW50PiBpbmNyZW1lbnRzTmVlZGVkOwogICAgICAgICAgICBmb3IgKGludCBpPTA7IGk8bjsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGludCBqPTA7IGo8bjsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZpc2l0ZWRbaV1bal0gJiYgY1tpXVtqXSA9PSAxICYmICFvbk1vdWZQYXRoW2ldW2pdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gaW5jcmVhc2UgdGhpcyBjZWxsIGZyb20gYVtpXVtqXSB0byBhdCBsZWFzdCBtaWQKICAgICAgICAgICAgICAgICAgICAgICAgaW50IG5lZWQgPSBtaWQgLSBhW2ldW2pdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmVlZCA+IDApIGluY3JlbWVudHNOZWVkZWQucHVzaF9iYWNrKG5lZWQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBJZiBjZWxsIG9uIE1vdWYncyBwYXRoIG9yIHdoaXRlIGNlbGwsIG5vIGluY3JlbWVudHMgYWxsb3dlZCBvciBpcnJlbGV2YW50CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFN1bSBpbmNyZW1lbnRzIG5lZWRlZAogICAgICAgICAgICBsb25nIGxvbmcgdG90YWxJbmMgPSAwOwogICAgICAgICAgICBmb3IgKGF1dG8gaW5jIDogaW5jcmVtZW50c05lZWRlZCkgdG90YWxJbmMgKz0gaW5jOwoKICAgICAgICAgICAgaWYgKHRvdGFsSW5jIDw9IChsb25nIGxvbmcpaykgewogICAgICAgICAgICAgICAgLy8gV2UgY2FuIGJsb2NrIGFsbCBGb3VhZCdzIHBhdGhzIHdpdGggY29zdCA8IG1pZAogICAgICAgICAgICAgICAgbG93ID0gbWlkOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaGlnaCA9IG1pZCAtIDE7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvdXQgPDwgZGlzTSA8PCAnICcgPDwgbG93IDw8ICdcbic7CiAgICB9CiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
