[?2004hroot@2413428dab26:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@2413428dab26:/app# clear
[?2004l[H[J[3J[?2004hroot@2413428dab26:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CnVzaW5nIGxsID0gbG9uZyBsb25nOwoKLy8gV2UgbmVlZCB0byBjb21wdXRlIGFfbSBmb3IgbSA+IG4gYXMgWE9SIG9mIGFfMSB0aHJvdWdoIGFfZmxvb3IobS8yKQovLyBTaW5jZSBsID0gciwgd2Ugb25seSBuZWVkIHRvIGNvbXB1dGUgYV9sIGZvciBlYWNoIHF1ZXJ5LgoKLy8gVG8gZG8gdGhpcyBlZmZpY2llbnRseSwgd2Ugd2lsbDoKLy8gLSBTdG9yZSBpbml0aWFsIHNlcXVlbmNlIGEgdXAgdG8gbgovLyAtIFVzZSBtZW1vaXphdGlvbiB0byBjb21wdXRlIGFfbSBmb3IgbSA+IG4KLy8gLSBTaW5jZSBtIGNhbiBiZSB1cCB0byAxZTE4LCB3ZSBtdXN0IHVzZSBhIG1hcCBjYWNoZSBhbmQgcmVjdXJzaW9uCi8vIC0gVXNlIHVub3JkZXJlZF9tYXAgZm9yIG1lbW9pemF0aW9uCi8vIC0gUHJlY29tcHV0ZSBwcmVmaXggWE9SIG9mIGluaXRpYWwgYSBmb3IgZmFzdCBYT1IgcXVlcmllcyBmb3IgbSA8PSBuCgp1bm9yZGVyZWRfbWFwPGxsLCBpbnQ+IG1lbW87CgppbnQgbjsKdmVjdG9yPGludD4gYTsKCmludCBnZXRfYShsbCBtKSB7CiAgICBpZiAobSA8PSBuKSByZXR1cm4gYVttLTFdOwogICAgaWYgKG1lbW8uY291bnQobSkpIHJldHVybiBtZW1vW21dOwogICAgbGwgaGFsZiA9IG0gLyAyOwogICAgaW50IHJlcyA9IDA7CiAgICAvLyBhX20gPSBYT1Igb2YgYV8xIC4uLiBhX2Zsb29yKG0vMikKICAgIC8vIFdlIGNhbiBjb21wdXRlIHRoaXMgYnk6CiAgICAvLyBYT1IgPSBwcmVmaXhfeG9yKGhhbGYpCiAgICAvLyBCdXQgaGFsZiBjYW4gYmUgPiBuLCBzbyByZWN1cnNpdmVseSBjb21wdXRlCiAgICAvLyBTbyBjb21wdXRlIFhPUiBvZiBhXzEgdG8gYV9oYWxmID0gZ2V0X3hvcihoYWxmKQogICAgLy8gSW1wbGVtZW50IGdldF94b3IobSkgdG8gZ2V0IFhPUiBvZiBhXzEgdG8gYV9tCiAgICBpbnQgdmFsID0gZ2V0X2EoaGFsZik7CiAgICAvLyBCdXQgdGhpcyBpcyBqdXN0IG9uZSBlbGVtZW50LCBub3QgWE9SIGZyb20gMSB0byBoYWxmCiAgICAvLyBTbyB3ZSBuZWVkIGEgaGVscGVyIGZ1bmN0aW9uIGdldF94b3IobSkgdGhhdCByZXR1cm5zIFhPUigxLi5tKQogICAgLy8gV2UnbGwgaW1wbGVtZW50IGdldF94b3IobSkgcmVjdXJzaXZlbHkKICAgIGludCB4b3JfdmFsID0gZ2V0X3hvcihoYWxmKTsKICAgIG1lbW9bbV0gPSB4b3JfdmFsOwogICAgcmV0dXJuIHhvcl92YWw7Cn0KCnVub3JkZXJlZF9tYXA8bGwsIGludD4geG9yX21lbW87CgppbnQgZ2V0X3hvcihsbCBtKSB7CiAgICBpZiAobSA9PSAwKSByZXR1cm4gMDsKICAgIGlmIChtIDw9IG4pIHsKICAgICAgICAvLyBwcmVmaXggWE9SIGZyb20gYVswXSB0byBhW20tMV0KICAgICAgICBzdGF0aWMgdmVjdG9yPGludD4gcHJlZml4X3hvcjsKICAgICAgICBpZiAocHJlZml4X3hvci5lbXB0eSgpKSB7CiAgICAgICAgICAgIHByZWZpeF94b3IucmVzaXplKG4rMSwwKTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gbjsgaSsrKQogICAgICAgICAgICAgICAgcHJlZml4X3hvcltpXSA9IHByZWZpeF94b3JbaS0xXSBeIGFbaS0xXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHByZWZpeF94b3JbbV07CiAgICB9CiAgICBpZiAoeG9yX21lbW8uY291bnQobSkpIHJldHVybiB4b3JfbWVtb1ttXTsKICAgIC8vIGFfbSA9IFhPUigxLi5mbG9vcihtLzIpKSA9IGdldF94b3IoZmxvb3IobS8yKSkKICAgIC8vIGdldF94b3IobSkgPSBnZXRfeG9yKG0tMSkgXiBhX20KICAgIC8vIFNvIGdldF94b3IobSkgPSBnZXRfeG9yKG0tMSkgXiBnZXRfeG9yKGZsb29yKG0vMikpCiAgICBpbnQgdmFsID0gZ2V0X3hvcihtLTEpIF4gZ2V0X3hvcihtLzIpOwogICAgeG9yX21lbW9bbV0gPSB2YWw7CiAgICByZXR1cm4gdmFsOwp9CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGxsIGwsIHI7CiAgICAgICAgY2luID4+IG4gPj4gbCA+PiByOwogICAgICAgIGEucmVzaXplKG4pOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGNpbiA+PiBhW2ldOwogICAgICAgIH0KICAgICAgICAvLyBsID0gciBndWFyYW50ZWVkCiAgICAgICAgLy8gV2UganVzdCBvdXRwdXQgYV9sCiAgICAgICAgLy8gU2luY2UgbD1yLCBzdW0gaXMgYV9sCgogICAgICAgIC8vIENsZWFyIG1lbW9pemF0aW9uIGZvciBlYWNoIHRlc3QgdG8gYXZvaWQgZXhjZXNzIG1lbW9yeSB1c2FnZQogICAgICAgIG1lbW8uY2xlYXIoKTsKICAgICAgICB4b3JfbWVtby5jbGVhcigpOwoKICAgICAgICBpbnQgYW5zID0gMDsKICAgICAgICAvLyBJZiBsIDw9IG4sIGFuc3dlciBpcyBhW2wtMV0KICAgICAgICAvLyBlbHNlIGNvbXB1dGUgZ2V0X2EobCkKICAgICAgICBpZiAobCA8PSBuKSBhbnMgPSBhW2wtMV07CiAgICAgICAgZWxzZSBhbnMgPSBnZXRfYShsKTsKCiAgICAgICAgY291dCA8PCBhbnMgPDwgIlxuIjsKICAgIH0KICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@2413428dab26:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@2413428dab26:/app# 