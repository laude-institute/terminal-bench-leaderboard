['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7Cgp1c2luZyBsbCA9IGxvbmcgbG9uZzsKY29uc3QgaW50IE1PRCA9IDk5ODI0NDM1MzsKCmludCBtb2Rwb3coaW50IGJhc2UsIGludCBleHAsIGludCBtb2QpIHsKICAgIGludCByZXN1bHQgPSAxOwogICAgaW50IGN1ciA9IGJhc2UgJSBtb2Q7CiAgICB3aGlsZSAoZXhwID4gMCkgewogICAgICAgIGlmIChleHAgJiAxKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IChpbnQpKCgxTEwgKiByZXN1bHQgKiBjdXIpICUgbW9kKTsKICAgICAgICB9CiAgICAgICAgY3VyID0gKGludCkoKDFMTCAqIGN1ciAqIGN1cikgJSBtb2QpOwogICAgICAgIGV4cCA+Pj0gMTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7Cn0KCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKCiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwoKICAgIHdoaWxlICh0LS0pIHsKICAgICAgICBpbnQgbiwgbTsKICAgICAgICBjaW4gPj4gbiA+PiBtOwogICAgICAgIHZlY3RvcjxwYWlyPGludCxpbnQ+PiBpbnRlcnZhbHMobik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgY2luID4+IGludGVydmFsc1tpXS5maXJzdCA+PiBpbnRlcnZhbHNbaV0uc2Vjb25kOwogICAgICAgIH0KCiAgICAgICAgLy8gRFAgYXBwcm9hY2g6IFNpbmNlIDJebSBjYW4gYmUgdXAgdG8gMl4xOCAofjI2MGspLCBhbmQgc3VtIG9mIG4gdXAgdG8gMmU1LAogICAgICAgIC8vIHdlIGNhbiBkbyBhIGRpdmlkZSBhbmQgY29ucXVlciBEUCB1c2luZyBYT1IgY29udm9sdXRpb25zLgogICAgICAgIC8vIEJ1dCBoZXJlIGNvbnN0cmFpbnRzIHN1Z2dlc3QgYSBtZWV0LWluLXRoZS1taWRkbGUgb3IgRFAgb3ZlciBiaXRzLgoKICAgICAgICAvLyBXZSB3aWxsIHVzZSBhIGRpdmlkZSBhbmQgY29ucXVlciBhcHByb2FjaCB3aXRoIFhPUiBjb252b2x1dGlvbnMuCiAgICAgICAgLy8gRm9yIGVhY2ggaW50ZXJ2YWwsIGJ1aWxkIGZyZXF1ZW5jeSB2ZWN0b3IgZl9pIHdoZXJlIGZfaVt4XSA9IDEgaWYgeCBpbiBbbF9pLHJfaV0sIGVsc2UgMAogICAgICAgIC8vIFRoZW4gbXVsdGlwbHkgYWxsIGZfaSB3aXRoIFhPUiBjb252b2x1dGlvbiB0byBnZXQgZiA9IGZfMSAqIGZfMiAqIC4uLiAqIGZfbgoKICAgICAgICAvLyBTaW5jZSBpbnRlcnZhbHMgYXJlIGxhcmdlLCB3ZSBjYW4gcmVwcmVzZW50IGVhY2ggZl9pIGFzIGEgdmVjdG9yIG9mIHNpemUgMl5tIHdpdGggMSBvciAwLgogICAgICAgIC8vIEJ1dCB0aGlzIGlzIHRvbyBsYXJnZSBmb3IgZGlyZWN0IGNvbnZvbHV0aW9uIG9mIGFsbCBpbnRlcnZhbHMuCgogICAgICAgIC8vIE9wdGltaXphdGlvbjoKICAgICAgICAvLyBUaGUgcHJvYmxlbSBjYW4gYmUgc29sdmVkIHVzaW5nIERQIG92ZXIgYml0cy4KICAgICAgICAvLyBGb3IgZWFjaCBiaXQgcG9zaXRpb24sIHdlIGNvbnNpZGVyIGhvdyBtYW55IG51bWJlcnMgaW4gZWFjaCBpbnRlcnZhbCBoYXZlIHRoYXQgYml0IHNldCBvciBub3QuCiAgICAgICAgLy8gVGhlbiBjb21iaW5lIGludGVydmFscyBiaXR3aXNlLgoKICAgICAgICAvLyBXZSBpbXBsZW1lbnQgYSByZWN1cnNpdmUgZnVuY3Rpb24gb24gYml0cyB0byBjb21wdXRlIGRwIGFycmF5cy4KCiAgICAgICAgLy8gUHJlY29tcHV0ZSBjb3VudCBvZiBudW1iZXJzIHdpdGggYml0ID0gMCBhbmQgYml0ID0gMSBpbiBlYWNoIGludGVydmFsCiAgICAgICAgdmVjdG9yPGludD4gemVyb0NvdW50KG4pLCBvbmVDb3VudChuKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBpbnQgbCA9IGludGVydmFsc1tpXS5maXJzdDsKICAgICAgICAgICAgaW50IHIgPSBpbnRlcnZhbHNbaV0uc2Vjb25kOwogICAgICAgICAgICBpbnQgbGVuZ3RoID0gciAtIGwgKyAxOwogICAgICAgICAgICAvLyBjb3VudCBudW1iZXJzIGluIFtsLHJdIHdpdGggYml0IGsgPSAwIG9yIDEKICAgICAgICAgICAgLy8gQnV0IHdlIG5lZWQgZm9yIGFsbCBiaXRzLCBzbyB3ZSB3aWxsIGRvIHRoaXMgaW5zaWRlIHJlY3Vyc2l2ZSBmdW5jdGlvbgogICAgICAgICAgICB6ZXJvQ291bnRbaV0gPSAtMTsgLy8gcGxhY2Vob2xkZXIKICAgICAgICAgICAgb25lQ291bnRbaV0gPSAtMTsKICAgICAgICB9CgogICAgICAgIC8vIFdlIGltcGxlbWVudCBhIHJlY3Vyc2l2ZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdmVjdG9yPGludD4gZHAgb2Ygc2l6ZSAyXntyZW1haW5pbmdfYml0c30KICAgICAgICAvLyBkcFt4XSA9IG51bWJlciBvZiBzZXF1ZW5jZXMgZm9yIHRoZSBjdXJyZW50IHN1YnNldCBvZiBpbnRlcnZhbHMgYW5kIGJpdHMKCiAgICAgICAgLy8gV2UnbGwgaW1wbGVtZW50IGEgZnVuY3Rpb24gc29sdmUoYml0X2luZGV4LCBpbnRlcnZhbHMgc3Vic2V0KSAtPiB2ZWN0b3I8aW50PgoKICAgICAgICAvLyBCdXQgdG8gYXZvaWQgY29tcGxleGl0eSwgd2UgaW1wbGVtZW50IGEgZnVuY3Rpb24gc29sdmUoYml0X2luZGV4LCBsLCByKSB3aGVyZSBbbCxyKSBpcyByYW5nZSBvZiBpbnRlcnZhbHMKICAgICAgICAvLyBhbmQgZm9yIGJpdF9pbmRleCwgd2UgY29tcHV0ZSBkcCB2ZWN0b3IuCgogICAgICAgIC8vIFNpbmNlIG4gY2FuIGJlIGxhcmdlLCB3ZSBkbyBkaXZpZGUgYW5kIGNvbnF1ZXIgb24gaW50ZXJ2YWxzLgoKICAgICAgICAvLyBYT1IgY29udm9sdXRpb24gZnVuY3Rpb25zCgogICAgICAgIGF1dG8geG9yX2Z3aHQgPSBbXSh2ZWN0b3I8aW50PiAmYSwgYm9vbCBpbnZlcnQpIHsKICAgICAgICAgICAgaW50IG4gPSAoaW50KWEuc2l6ZSgpOwogICAgICAgICAgICBmb3IgKGludCBsZW4gPSAxOyBsZW4gPCBuOyBsZW4gPDw9IDEpIHsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSArPSAobGVuIDw8IDEpKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBsZW47IGorKykgewogICAgICAgICAgICAgICAgICAgICAgICBpbnQgdSA9IGFbaSArIGpdOwogICAgICAgICAgICAgICAgICAgICAgICBpbnQgdiA9IGFbaSArIGogKyBsZW5dOwogICAgICAgICAgICAgICAgICAgICAgICBhW2kgKyBqXSA9ICh1ICsgdikgJSBNT0Q7CiAgICAgICAgICAgICAgICAgICAgICAgIGFbaSArIGogKyBsZW5dID0gKHUgLSB2ICsgTU9EKSAlIE1PRDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGludmVydCkgewogICAgICAgICAgICAgICAgaW50IGludl9uID0gbW9kcG93KG4sIE1PRCAtIDIsIE1PRCk7CiAgICAgICAgICAgICAgICBmb3IgKGludCAmeCA6IGEpIHggPSAoaW50KSgoMUxMICogeCAqIGludl9uKSAlIE1PRCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICAvLyBYT1IgY29udm9sdXRpb24KICAgICAgICBhdXRvIHhvcl9jb252b2x1dGlvbiA9IFsmXSh2ZWN0b3I8aW50PiBhLCB2ZWN0b3I8aW50PiBiKSAtPiB2ZWN0b3I8aW50PiB7CiAgICAgICAgICAgIGludCBuID0gKGludClhLnNpemUoKTsKICAgICAgICAgICAgeG9yX2Z3aHQoYSwgZmFsc2UpOwogICAgICAgICAgICB4b3JfZndodChiLCBmYWxzZSk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBhW2ldID0gKGludCkoKDFMTCAqIGFbaV0gKiBiW2ldKSAlIE1PRCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgeG9yX2Z3aHQoYSwgdHJ1ZSk7CiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH07CgogICAgICAgIC8vIEJ1aWxkIGZyZXF1ZW5jeSB2ZWN0b3IgZm9yIG9uZSBpbnRlcnZhbAogICAgICAgIGF1dG8gYnVpbGRfZnJlcSA9IFsmXShpbnQgbCwgaW50IHIpIC0+IHZlY3RvcjxpbnQ+IHsKICAgICAgICAgICAgaW50IHNpemUgPSAxIDw8IG07CiAgICAgICAgICAgIHZlY3RvcjxpbnQ+IGZyZXEoc2l6ZSwgMCk7CiAgICAgICAgICAgIC8vIFNldCBmcmVxW3hdID0gMSBpZiBsIDw9IHggPD0gcgogICAgICAgICAgICAvLyBmb3IgbGFyZ2UgbSwgdGhpcyBpcyBsYXJnZSwgYnV0IHdlIGNhbiBkbyBwYXJ0aWFsIHN1bXMKCiAgICAgICAgICAgIC8vIFVzZSBwcmVmaXggc3VtIGFycmF5CiAgICAgICAgICAgIC8vIGZyZXFbeF0gPSAxIGlmIHggaW4gW2wscl0KICAgICAgICAgICAgLy8gU28gZnJlcVt4XSA9IDEgZm9yIHggPSBsLi5yCgogICAgICAgICAgICAvLyBTbyBmcmVxW3hdID0gKHggPj0gbCAmJiB4IDw9IHIpID8gMSA6IDAKCiAgICAgICAgICAgIC8vIGZpbGwgZnJlcQogICAgICAgICAgICBpZiAobCA8PSByKSB7CiAgICAgICAgICAgICAgICBmcmVxW2xdID0gMTsKICAgICAgICAgICAgICAgIGlmIChyICsgMSA8IHNpemUpIGZyZXFbciArIDFdID0gKGZyZXFbciArIDFdIC0gMSArIE1PRCkgJSBNT0Q7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gcHJlZml4IHN1bQogICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IHNpemU7IGkrKykgewogICAgICAgICAgICAgICAgZnJlcVtpXSA9IChmcmVxW2ldICsgZnJlcVtpLTFdKSAlIE1PRDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZnJlcTsKICAgICAgICB9OwoKICAgICAgICAvLyBTaW5jZSBuIGNhbiBiZSBsYXJnZSwgd2UgZG8gZGl2aWRlIGFuZCBjb25xdWVyIG1lcmdlCiAgICAgICAgZnVuY3Rpb248dmVjdG9yPGludD4oaW50LGludCk+IGRjID0gWyZdKGludCBsZWZ0LCBpbnQgcmlnaHQpIC0+IHZlY3RvcjxpbnQ+IHsKICAgICAgICAgICAgaWYgKGxlZnQgPT0gcmlnaHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBidWlsZF9mcmVxKGludGVydmFsc1tsZWZ0XS5maXJzdCwgaW50ZXJ2YWxzW2xlZnRdLnNlY29uZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW50IG1pZCA9IChsZWZ0ICsgcmlnaHQpIC8gMjsKICAgICAgICAgICAgdmVjdG9yPGludD4gbGVmdFZlYyA9IGRjKGxlZnQsIG1pZCk7CiAgICAgICAgICAgIHZlY3RvcjxpbnQ+IHJpZ2h0VmVjID0gZGMobWlkICsgMSwgcmlnaHQpOwogICAgICAgICAgICByZXR1cm4geG9yX2NvbnZvbHV0aW9uKGxlZnRWZWMsIHJpZ2h0VmVjKTsKICAgICAgICB9OwoKICAgICAgICB2ZWN0b3I8aW50PiBmX3ggPSBkYygwLCBuIC0gMSk7CgogICAgICAgIC8vIENvbXB1dGUgZ194ID0gZl94ICogMl54IG1vZAogICAgICAgIC8vIFByZWNvbXB1dGUgcG93ZXJzIG9mIDIgbW9kCiAgICAgICAgaW50IHNpemUgPSAxIDw8IG07CiAgICAgICAgdmVjdG9yPGludD4gcG93MihzaXplKTsKICAgICAgICBwb3cyWzBdID0gMTsKICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IHNpemU7IGkrKykgewogICAgICAgICAgICBwb3cyW2ldID0gKHBvdzJbaS0xXSAqIDIpICUgTU9EOwogICAgICAgIH0KCiAgICAgICAgdmVjdG9yPGludD4gZ194KHNpemUpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIGdfeFtpXSA9IChpbnQpKCgxTEwgKiBmX3hbaV0gKiBwb3cyW2ldKSAlIE1PRCk7CiAgICAgICAgfQoKICAgICAgICAvLyBDb21wdXRlIGggPSBYT1Igb2YgYWxsIGdfeAogICAgICAgIGludCBoID0gMDsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNpemU7IGkrKykgewogICAgICAgICAgICBoIF49IGdfeFtpXTsKICAgICAgICB9CgogICAgICAgIGNvdXQgPDwgaCA8PCAiXG4iOwogICAgfQoKICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
