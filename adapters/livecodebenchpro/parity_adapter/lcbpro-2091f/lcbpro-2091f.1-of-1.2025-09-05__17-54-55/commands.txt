['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7Cgpjb25zdGV4cHIgaW50IE1PRCA9IDk5ODI0NDM1MzsKCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKCiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwoKICAgIHdoaWxlICh0LS0pIHsKICAgICAgICBpbnQgbiwgbSwgZDsKICAgICAgICBjaW4gPj4gbiA+PiBtID4+IGQ7CgogICAgICAgIHZlY3Rvcjx2ZWN0b3I8aW50Pj4gbGV2ZWxzKG4pOwogICAgICAgIHZlY3RvcjxzdHJpbmc+IGdyaWQobik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICAgICAgY2luID4+IGdyaWRbaV07CiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbTsgKytqKSB7CiAgICAgICAgICAgICAgICBpZiAoZ3JpZFtpXVtqXSA9PSAnWCcpIHsKICAgICAgICAgICAgICAgICAgICBsZXZlbHNbaV0ucHVzaF9iYWNrKGopOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBJZiBib3R0b20gbGV2ZWwgaGFzIG5vIGhvbGRzLCBubyByb3V0ZXMKICAgICAgICBpZiAobGV2ZWxzW24tMV0uZW1wdHkoKSkgewogICAgICAgICAgICBjb3V0IDw8IDAgPDwgJ1xuJzsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvLyBEUDogZHBbcm93XVttYXNrXSwgbWFzazogYml0bWFzayBvZiBob2xkcyB1c2VkIG9uIHRoYXQgcm93IChtYXggMiBob2xkcykKICAgICAgICAvLyBXZSdsbCBzdG9yZSBkcCBhcyBhIHZlY3RvciBvZiBpbnQgZm9yIGVhY2ggaG9sZCBvciBwYWlycyBvZiBob2xkcwogICAgICAgIC8vIEZpcnN0LCB3ZSBnZW5lcmF0ZSBhbGwgc3Vic2V0cyBvZiBob2xkcyBwZXIgbGV2ZWwgb2Ygc2l6ZSAxIG9yIDIKCiAgICAgICAgdmVjdG9yPHZlY3Rvcjx2ZWN0b3I8aW50Pj4+IGRwKG4pOwogICAgICAgIHZlY3Rvcjx2ZWN0b3I8cGFpcjxpbnQsaW50Pj4+IGhvbGRfcGFpcnMobik7IC8vIHBhaXJzIG9mIGluZGljZXMgZm9yIDItaG9sZCBzdWJzZXRzCgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICAgIGludCBzeiA9IChpbnQpbGV2ZWxzW2ldLnNpemUoKTsKICAgICAgICAgICAgaWYgKHN6ID09IDApIHsKICAgICAgICAgICAgICAgIC8vIG5vIGhvbGRzIG9uIHRoaXMgbGV2ZWwsIG5vIHJvdXRlIHBvc3NpYmxlCiAgICAgICAgICAgICAgICBkcFtpXS5jbGVhcigpOwogICAgICAgICAgICAgICAgaG9sZF9wYWlyc1tpXS5jbGVhcigpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gc3Vic2V0cyBvZiBzaXplIDEKICAgICAgICAgICAgZHBbaV0ucmVzaXplKHN6ICsgc3oqKHN6LTEpLzIsIDApOyAvLyBtYXggc3Vic2V0czogc2luZ2xlcyArIHBhaXJzCiAgICAgICAgICAgIGhvbGRfcGFpcnNbaV0uY2xlYXIoKTsKICAgICAgICAgICAgLy8gc2luZ2xlIGhvbGRzCiAgICAgICAgICAgIGZvciAoaW50IGlkeCA9IDA7IGlkeCA8IHN6OyArK2lkeCkgewogICAgICAgICAgICAgICAgLy8gc2luZ2xlIGhvbGQgc3Vic2V0cyBhcmUgZmlyc3Qgc3ogaW5kaWNlcwogICAgICAgICAgICAgICAgaG9sZF9wYWlyc1tpXS5lbXBsYWNlX2JhY2soaWR4LCAtMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gcGFpcnMKICAgICAgICAgICAgZm9yIChpbnQgYSA9IDA7IGEgPCBzejsgKythKSB7CiAgICAgICAgICAgICAgICBmb3IgKGludCBiID0gYSsxOyBiIDwgc3o7ICsrYikgewogICAgICAgICAgICAgICAgICAgIGhvbGRfcGFpcnNbaV0uZW1wbGFjZV9iYWNrKGEsYik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEluaXRpYWxpemUgZHAgZm9yIGJvdHRvbSByb3cgKG4tMSkKICAgICAgICAvLyBkcFtuLTFdW3N1YnNldF0gPSAxIGZvciBhbGwgc2luZ2xlIGFuZCBwYWlyIHN1YnNldHMKICAgICAgICBmb3IgKGludCBpZHggPSAwOyBpZHggPCAoaW50KWRwW24tMV0uc2l6ZSgpOyArK2lkeCkgewogICAgICAgICAgICBkcFtuLTFdW2lkeF0gPSAxOwogICAgICAgIH0KCiAgICAgICAgLy8gUHJlY29tcHV0ZSBkaXN0YW5jZXMgYmV0d2VlbiBob2xkcyBvbiBhZGphY2VudCBsZXZlbHMgZm9yIHRyYW5zaXRpb25zCiAgICAgICAgLy8gV2UnbGwgdHJhbnNpdGlvbiBmcm9tIHJvdyBpKzEgdG8gcm93IGkgKGJvdHRvbSB0byB0b3ApCgogICAgICAgIGZvciAoaW50IHJvdyA9IG4tMjsgcm93ID49IDA7IC0tcm93KSB7CiAgICAgICAgICAgIGlmIChsZXZlbHNbcm93XS5lbXB0eSgpIHx8IGxldmVsc1tyb3crMV0uZW1wdHkoKSkgewogICAgICAgICAgICAgICAgLy8gbm8gaG9sZHMgb24gY3VycmVudCBvciBuZXh0IGxldmVsLCBkcCA9IDAKICAgICAgICAgICAgICAgIGZpbGwoZHBbcm93XS5iZWdpbigpLCBkcFtyb3ddLmVuZCgpLCAwKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpbnQgc3pfY3VyID0gKGludClsZXZlbHNbcm93XS5zaXplKCk7CiAgICAgICAgICAgIGludCBzel9uZXh0ID0gKGludClsZXZlbHNbcm93KzFdLnNpemUoKTsKCiAgICAgICAgICAgIC8vIEZvciBmYXN0IGNoZWNraW5nIGlmIHR3byBob2xkcyBhcmUgcmVhY2hhYmxlCiAgICAgICAgICAgIC8vIERpc3RhbmNlIGJldHdlZW4gaG9sZHMgKHJvdyxqKSBhbmQgKHJvdysxLGspIGlzIHNxcnQoKHJvdyAtIChyb3crMSkpXjIgKyAoYzEgLSBjMileMikgPSBzcXJ0KDEgKyAoYzEgLSBjMileMikKICAgICAgICAgICAgLy8gV2UgY2hlY2sgaWYgdGhpcyBkaXN0YW5jZSA8PSBkCgogICAgICAgICAgICAvLyBQcmVjb21wdXRlIGFkamFjZW5jeTogZm9yIGVhY2ggaG9sZCBvbiByb3csIHdoaWNoIGhvbGRzIG9uIHJvdysxIHJlYWNoYWJsZQogICAgICAgICAgICB2ZWN0b3I8dmVjdG9yPGludD4+IGFkaihzel9jdXIpOwogICAgICAgICAgICBmb3IgKGludCBpX2N1ciA9IDA7IGlfY3VyIDwgc3pfY3VyOyArK2lfY3VyKSB7CiAgICAgICAgICAgICAgICBpbnQgYzEgPSBsZXZlbHNbcm93XVtpX2N1cl07CiAgICAgICAgICAgICAgICBmb3IgKGludCBpX25leHQgPSAwOyBpX25leHQgPCBzel9uZXh0OyArK2lfbmV4dCkgewogICAgICAgICAgICAgICAgICAgIGludCBjMiA9IGxldmVsc1tyb3crMV1baV9uZXh0XTsKICAgICAgICAgICAgICAgICAgICBpbnQgZHggPSAxOwogICAgICAgICAgICAgICAgICAgIGludCBkeSA9IGMxIC0gYzI7CiAgICAgICAgICAgICAgICAgICAgbG9uZyBsb25nIGRpc3Rfc3EgPSAxTEwgKiBkeCAqIGR4ICsgMUxMICogZHkgKiBkeTsKICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdF9zcSA8PSAobG9uZyBsb25nKWQgKiBkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkaltpX2N1cl0ucHVzaF9iYWNrKGlfbmV4dCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBGb3IgZWFjaCBzdWJzZXQgb24gY3VycmVudCByb3csIGZpbmQgY29tcGF0aWJsZSBzdWJzZXRzIG9uIG5leHQgcm93CiAgICAgICAgICAgIC8vIENvbmRpdGlvbnM6CiAgICAgICAgICAgIC8vIC0gRm9yIGVhY2ggaG9sZCBpbiBjdXJyZW50IHN1YnNldCwgYXQgbGVhc3Qgb25lIHJlYWNoYWJsZSBob2xkIGluIG5leHQgc3Vic2V0ICh0byBjb250aW51ZSB0aGUgcm91dGUpCiAgICAgICAgICAgIC8vIC0gTmV4dCBzdWJzZXQgdXNlcyAxIG9yIDIgaG9sZHMKICAgICAgICAgICAgLy8gLSBOZXh0IHN1YnNldCBpcyBmcm9tIGRwW3JvdysxXQoKICAgICAgICAgICAgLy8gV2Ugd2lsbCBkbyBkcFtyb3ddW2N1cl9zdWJzZXRdID0gc3VtIG9mIGRwW3JvdysxXVtuZXh0X3N1YnNldF0gb3ZlciBhbGwgY29tcGF0aWJsZSBuZXh0X3N1YnNldAoKICAgICAgICAgICAgLy8gVG8gc3BlZWQgdXAsIHByZWNvbXB1dGUgZm9yIGVhY2ggaG9sZCBvbiBuZXh0IHJvdyB0aGUgaW5kaWNlcyBpbiBkcFtyb3crMV0KICAgICAgICAgICAgLy8gQWN0dWFsbHkgZHBbcm93KzFdIGlzIGluZGV4ZWQgYnkgc3Vic2V0cyBvdmVyIG5leHQgcm93IGhvbGRzIChzaW5nbGVzIGFuZCBwYWlycykKCiAgICAgICAgICAgIC8vIEZvciBlYWNoIG5leHRfc3Vic2V0LCB3ZSBrbm93IHdoaWNoIGhvbGRzIGluY2x1ZGVkCgogICAgICAgICAgICAvLyBMZXQncyBwcmVwYXJlIGZvciBuZXh0IHJvdyBzdWJzZXRzIHRoZSBzZXRzIG9mIGhvbGRzIGluY2x1ZGVkCiAgICAgICAgICAgIGludCBzel9uZXh0X3N1YnNldHMgPSAoaW50KWhvbGRfcGFpcnNbcm93KzFdLnNpemUoKTsKICAgICAgICAgICAgdmVjdG9yPHZlY3RvcjxpbnQ+PiBuZXh0X3N1YnNldF9ob2xkcyhzel9uZXh0X3N1YnNldHMpOwogICAgICAgICAgICBmb3IgKGludCBzID0gMDsgcyA8IHN6X25leHRfc3Vic2V0czsgKytzKSB7CiAgICAgICAgICAgICAgICBhdXRvIFthLCBiXSA9IGhvbGRfcGFpcnNbcm93KzFdW3NdOwogICAgICAgICAgICAgICAgbmV4dF9zdWJzZXRfaG9sZHNbc10ucHVzaF9iYWNrKGEpOwogICAgICAgICAgICAgICAgaWYgKGIgIT0gLTEpIG5leHRfc3Vic2V0X2hvbGRzW3NdLnB1c2hfYmFjayhiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRm9yIGVhY2ggaG9sZCBvbiBuZXh0IHJvdywgc3RvcmUgc3Vic2V0cyB0aGF0IGluY2x1ZGUgaXQKICAgICAgICAgICAgdmVjdG9yPHZlY3RvcjxpbnQ+PiBzdWJzZXRzX3dpdGhfaG9sZChzel9uZXh0KTsKICAgICAgICAgICAgZm9yIChpbnQgcyA9IDA7IHMgPCBzel9uZXh0X3N1YnNldHM7ICsrcykgewogICAgICAgICAgICAgICAgZm9yIChpbnQgaCA6IG5leHRfc3Vic2V0X2hvbGRzW3NdKSB7CiAgICAgICAgICAgICAgICAgICAgc3Vic2V0c193aXRoX2hvbGRbaF0ucHVzaF9iYWNrKHMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBGb3IgZWFjaCBjdXJyZW50IHN1YnNldCBvbiBjdXJyZW50IHJvdwogICAgICAgICAgICAvLyBDaGVjayBpZiBhbGwgaG9sZHMgaW4gY3VycmVudCBzdWJzZXQgaGF2ZSBhdCBsZWFzdCBvbmUgcmVhY2hhYmxlIGhvbGQgaW4gbmV4dCBzdWJzZXQKICAgICAgICAgICAgLy8gRm9yIGVhY2ggbmV4dCBzdWJzZXQsIGNoZWNrIGlmIGZvciBhbGwgaG9sZHMgaW4gY3VycmVudCBzdWJzZXQsIAogICAgICAgICAgICAvLyB0aGVyZSBpcyBhIHJlYWNoYWJsZSBuZXh0IGhvbGQgZnJvbSBhZGphY2VuY3kKCiAgICAgICAgICAgIGludCBzel9jdXJfc3Vic2V0cyA9IChpbnQpaG9sZF9wYWlyc1tyb3ddLnNpemUoKTsKICAgICAgICAgICAgdmVjdG9yPGludD4gbmV3X2RwKHN6X2N1cl9zdWJzZXRzLCAwKTsKCiAgICAgICAgICAgIGZvciAoaW50IGN1cl9zID0gMDsgY3VyX3MgPCBzel9jdXJfc3Vic2V0czsgKytjdXJfcykgewogICAgICAgICAgICAgICAgYXV0byBbYSwgYl0gPSBob2xkX3BhaXJzW3Jvd11bY3VyX3NdOwogICAgICAgICAgICAgICAgdmVjdG9yPGludD4gY3VyX2hvbGRzID0ge2F9OwogICAgICAgICAgICAgICAgaWYgKGIgIT0gLTEpIGN1cl9ob2xkcy5wdXNoX2JhY2soYik7CgogICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggaG9sZCBpbiBjdXJyZW50IHN1YnNldCwgZ2V0IHJlYWNoYWJsZSBob2xkcyBvbiBuZXh0IHJvdwogICAgICAgICAgICAgICAgdmVjdG9yPHZlY3RvcjxpbnQ+PiByZWFjaGFibGVfbmV4dF9ob2xkczsKICAgICAgICAgICAgICAgIGJvb2wgcG9zc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgZm9yIChpbnQgY2ggOiBjdXJfaG9sZHMpIHsKICAgICAgICAgICAgICAgICAgICByZWFjaGFibGVfbmV4dF9ob2xkcy5wdXNoX2JhY2soYWRqW2NoXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYWNoYWJsZV9uZXh0X2hvbGRzLmJhY2soKS5lbXB0eSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghcG9zc2libGUpIGNvbnRpbnVlOwoKICAgICAgICAgICAgICAgIC8vIFRvIGZpbmQgYWxsIG5leHQgc3Vic2V0cyB0aGF0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIHJlYWNoYWJsZSBob2xkIGZvciBlYWNoIGhvbGQgaW4gY3VycmVudCBzdWJzZXQKICAgICAgICAgICAgICAgIC8vIFdlIGRvIGludGVyc2VjdGlvbiBvZiBzdWJzZXRzX3dpdGhfaG9sZCBmb3IgcmVhY2hhYmxlIGhvbGRzCgogICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggaG9sZCBpbiBjdXJyZW50IHN1YnNldCwgY29sbGVjdCBzdWJzZXRzX3dpdGhfaG9sZCBvZiByZWFjaGFibGUgaG9sZHMKICAgICAgICAgICAgICAgIHZlY3RvcjxzZXQ8aW50Pj4gY2FuZGlkYXRlX3NldHM7CiAgICAgICAgICAgICAgICBmb3IgKGludCBpX3IgPSAwOyBpX3IgPCAoaW50KWN1cl9ob2xkcy5zaXplKCk7ICsraV9yKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0PGludD4gY2FuZGlkYXRlOwogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IG5oIDogcmVhY2hhYmxlX25leHRfaG9sZHNbaV9yXSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBzaWR4IDogc3Vic2V0c193aXRoX2hvbGRbbmhdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUuaW5zZXJ0KHNpZHgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZV9zZXRzLnB1c2hfYmFjayhtb3ZlKGNhbmRpZGF0ZSkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEludGVyc2VjdCBjYW5kaWRhdGVfc2V0cwogICAgICAgICAgICAgICAgc2V0PGludD4gaW50ZXJzZWN0aW9uID0gY2FuZGlkYXRlX3NldHNbMF07CiAgICAgICAgICAgICAgICBmb3IgKHNpemVfdCBpID0gMTsgaSA8IGNhbmRpZGF0ZV9zZXRzLnNpemUoKTsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0PGludD4gdGVtcDsKICAgICAgICAgICAgICAgICAgICBzZXRfaW50ZXJzZWN0aW9uKGludGVyc2VjdGlvbi5iZWdpbigpLCBpbnRlcnNlY3Rpb24uZW5kKCksIGNhbmRpZGF0ZV9zZXRzW2ldLmJlZ2luKCksIGNhbmRpZGF0ZV9zZXRzW2ldLmVuZCgpLCBpbnNlcnRlcih0ZW1wLCB0ZW1wLmJlZ2luKCkpKTsKICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24gPSBtb3ZlKHRlbXApOwogICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb24uZW1wdHkoKSkgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gU3VtIGRwW3JvdysxXVtzXSBmb3IgcyBpbiBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgICAgIGludDY0X3Qgc3VtX3ZhbCA9IDA7CiAgICAgICAgICAgICAgICBmb3IgKGludCBucyA6IGludGVyc2VjdGlvbikgewogICAgICAgICAgICAgICAgICAgIHN1bV92YWwgKz0gZHBbcm93KzFdW25zXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHN1bV92YWwgJT0gTU9EOwoKICAgICAgICAgICAgICAgIG5ld19kcFtjdXJfc10gPSAoaW50KXN1bV92YWw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRwW3Jvd10gPSBtb3ZlKG5ld19kcCk7CiAgICAgICAgfQoKICAgICAgICAvLyBOb3cgc3VtIGRwWzBdW3NdIGZvciBhbGwgc3Vic2V0cyBzIG9uIHRvcCByb3cKICAgICAgICAvLyBDb25kaXRpb246IGVhY2ggbGV2ZWwgaGFzIGF0IGxlYXN0IG9uZSBob2xkIChndWFyYW50ZWVkIGJ5IHN1YnNldHMgZGVmaW5pdGlvbikKICAgICAgICAvLyBXZSBtdXN0IHN0YXJ0IGZyb20gYm90dG9tIHJvdyAoZG9uZSkgYW5kIHJlYWNoIHRvcCByb3cKICAgICAgICBpbnQ2NF90IGFucyA9IDA7CiAgICAgICAgZm9yIChhdXRvIHZhbCA6IGRwWzBdKSB7CiAgICAgICAgICAgIGFucyArPSB2YWw7CiAgICAgICAgfQogICAgICAgIGFucyAlPSBNT0Q7CgogICAgICAgIGNvdXQgPDwgYW5zIDw8ICdcbic7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
