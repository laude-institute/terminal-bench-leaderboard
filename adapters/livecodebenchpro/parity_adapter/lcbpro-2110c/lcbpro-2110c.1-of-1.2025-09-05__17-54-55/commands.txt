['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dmVjdG9yPgp1c2luZyBuYW1lc3BhY2Ugc3RkOwoKaW50IG1haW4oKSB7CiAgICBpb3M6OnN5bmNfd2l0aF9zdGRpbyhmYWxzZSk7CiAgICBjaW4udGllKG51bGxwdHIpOwoKICAgIGludCB0OyBjaW4gPj4gdDsKICAgIHdoaWxlICh0LS0pIHsKICAgICAgICBpbnQgbjsgY2luID4+IG47CiAgICAgICAgdmVjdG9yPGludD4gZChuKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgY2luID4+IGRbaV07CgogICAgICAgIHZlY3RvcjxpbnQ+IGwobiksIHIobik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIGNpbiA+PiBsW2ldID4+IHJbaV07CgogICAgICAgIC8vIFdlJ2xsIHJlY29uc3RydWN0IGhbaV0sIHRoZSBoZWlnaHQgYWZ0ZXIgaS10aCBvYnN0YWNsZSAoaDA9MCkKICAgICAgICAvLyBhbmQgZFtpXSwgdGhlIGNoYW5nZSBmcm9tIGhbaS0xXSB0byBoW2ldLgogICAgICAgIC8vIGRbaV0gaW4gezAsMX0sIGlmIGtub3duLCBtdXN0IGJlIHJlc3BlY3RlZC4KCiAgICAgICAgdmVjdG9yPGludD4gaChuKzEsIC0xKTsgLy8gaFswXSA9IDAKICAgICAgICBoWzBdID0gMDsKCiAgICAgICAgYm9vbCBwb3NzaWJsZSA9IHRydWU7CgogICAgICAgIC8vIFdlJ2xsIGZpbmQgdGhlIG1pbiBhbmQgbWF4IHBvc3NpYmxlIGhlaWdodCBhdCBlYWNoIHN0ZXAKICAgICAgICAvLyBjb25zaWRlcmluZyBjb25zdHJhaW50cyBhbmQga25vd24gZC4KICAgICAgICAvLyBVc2UgaW50ZXJ2YWxzIFtsb3dbaV0sIGhpZ2hbaV1dIGZvciBoW2ldCgogICAgICAgIHZlY3RvcjxpbnQ+IGxvdyhuKzEsIDApLCBoaWdoKG4rMSwgbik7IC8vIGhlaWdodHMgaW4gWzAsIG5dCiAgICAgICAgbG93WzBdID0gaGlnaFswXSA9IDA7CgogICAgICAgIC8vIEZvcndhcmQgcGFzcyB0byB1cGRhdGUgaW50ZXJ2YWxzIG9uIGhbaV0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBpZiAoZFtpXSA9PSAwKSB7CiAgICAgICAgICAgICAgICAvLyBoW2krMV0gPSBoW2ldCiAgICAgICAgICAgICAgICBsb3dbaSsxXSA9IG1heChsb3dbaSsxXSwgbG93W2ldKTsKICAgICAgICAgICAgICAgIGhpZ2hbaSsxXSA9IG1pbihoaWdoW2krMV0sIGhpZ2hbaV0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRbaV0gPT0gMSkgewogICAgICAgICAgICAgICAgLy8gaFtpKzFdID0gaFtpXSArIDEKICAgICAgICAgICAgICAgIGxvd1tpKzFdID0gbWF4KGxvd1tpKzFdLCBsb3dbaV0gKyAxKTsKICAgICAgICAgICAgICAgIGhpZ2hbaSsxXSA9IG1pbihoaWdoW2krMV0sIGhpZ2hbaV0gKyAxKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIGRbaV0gdW5rbm93biwgc28gaFtpKzFdIGluIFtoW2ldLCBoW2ldKzFdCiAgICAgICAgICAgICAgICBsb3dbaSsxXSA9IG1heChsb3dbaSsxXSwgbG93W2ldKTsKICAgICAgICAgICAgICAgIGhpZ2hbaSsxXSA9IG1pbihoaWdoW2krMV0sIGhpZ2hbaV0gKyAxKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gSW50ZXJzZWN0IHdpdGggb2JzdGFjbGUgY29uc3RyYWludHMKICAgICAgICAgICAgbG93W2krMV0gPSBtYXgobG93W2krMV0sIGxbaV0pOwogICAgICAgICAgICBoaWdoW2krMV0gPSBtaW4oaGlnaFtpKzFdLCByW2ldKTsKCiAgICAgICAgICAgIGlmIChsb3dbaSsxXSA+IGhpZ2hbaSsxXSkgewogICAgICAgICAgICAgICAgcG9zc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoIXBvc3NpYmxlKSB7CiAgICAgICAgICAgIGNvdXQgPDwgLTEgPDwgJ1xuJzsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvLyBCYWNrd2FyZCBwYXNzIHRvIGFzc2lnbiBoW2ldIGFuZCBkW2ldCiAgICAgICAgdmVjdG9yPGludD4gcmVzX2Qobik7CiAgICAgICAgaFtuXSA9IGxvd1tuXTsgLy8gcGljayBtaW5pbWFsIGZlYXNpYmxlIGhlaWdodCBhdCBlbmQKCiAgICAgICAgZm9yIChpbnQgaSA9IG4gLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAvLyBoW2ldIG11c3QgYmUgaW4gW2xvd1tpXSwgaGlnaFtpXV0KICAgICAgICAgICAgLy8gYW5kIGRbaV0gPSBoW2krMV0gLSBoW2ldIG11c3QgYmUgMCBvciAxIGFuZCBjb25zaXN0ZW50IHdpdGgga25vd24gZFtpXQogICAgICAgICAgICBpbnQgdGFyZ2V0ID0gaFtpKzFdOwogICAgICAgICAgICBpbnQgY2FuZDAgPSB0YXJnZXQ7ICAgLy8gaWYgZFtpXSA9IDAsIGhbaV0gPSBoW2krMV0KICAgICAgICAgICAgaW50IGNhbmQxID0gdGFyZ2V0IC0gMTsgLy8gaWYgZFtpXSA9IDEsIGhbaV0gPSBoW2krMV0gLTEKCiAgICAgICAgICAgIGJvb2wgdXNlZDAgPSBmYWxzZSwgdXNlZDEgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKGNhbmQwID49IGxvd1tpXSAmJiBjYW5kMCA8PSBoaWdoW2ldICYmIChkW2ldID09IC0xIHx8IGRbaV0gPT0gMCkpIHVzZWQwID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKGNhbmQxID49IGxvd1tpXSAmJiBjYW5kMSA8PSBoaWdoW2ldICYmIChkW2ldID09IC0xIHx8IGRbaV0gPT0gMSkpIHVzZWQxID0gdHJ1ZTsKCiAgICAgICAgICAgIGlmICh1c2VkMCkgewogICAgICAgICAgICAgICAgaFtpXSA9IGNhbmQwOwogICAgICAgICAgICAgICAgcmVzX2RbaV0gPSAwOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZWQxKSB7CiAgICAgICAgICAgICAgICBoW2ldID0gY2FuZDE7CiAgICAgICAgICAgICAgICByZXNfZFtpXSA9IDE7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBwb3NzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghcG9zc2libGUpIHsKICAgICAgICAgICAgY291dCA8PCAtMSA8PCAnXG4nOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGNvdXQgPDwgcmVzX2RbaV0gPDwgKGkgPT0gbiAtIDEgPyAnXG4nIDogJyAnKTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
