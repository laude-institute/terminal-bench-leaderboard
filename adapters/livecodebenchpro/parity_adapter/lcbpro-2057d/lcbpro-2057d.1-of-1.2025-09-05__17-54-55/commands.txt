['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBTZWdtZW50IHRyZWUgZm9yIHJhbmdlIG1heGltdW0gcXVlcnkKc3RydWN0IFNlZ21lbnRUcmVlTWF4IHsKICAgIGludCBuOwogICAgdmVjdG9yPGxvbmcgbG9uZz4gdHJlZTsKCiAgICB2b2lkIGluaXQoaW50IF9uKSB7CiAgICAgICAgbiA9IF9uOwogICAgICAgIHRyZWUuYXNzaWduKDQqbiwgTExPTkdfTUlOKTsKICAgIH0KCiAgICB2b2lkIGJ1aWxkKGNvbnN0IHZlY3Rvcjxsb25nIGxvbmc+ICZhLCBpbnQgdiwgaW50IHRsLCBpbnQgdHIpIHsKICAgICAgICBpZiAodGwgPT0gdHIpIHsKICAgICAgICAgICAgdHJlZVt2XSA9IGFbdGxdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGludCB0bSA9ICh0bCArIHRyKS8yOwogICAgICAgICAgICBidWlsZChhLCB2KjIsIHRsLCB0bSk7CiAgICAgICAgICAgIGJ1aWxkKGEsIHYqMisxLCB0bSsxLCB0cik7CiAgICAgICAgICAgIHRyZWVbdl0gPSBtYXgodHJlZVt2KjJdLCB0cmVlW3YqMisxXSk7CiAgICAgICAgfQogICAgfQoKICAgIHZvaWQgYnVpbGQoY29uc3QgdmVjdG9yPGxvbmcgbG9uZz4gJmEpIHsKICAgICAgICBidWlsZChhLCAxLCAwLCBuLTEpOwogICAgfQoKICAgIHZvaWQgdXBkYXRlKGludCB2LCBpbnQgdGwsIGludCB0ciwgaW50IHBvcywgbG9uZyBsb25nIHZhbCkgewogICAgICAgIGlmICh0bCA9PSB0cikgewogICAgICAgICAgICB0cmVlW3ZdID0gdmFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGludCB0bSA9ICh0bCArIHRyKS8yOwogICAgICAgICAgICBpZiAocG9zIDw9IHRtKSB1cGRhdGUodioyLCB0bCwgdG0sIHBvcywgdmFsKTsKICAgICAgICAgICAgZWxzZSB1cGRhdGUodioyKzEsIHRtKzEsIHRyLCBwb3MsIHZhbCk7CiAgICAgICAgICAgIHRyZWVbdl0gPSBtYXgodHJlZVt2KjJdLCB0cmVlW3YqMisxXSk7CiAgICAgICAgfQogICAgfQoKICAgIHZvaWQgdXBkYXRlKGludCBwb3MsIGxvbmcgbG9uZyB2YWwpIHsKICAgICAgICB1cGRhdGUoMSwgMCwgbi0xLCBwb3MsIHZhbCk7CiAgICB9CgogICAgbG9uZyBsb25nIHF1ZXJ5KGludCB2LCBpbnQgdGwsIGludCB0ciwgaW50IGwsIGludCByKSB7CiAgICAgICAgaWYgKGwgPiByKSByZXR1cm4gTExPTkdfTUlOOwogICAgICAgIGlmIChsID09IHRsICYmIHIgPT0gdHIpIHJldHVybiB0cmVlW3ZdOwogICAgICAgIGludCB0bSA9ICh0bCArIHRyKS8yOwogICAgICAgIHJldHVybiBtYXgocXVlcnkodioyLCB0bCwgdG0sIGwsIG1pbihyLCB0bSkpLAogICAgICAgICAgICAgICAgICAgcXVlcnkodioyKzEsIHRtKzEsIHRyLCBtYXgobCwgdG0rMSksIHIpKTsKICAgIH0KCiAgICBsb25nIGxvbmcgcXVlcnkoaW50IGwsIGludCByKSB7CiAgICAgICAgcmV0dXJuIHF1ZXJ5KDEsIDAsIG4tMSwgbCwgcik7CiAgICB9Cn07CgovLyBTZWdtZW50IHRyZWUgZm9yIHJhbmdlIG1pbmltdW0gcXVlcnkKc3RydWN0IFNlZ21lbnRUcmVlTWluIHsKICAgIGludCBuOwogICAgdmVjdG9yPGxvbmcgbG9uZz4gdHJlZTsKCiAgICB2b2lkIGluaXQoaW50IF9uKSB7CiAgICAgICAgbiA9IF9uOwogICAgICAgIHRyZWUuYXNzaWduKDQqbiwgTExPTkdfTUFYKTsKICAgIH0KCiAgICB2b2lkIGJ1aWxkKGNvbnN0IHZlY3Rvcjxsb25nIGxvbmc+ICZhLCBpbnQgdiwgaW50IHRsLCBpbnQgdHIpIHsKICAgICAgICBpZiAodGwgPT0gdHIpIHsKICAgICAgICAgICAgdHJlZVt2XSA9IGFbdGxdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGludCB0bSA9ICh0bCArIHRyKS8yOwogICAgICAgICAgICBidWlsZChhLCB2KjIsIHRsLCB0bSk7CiAgICAgICAgICAgIGJ1aWxkKGEsIHYqMisxLCB0bSsxLCB0cik7CiAgICAgICAgICAgIHRyZWVbdl0gPSBtaW4odHJlZVt2KjJdLCB0cmVlW3YqMisxXSk7CiAgICAgICAgfQogICAgfQoKICAgIHZvaWQgYnVpbGQoY29uc3QgdmVjdG9yPGxvbmcgbG9uZz4gJmEpIHsKICAgICAgICBidWlsZChhLCAxLCAwLCBuLTEpOwogICAgfQoKICAgIHZvaWQgdXBkYXRlKGludCB2LCBpbnQgdGwsIGludCB0ciwgaW50IHBvcywgbG9uZyBsb25nIHZhbCkgewogICAgICAgIGlmICh0bCA9PSB0cikgewogICAgICAgICAgICB0cmVlW3ZdID0gdmFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGludCB0bSA9ICh0bCArIHRyKS8yOwogICAgICAgICAgICBpZiAocG9zIDw9IHRtKSB1cGRhdGUodioyLCB0bCwgdG0sIHBvcywgdmFsKTsKICAgICAgICAgICAgZWxzZSB1cGRhdGUodioyKzEsIHRtKzEsIHRyLCBwb3MsIHZhbCk7CiAgICAgICAgICAgIHRyZWVbdl0gPSBtaW4odHJlZVt2KjJdLCB0cmVlW3YqMisxXSk7CiAgICAgICAgfQogICAgfQoKICAgIHZvaWQgdXBkYXRlKGludCBwb3MsIGxvbmcgbG9uZyB2YWwpIHsKICAgICAgICB1cGRhdGUoMSwgMCwgbi0xLCBwb3MsIHZhbCk7CiAgICB9CgogICAgbG9uZyBsb25nIHF1ZXJ5KGludCB2LCBpbnQgdGwsIGludCB0ciwgaW50IGwsIGludCByKSB7CiAgICAgICAgaWYgKGwgPiByKSByZXR1cm4gTExPTkdfTUFYOwogICAgICAgIGlmIChsID09IHRsICYmIHIgPT0gdHIpIHJldHVybiB0cmVlW3ZdOwogICAgICAgIGludCB0bSA9ICh0bCArIHRyKS8yOwogICAgICAgIHJldHVybiBtaW4ocXVlcnkodioyLCB0bCwgdG0sIGwsIG1pbihyLCB0bSkpLAogICAgICAgICAgICAgICAgICAgcXVlcnkodioyKzEsIHRtKzEsIHRyLCBtYXgobCwgdG0rMSksIHIpKTsKICAgIH0KCiAgICBsb25nIGxvbmcgcXVlcnkoaW50IGwsIGludCByKSB7CiAgICAgICAgcmV0dXJuIHF1ZXJ5KDEsIDAsIG4tMSwgbCwgcik7CiAgICB9Cn07CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CgogICAgaW50IHQ7IGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuLCBxOyBjaW4gPj4gbiA+PiBxOwogICAgICAgIHZlY3Rvcjxsb25nIGxvbmc+IGEobik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIGNpbiA+PiBhW2ldOwoKICAgICAgICAvLyBXZSB1c2UgYSBzZWdtZW50IHRyZWUgb3ZlciBjb252ZW5pZW5jZSBvZiBwYWlycyAoaSwgaSsxKQogICAgICAgIC8vIGNvbnZlbmllbmNlKGksIGkrMSkgPSBhYnMoYVtpKzFdLWFbaV0pIC0gMQogICAgICAgIC8vIFRoZSBtYXhpbXVtIGNvbnZlbmllbmNlIG92ZXIgYWxsIHN1YnNlZ21lbnRzIGlzIG1heCBvZiBjb252ZW5pZW5jZShpLGkrMSkKICAgICAgICAvLyBCZWNhdXNlIGFueSBsb25nZXIgc2VnbWVudCdzIGNvbnZlbmllbmNlIDw9IG1heCBvZiB0aGVzZSBhZGphY2VudCBwYWlycyAocHJvb2Ygb21pdHRlZCBoZXJlKQogICAgICAgIAogICAgICAgIHZlY3Rvcjxsb25nIGxvbmc+IGNvbnYobi0xKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4tMTsgaSsrKSB7CiAgICAgICAgICAgIGNvbnZbaV0gPSBhYnMoYVtpKzFdLWFbaV0pIC0gMTsKICAgICAgICB9CgogICAgICAgIFNlZ21lbnRUcmVlTWF4IHNlZ21heDsKICAgICAgICBzZWdtYXguaW5pdChuLTEpOwogICAgICAgIHNlZ21heC5idWlsZChjb252KTsKCiAgICAgICAgYXV0byBwcmludF9tYXhfY29udmVuaWVuY2UgPSBbJl0oKSB7CiAgICAgICAgICAgIGxvbmcgbG9uZyBhbnMgPSAwOwogICAgICAgICAgICBpZiAobiA+IDEpIGFucyA9IG1heCgwTEwsIHNlZ21heC5xdWVyeSgwLCBuLTIpKTsKICAgICAgICAgICAgY291dCA8PCBhbnMgPDwgIlxuIjsKICAgICAgICB9OwoKICAgICAgICBwcmludF9tYXhfY29udmVuaWVuY2UoKTsKCiAgICAgICAgd2hpbGUgKHEtLSkgewogICAgICAgICAgICBpbnQgcDsgbG9uZyBsb25nIHg7IGNpbiA+PiBwID4+IHg7IHAtLTsKICAgICAgICAgICAgYVtwXSA9IHg7CiAgICAgICAgICAgIGlmIChwID4gMCkgewogICAgICAgICAgICAgICAgY29udltwLTFdID0gYWJzKGFbcF0tYVtwLTFdKSAtIDE7CiAgICAgICAgICAgICAgICBzZWdtYXgudXBkYXRlKHAtMSwgY29udltwLTFdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocCA8IG4tMSkgewogICAgICAgICAgICAgICAgY29udltwXSA9IGFicyhhW3ArMV0tYVtwXSkgLSAxOwogICAgICAgICAgICAgICAgc2VnbWF4LnVwZGF0ZShwLCBjb252W3BdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBwcmludF9tYXhfY29udmVuaWVuY2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp", 'Enter']
['g++ -std=c++17 -O2 -Wall -Wextra -o /app/main /app/main.cpp', 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
