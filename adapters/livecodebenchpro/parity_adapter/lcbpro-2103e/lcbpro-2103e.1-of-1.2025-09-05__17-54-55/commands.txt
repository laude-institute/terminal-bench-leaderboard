['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7Cgp0eXBlZGVmIGxvbmcgbG9uZyBsbDsKCnN0cnVjdCBPcGVyYXRpb24gewogICAgaW50IGksIGo7CiAgICBsbCB4Owp9OwoKaW50IG1haW4oKSB7CiAgICBpb3M6OnN5bmNfd2l0aF9zdGRpbyhmYWxzZSk7CiAgICBjaW4udGllKG51bGxwdHIpOwogICAgaW50IHQ7IGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuOyBsbCBrOwogICAgICAgIGNpbiA+PiBuID4+IGs7CiAgICAgICAgdmVjdG9yPGxsPiBhKG4rMSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gbjsgaSsrKSBjaW4gPj4gYVtpXTsKCiAgICAgICAgLy8gQnVpbGQgbWFwIGZyb20gdmFsdWUgdG8gaW5kaWNlcwogICAgICAgIHVub3JkZXJlZF9tYXA8bGwsIHZlY3RvcjxpbnQ+PiBwb3M7CiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gbjsgKytpKSB7CiAgICAgICAgICAgIHBvc1thW2ldXS5wdXNoX2JhY2soaSk7CiAgICAgICAgfQoKICAgICAgICAvLyBDaGVjayBpZiBmb3IgZWFjaCB2YWx1ZSB4IHdpdGggeCAhPSBrLXgsIHBhaXJzIGV4aXN0CiAgICAgICAgLy8gV2UgY2FuIG9ubHkgb3BlcmF0ZSBvbiBwYWlycyAoaSxqKSB3aXRoIGFfaSArIGFfaiA9IGsKICAgICAgICAvLyBTbyB2YWx1ZXMgdGhhdCBkb24ndCBhcHBlYXIgd2l0aCBjb21wbGVtZW50IGNhbid0IGJlIGZpeGVkCgogICAgICAgIC8vIENoZWNrIGZlYXNpYmlsaXR5OiBmb3IgZWFjaCB2YWx1ZSB2LCBpZiB2ICE9IGstdiwKICAgICAgICAvLyBib3RoIHYgYW5kIGstdiBtdXN0IGFwcGVhciBhdCBsZWFzdCBvbmNlCiAgICAgICAgYm9vbCBwb3NzaWJsZSA9IHRydWU7CiAgICAgICAgaWYgKHBvcy5jb3VudChrIC8gMikgJiYgKGsgJSAyID09IDApKSB7CiAgICAgICAgICAgIC8vIGsgZXZlbiwgaGFuZGxlIG1pZGRsZSBzZXBhcmF0ZWx5CiAgICAgICAgfQogICAgICAgIGZvciAoYXV0byYgW3ZhbCwgaW5kaWNlc10gOiBwb3MpIHsKICAgICAgICAgICAgbGwgYyA9IGsgLSB2YWw7CiAgICAgICAgICAgIGlmIChjID09IHZhbCkgY29udGludWU7CiAgICAgICAgICAgIGlmICghcG9zLmNvdW50KGMpKSB7CiAgICAgICAgICAgICAgICBwb3NzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghcG9zc2libGUpIHsKICAgICAgICAgICAgY291dCA8PCAtMSA8PCAiXG4iOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIEdvYWw6IG1ha2UgYSBub24tZGVjcmVhc2luZyBhcnJheQogICAgICAgIC8vIFdlIGNhbiBtb3ZlIHZhbHVlcyBiZXR3ZWVuIHBvc2l0aW9ucyBpIGFuZCBqIHdpdGggYV9pICsgYV9qID0gawoKICAgICAgICAvLyBTdHJhdGVneToKICAgICAgICAvLyAxLiBGb3IgZWFjaCBwYWlyIG9mIHZhbHVlcyAodiwgay12KSwgbW92ZSBhbGwgdmFsdWVzIGZyb20gay12IHRvIHYgb3IgdmljZSB2ZXJzYQogICAgICAgIC8vIDIuIFRoZW4gdGhlIGFycmF5IG9ubHkgY29udGFpbnMgdmFsdWVzIHYgb3Igay12CiAgICAgICAgLy8gMy4gU2luY2UgYV9pIGluIFswLGtdLCB2YWx1ZXMgYXJlIGZyb20gdGhlc2UgcGFpcnMKICAgICAgICAvLyA0LiBOZXh0LCBzb3J0IHRoZSBhcnJheSBieSBtYWtpbmcgbW92ZXMgYmV0d2VlbiBwYWlycwoKICAgICAgICAvLyBMZXQncyBmaXggcGFpcnM6IGZvciBldmVyeSBwYWlyICh2LCBrLXYpLCB3ZSB3aWxsIGNob29zZSBvbmUgb2YgdGhlbSBhcyByZXByZXNlbnRhdGl2ZQogICAgICAgIC8vIFdlJ2xsIHRyeSB0byBtb3ZlIGFsbCBlbGVtZW50cyBpbiB0aGVzZSBwYWlycyB0byB0aGUgc21hbGxlciBvZiB2IGFuZCBrLXYKCiAgICAgICAgLy8gV2Ugd2lsbCBzdG9yZSBmb3IgZWFjaCBwYWlyIHRoZSBpbmRpY2VzIG9mIGVsZW1lbnRzIHdpdGggdmFsdWUgdiBhbmQgay12CiAgICAgICAgLy8gV2Ugd2lsbCBwZXJmb3JtIG9wZXJhdGlvbnMgdG8gbW92ZSB2YWx1ZXMgZnJvbSBvbmUgc2lkZSB0byB0aGUgb3RoZXIKCiAgICAgICAgLy8gVG8gZG8gdGhhdCwgd2UgcHJvY2VzcyBwYWlycwoKICAgICAgICB2ZWN0b3I8T3BlcmF0aW9uPiBvcHM7CiAgICAgICAgdW5vcmRlcmVkX21hcDxsbCwgYm9vbD4gdmlzaXRlZDsKCiAgICAgICAgLy8gVG8gYXZvaWQgZHVwbGljYXRlcywgcHJvY2VzcyBvbmx5IHZhbCA8IGsgLSB2YWwKICAgICAgICBmb3IgKGF1dG8mIFt2YWwsIGluZGljZXNfdl0gOiBwb3MpIHsKICAgICAgICAgICAgbGwgYyA9IGsgLSB2YWw7CiAgICAgICAgICAgIGlmICh2aXNpdGVkW3ZhbF0pIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAodmFsID09IGMpIHsKICAgICAgICAgICAgICAgIHZpc2l0ZWRbdmFsXSA9IHRydWU7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodmFsID4gYykgY29udGludWU7IC8vIHByb2Nlc3MgZWFjaCBwYWlyIG9uY2UKCiAgICAgICAgICAgIHZpc2l0ZWRbdmFsXSA9IHZpc2l0ZWRbY10gPSB0cnVlOwogICAgICAgICAgICB2ZWN0b3I8aW50PiYgaW5kaWNlc19jID0gcG9zW2NdOwoKICAgICAgICAgICAgLy8gV2Ugd2FudCB0byBtb3ZlIGFsbCBjLXZhbHVlcyB0byB2YWwgb3IgYWxsIHZhbC12YWx1ZXMgdG8gYwogICAgICAgICAgICAvLyBMZXQncyB0cnkgdG8gbW92ZSBhbGwgYy12YWx1ZXMgdG8gdmFsIHRvIG1ha2UgYXJyYXkgbW9yZSBzb3J0ZWQKICAgICAgICAgICAgLy8gQnV0IHdlIGRvbid0IGtub3cgeWV0IHdoaWNoIGlzIGJldHRlcgogICAgICAgICAgICAvLyBMZXQncyB0cnkgdG8gbW92ZSBhbGwgYy12YWx1ZXMgdG8gdmFsCgogICAgICAgICAgICAvLyBXZSdsbCBwZXJmb3JtIG9wZXJhdGlvbnMgYmV0d2VlbiBwYWlycyBvZiBpbmRpY2VzICh2YWxfaWR4LCBjX2lkeCkKICAgICAgICAgICAgLy8gRm9yIGVhY2ggY19pZHgsIG1vdmUgYWxsIGZyb20gYyB0byB2YWwKICAgICAgICAgICAgLy8gVGhlIHZhbHVlIHggdG8gbW92ZSBpcyBjIChzaW5jZSBhX2NfaWR4ID0gYywgYV92YWxfaWR4ID0gdmFsKQoKICAgICAgICAgICAgLy8gQnV0IHdlIGNhbiBvbmx5IGNob29zZSB4IGluIFstYV9qLCBhX2ldIGZvciBpLGosIGkhPWosIGFuZCBhX2krYV9qPWsKICAgICAgICAgICAgLy8gSGVyZSBhX2kgPSB2YWwsIGFfaiA9IGMsIHNvIHggaW4gWy1jLCB2YWxdCiAgICAgICAgICAgIC8vIFRvIG1vdmUgYWxsIGMgLT4gdmFsLCB4ID0gYywgYXMgYyA8PSB2YWwgKyBjID0gawoKICAgICAgICAgICAgLy8gQnV0IHZhbCArIGMgPSBrLCB2YWwgPD0gaywgYyA8PSBrCiAgICAgICAgICAgIC8vIFdlIGNhbiBvbmx5IHNoaWZ0IGFtb3VudHMgdXAgdG8gYV9pIG9yIC1hX2ouCgogICAgICAgICAgICAvLyBNb3ZlIGFsbCBjIHRvIHZhbDoKICAgICAgICAgICAgLy8gRm9yIGVhY2ggY19pZHggYW5kIHZhbF9pZHgsIG1vdmUgeCA9IGMKCiAgICAgICAgICAgIC8vIFdlIHBpY2sgdGhlIGZpcnN0IHZhbCBpbmRleCBhcyBiYXNlCiAgICAgICAgICAgIGlmIChpbmRpY2VzX3YuZW1wdHkoKSkgewogICAgICAgICAgICAgICAgLy8gTm8gdmFsIGVsZW1lbnRzIHRvIG1vdmUgdG8sIHNvIG5vdCBwb3NzaWJsZQogICAgICAgICAgICAgICAgcG9zc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpbnQgYmFzZV92YWxfaWR4ID0gaW5kaWNlc192WzBdOwoKICAgICAgICAgICAgZm9yIChpbnQgY2kgOiBpbmRpY2VzX2MpIHsKICAgICAgICAgICAgICAgIC8vIG1vdmUgeCA9IGMgZnJvbSBjaSB0byBiYXNlX3ZhbF9pZHgKICAgICAgICAgICAgICAgIC8vIGFfaSA9IHZhbCBhdCBiYXNlX3ZhbF9pZHgsIGFfaiA9IGMgYXQgY2kKICAgICAgICAgICAgICAgIC8vIHggaW4gWy1hX2osIGFfaV0gPT4geCBpbiBbLWMsIHZhbF0KICAgICAgICAgICAgICAgIC8vIGMgPD0gdmFsPwoKICAgICAgICAgICAgICAgIC8vIHZhbCArIGMgPSBrCiAgICAgICAgICAgICAgICAvLyB2YWwgYW5kIGMgYXJlIGRpc3RpbmN0CgogICAgICAgICAgICAgICAgLy8gV2Ugd2FudCB0byBtb3ZlIHggPSBjIGZyb20gY2kgdG8gYmFzZV92YWxfaWR4CgogICAgICAgICAgICAgICAgLy8gYV9pIDo9IGFfaSAtIHggPSB2YWwgLSBjID49IDA/CiAgICAgICAgICAgICAgICAvLyB2YWwgLSBjID0gdmFsIC0gYyAoY2FuIGJlIHplcm8gb3IgcG9zaXRpdmUgaWYgdmFsID49IGMpCgogICAgICAgICAgICAgICAgLy8gU2luY2UgdmFsIDwgYyBvciB2YWwgPiBjPwogICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB2YWwgPCBjIG9yIHZhbCA+IGMgYmVjYXVzZSB2YWwgPCBrIC0gdmFsCgogICAgICAgICAgICAgICAgLy8gQnV0IHZhbCA8IGMgaW1wbGllcyB2YWwgPCBrIC0gdmFsID0+IHZhbCA8IGsvMgogICAgICAgICAgICAgICAgLy8gU28gdmFsIDwgYyBtZWFucyB2YWwgPCBrLzIgPCBjCgogICAgICAgICAgICAgICAgLy8gU28gdmFsIDwgYwoKICAgICAgICAgICAgICAgIC8vIFRoZW4gdmFsIC0gYyA8IDAsIHdoaWNoIGlzIGludmFsaWQKCiAgICAgICAgICAgICAgICAvLyBTbyBtb3ZpbmcgYyB0byB2YWwgYnkgeCA9IGMgaXMgaW52YWxpZAogICAgICAgICAgICAgICAgLy8gQWx0ZXJuYXRpdmU6IG1vdmUgdmFsIHRvIGMKCiAgICAgICAgICAgICAgICAvLyBTbyBtb3ZlIHZhbCB0byBjIGluc3RlYWQKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBTbyBtb3ZpbmcgYWxsIGMgdG8gdmFsIGlzIGludmFsaWQgaWYgdmFsIDwgYwoKICAgICAgICAgICAgLy8gVHJ5IG1vdmluZyBhbGwgdmFsIHRvIGMKICAgICAgICAgICAgaW50IGJhc2VfY19pZHggPSBpbmRpY2VzX2NbMF07CiAgICAgICAgICAgIGZvciAoaW50IHZpIDogaW5kaWNlc192KSB7CiAgICAgICAgICAgICAgICAvLyBtb3ZlIHggPSB2YWwgZnJvbSB2aSB0byBiYXNlX2NfaWR4CiAgICAgICAgICAgICAgICAvLyBhX2kgPSB2YWwsIGFfaiA9IGMKICAgICAgICAgICAgICAgIC8vIHggaW4gWy1jLCB2YWxdCiAgICAgICAgICAgICAgICAvLyB4ID0gdmFsIGlzIHZhbGlkCiAgICAgICAgICAgICAgICAvLyBhX2kgOj0gdmFsIC0gdmFsID0gMCA+PTAKICAgICAgICAgICAgICAgIC8vIGFfaiA6PSBjICsgdmFsID0gYyArIHZhbCA9IGsgPD0gawoKICAgICAgICAgICAgICAgIG9wcy5wdXNoX2JhY2soe3ZpLCBiYXNlX2NfaWR4LCB2YWx9KTsKICAgICAgICAgICAgICAgIGFbdmldIC09IHZhbDsKICAgICAgICAgICAgICAgIGFbYmFzZV9jX2lkeF0gKz0gdmFsOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoIXBvc3NpYmxlKSB7CiAgICAgICAgICAgIGNvdXQgPDwgLTEgPDwgIlxuIjsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvLyBOb3cgYWxsIHZhbHVlcyBjaGFuZ2VkIHRvIGJlIGZyb20gb25lIGhhbGYgb2YgdGhlIHBhaXIKICAgICAgICAvLyBTbyBhcnJheSBhIGNvbnRhaW5zIHZhbHVlcyBvbmx5IGZyb20gc2V0IG9mIHZhbHVlcyB3aGVyZSBlYWNoIHBhaXIgaXMgcmVzb2x2ZWQKCiAgICAgICAgLy8gTmV4dCBzdGVwOiBjaGVjayBpZiBhcnJheSBpcyBub24tZGVjcmVhc2luZwogICAgICAgIC8vIElmIHllcywgb3V0cHV0IG9wcwogICAgICAgIC8vIElmIG5vLCB0cnkgdG8gc29ydCBieSBtb3ZpbmcgYmV0d2VlbiBwYWlycwoKICAgICAgICAvLyBTaW5jZSBhZnRlciBmaXJzdCBzdGVwLCBhcnJheSB2YWx1ZXMgYXJlIG9ubHkgZnJvbSBvbmUgc2lkZSBvZiBlYWNoIHBhaXIKICAgICAgICAvLyBBbmQgb3BlcmF0aW9uIG9ubHkgYWxsb3dlZCBiZXR3ZWVuIGluZGljZXMgaSxqIHdpdGggYV9pICsgYV9qID0gawogICAgICAgIC8vIFNvIG9ubHkgcGFpcnMgb2YgY29tcGxlbWVudGFyeSB2YWx1ZXMgY2FuIGJlIHVzZWQKCiAgICAgICAgLy8gQ2hlY2sgaWYgYXJyYXkgaXMgbm9uLWRlY3JlYXNpbmcKICAgICAgICBib29sIHNvcnRlZCA9IHRydWU7CiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgaWYgKGFbaV0gPiBhW2krMV0pIHsKICAgICAgICAgICAgICAgIHNvcnRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChzb3J0ZWQpIHsKICAgICAgICAgICAgY291dCA8PCAoaW50KW9wcy5zaXplKCkgPDwgIlxuIjsKICAgICAgICAgICAgZm9yIChhdXRvICZvcCA6IG9wcykgewogICAgICAgICAgICAgICAgY291dCA8PCBvcC5pIDw8ICIgIiA8PCBvcC5qIDw8ICIgIiA8PCBvcC54IDw8ICJcbiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvLyBJZiBub3Qgc29ydGVkLCB0cnkgdG8gZml4IGJ5IG1vdmluZyB2YWx1ZXMgYWxvbmcgYXJyYXkKCiAgICAgICAgLy8gRm9yIHBvc2l0aW9ucyBpLCBqIHdpdGggYV9pICsgYV9qID0gaywgd2UgY2FuIHRyYW5zZmVyIHgKICAgICAgICAvLyBTaW5jZSBhcnJheSBub3cgY29udGFpbnMgb25seSBlbGVtZW50cyBmcm9tIG9uZSBzaWRlIG9mIHBhaXJzLAogICAgICAgIC8vIHRoZSBvdGhlciBzaWRlIGlzIGVtcHR5IHNvIG5vIG9wZXJhdGlvbnMgcG9zc2libGU/CgogICAgICAgIC8vIElmIG5vIG9wZXJhdGlvbnMgcG9zc2libGUsIG91dHB1dCAtMQoKICAgICAgICAvLyBCdXQgcHJvYmxlbSBzdGF0ZXMgaWYgcG9zc2libGUsIHNvbHV0aW9uIHdpdGggPD0zbiBvcGVyYXRpb25zIGV4aXN0cwoKICAgICAgICAvLyBJbXBsZW1lbnQgYSBoZXVyaXN0aWM6CiAgICAgICAgLy8gRm9yIGVhY2ggYWRqYWNlbnQgcGFpciB3aGVyZSBhX2kgPiBhX3tpKzF9LCB0cnkgdG8gZGVjcmVhc2UgYV9pIGFuZCBpbmNyZWFzZSBhX3tpKzF9CgogICAgICAgIC8vIEJ1dCBvbmx5IGlmIGFfaSArIGFfe2krMX0gPSBrCgogICAgICAgIC8vIExldCdzIHRyeSB0byBmaXggYWRqYWNlbnQgcGFpcnMKCiAgICAgICAgdmVjdG9yPE9wZXJhdGlvbj4gZXh0cmFfb3BzOwogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGlmIChhW2ldID4gYVtpKzFdKSB7CiAgICAgICAgICAgICAgICBpZiAoYVtpXSArIGFbaSsxXSAhPSBrKSB7CiAgICAgICAgICAgICAgICAgICAgcG9zc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxsIGRpZmYgPSBhW2ldIC0gYVtpKzFdOwogICAgICAgICAgICAgICAgLy8gTW92ZSBkaWZmIGZyb20gaSB0byBpKzEKICAgICAgICAgICAgICAgIGV4dHJhX29wcy5wdXNoX2JhY2soe2ksIGkrMSwgZGlmZn0pOwogICAgICAgICAgICAgICAgYVtpXSAtPSBkaWZmOwogICAgICAgICAgICAgICAgYVtpKzFdICs9IGRpZmY7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghcG9zc2libGUpIHsKICAgICAgICAgICAgY291dCA8PCAtMSA8PCAiXG4iOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIE91dHB1dCBhbGwgb3BlcmF0aW9ucwogICAgICAgIGNvdXQgPDwgKGludCkob3BzLnNpemUoKSArIGV4dHJhX29wcy5zaXplKCkpIDw8ICJcbiI7CiAgICAgICAgZm9yIChhdXRvICZvcCA6IG9wcykgewogICAgICAgICAgICBjb3V0IDw8IG9wLmkgPDwgIiAiIDw8IG9wLmogPDwgIiAiIDw8IG9wLnggPDwgIlxuIjsKICAgICAgICB9CiAgICAgICAgZm9yIChhdXRvICZvcCA6IGV4dHJhX29wcykgewogICAgICAgICAgICBjb3V0IDw8IG9wLmkgPDwgIiAiIDw8IG9wLmogPDwgIiAiIDw8IG9wLnggPDwgIlxuIjsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
