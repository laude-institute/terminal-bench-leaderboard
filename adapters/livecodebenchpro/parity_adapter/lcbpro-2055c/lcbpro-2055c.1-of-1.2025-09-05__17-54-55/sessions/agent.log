[?2004hroot@ba5cf7cc9ed0:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@ba5cf7cc9ed0:/app# clear
[?2004l[H[J[3J[?2004hroot@ba5cf7cc9ed0:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CgogICAgaW50IHQ7IGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuLCBtOyBjaW4gPj4gbiA+PiBtOwogICAgICAgIHN0cmluZyBzOyBjaW4gPj4gczsKCiAgICAgICAgdmVjdG9yPHZlY3Rvcjxsb25nIGxvbmc+PiBhKG4sIHZlY3Rvcjxsb25nIGxvbmc+KG0pKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG07IGorKykgewogICAgICAgICAgICAgICAgY2luID4+IGFbaV1bal07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIERldGVybWluZSB0aGUgcGF0aCBjZWxscwogICAgICAgIHZlY3RvcjxwYWlyPGludCxpbnQ+PiBwYXRoOwogICAgICAgIGludCB4ID0gMCwgeSA9IDA7CiAgICAgICAgcGF0aC5lbXBsYWNlX2JhY2soeCwgeSk7CiAgICAgICAgZm9yIChjaGFyIGMgOiBzKSB7CiAgICAgICAgICAgIGlmIChjID09ICdEJykgeCsrOwogICAgICAgICAgICBlbHNlIHkrKzsKICAgICAgICAgICAgcGF0aC5lbXBsYWNlX2JhY2soeCwgeSk7CiAgICAgICAgfQoKICAgICAgICAvLyBDb21wdXRlIHN1bSBvZiBlYWNoIHJvdyBhbmQgY29sdW1uIGV4Y2x1ZGluZyBwYXRoIGNlbGxzCiAgICAgICAgLy8gTWFyayBwYXRoIGNlbGxzIGZvciBxdWljayBjaGVjawogICAgICAgIHZlY3Rvcjx2ZWN0b3I8Ym9vbD4+IG9uX3BhdGgobiwgdmVjdG9yPGJvb2w+KG0sIGZhbHNlKSk7CiAgICAgICAgZm9yIChhdXRvICZwIDogcGF0aCkgb25fcGF0aFtwLmZpcnN0XVtwLnNlY29uZF0gPSB0cnVlOwoKICAgICAgICB2ZWN0b3I8bG9uZyBsb25nPiByb3dfc3VtKG4sIDApOwogICAgICAgIHZlY3Rvcjxsb25nIGxvbmc+IGNvbF9zdW0obSwgMCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBtOyBqKyspIHsKICAgICAgICAgICAgICAgIGlmICghb25fcGF0aFtpXVtqXSkgewogICAgICAgICAgICAgICAgICAgIHJvd19zdW1baV0gKz0gYVtpXVtqXTsKICAgICAgICAgICAgICAgICAgICBjb2xfc3VtW2pdICs9IGFbaV1bal07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8qCiAgICAgICAgIFdlIHdhbnQgdG8gZmluZCB4IGFuZCBwYXRoIGNlbGwgdmFsdWVzIGJbaV1bal0gc28gdGhhdDoKICAgICAgICAgRm9yIGVhY2ggcm93IGk6IHN1bV97an0gYltpXVtqXSA9IHgKICAgICAgICAgRm9yIGVhY2ggY29sIGo6IHN1bV97aX0gYltpXVtqXSA9IHgKCiAgICAgICAgIFNpbmNlIGZvciBub24tcGF0aCBjZWxscyBiW2ldW2pdID0gYVtpXVtqXSwKICAgICAgICAgYW5kIGZvciBwYXRoIGNlbGxzIGJbaV1bal0gYXJlIHZhcmlhYmxlcywKCiAgICAgICAgIExldCBQX2kgPSBzZXQgb2YgcGF0aCBjZWxscyBpbiByb3cgaQogICAgICAgICBMZXQgUV9qID0gc2V0IG9mIHBhdGggY2VsbHMgaW4gY29sdW1uIGoKCiAgICAgICAgIFRoZW4gcm93IGkgc3VtOiByb3dfc3VtW2ldICsgc3VtX3tqIGluIFBfaX0gYltpXVtqXSA9IHgKICAgICAgICAgY29sIGogc3VtOiBjb2xfc3VtW2pdICsgc3VtX3tpIGluIFFfan0gYltpXVtqXSA9IHgKCiAgICAgICAgIFRoZSBwYXRoIGhhcyBuK20tMSBjZWxscy4KCiAgICAgICAgIFdlIGtub3cgdGhhdCB0aGUgcGF0aCBzdGFydHMgYXQgKDAsMCkgYW5kIGVuZHMgYXQgKG4tMSxtLTEpLAogICAgICAgICBtb3Zpbmcgb25seSBkb3duIG9yIHJpZ2h0LgoKICAgICAgICAgV2UgY2FuIHNvbHZlIGJ5IGFzc2lnbmluZyB2YWx1ZXMgdG8gcGF0aCBjZWxscyBpbiBvcmRlci4KCiAgICAgICAgIEFwcHJvYWNoOgogICAgICAgICAtIExldCB4IGJlIHRoZSBtYXhpbXVtIG9mIG1heCByb3dfc3VtIGFuZCBtYXggY29sX3N1bSAob3IganVzdCB1c2UgYW55IGxhcmdlIGVub3VnaCB2YWx1ZSkKICAgICAgICAgLSBXZSdsbCBhc3NpZ24gYltpXVtqXSBmb3IgcGF0aCBjZWxscyBzdWNoIHRoYXQgYWxsIHJvdyBzdW1zIGFuZCBjb2x1bW4gc3VtcyBlcXVhbCB4CgogICAgICAgICBTaW5jZSB0aGUgcGF0aCBpcyBhIGNoYWluIGZyb20gKDAsMCkgdG8gKG4tMSxtLTEpLCB3ZSBjYW4gc29sdmUgYWxvbmcgdGhlIHBhdGg6CgogICAgICAgICBGb3IgZWFjaCBwYXRoIGNlbGwgZXhjZXB0IHRoZSBsYXN0LCBhc3NpZ24gMC4KICAgICAgICAgVGhlbiBjb21wdXRlIHggPSBtYXggb2YgYWxsIHJvd19zdW0gYW5kIGNvbF9zdW0uCiAgICAgICAgIFRoZW4gYXNzaWduIHRoZSBsYXN0IHBhdGggY2VsbCB2YWx1ZSB0byBtYWtlIHRoZSBzdW1zIGVxdWFsLgoKICAgICAgICAgQnV0IHRoaXMgbWlnaHQgbm90IHNhdGlzZnkgYWxsIGNvbmRpdGlvbnMuCgogICAgICAgICBIb3dldmVyLCBmcm9tIHByb2JsZW0gZWRpdG9yaWFsLCBpdCBjYW4gYmUgcHJvdmVuIHRoYXQgYSBzb2x1dGlvbiBhbHdheXMgZXhpc3RzLgoKICAgICAgICAgV2UnbGwgaW1wbGVtZW50IGEgbWV0aG9kIGluc3BpcmVkIGJ5IHRoZSBlZGl0b3JpYWw6CgogICAgICAgICBUaGUgcGF0aCBkZWZpbmVzIGEgc2V0IG9mIGNlbGxzLiBMZXQncyBkZW5vdGUgdGhlIHBhdGggY2VsbHMgYXMgcF8wLCBwXzEsIC4uLiwgcF97TC0xfQogICAgICAgICB3aXRoIEwgPSBuK20tMS4KCiAgICAgICAgIFdlJ2xsIGNyZWF0ZSBhcnJheXM6CiAgICAgICAgIC0gYiBmb3IgcGF0aCBjZWxscywgaW5pdGlhbGl6ZSBhbGwgemVybwoKICAgICAgICAgVGhlbjoKICAgICAgICAgRm9yIGVhY2ggcm93IGk6CiAgICAgICAgICAgICBzdW1fe25vbi1wYXRoIGNlbGxzIGluIHJvdyBpfSArIHN1bV97cGF0aCBjZWxscyBpbiByb3cgaX0gPSB4CiAgICAgICAgIEZvciBlYWNoIGNvbCBqOgogICAgICAgICAgICAgc3VtX3tub24tcGF0aCBjZWxscyBpbiBjb2wgan0gKyBzdW1fe3BhdGggY2VsbHMgaW4gY29sIGp9ID0geAoKICAgICAgICAgU3VtbWluZyBvdmVyIHJvd3M6CiAgICAgICAgIHN1bV97aX0ocm93X3N1bVtpXSkgKyBzdW1fe3BhdGggY2VsbHN9IGJbaV1bal0gPSBuKngKICAgICAgICAgU3VtbWluZyBvdmVyIGNvbHM6CiAgICAgICAgIHN1bV97an0oY29sX3N1bVtqXSkgKyBzdW1fe3BhdGggY2VsbHN9IGJbaV1bal0gPSBtKngKCiAgICAgICAgIFNvOgogICAgICAgICBuKnggLSBzdW0gcm93X3N1bSA9IG0qeCAtIHN1bSBjb2xfc3VtCiAgICAgICAgID0+IChuIC0gbSkqeCA9IHN1bSByb3dfc3VtIC0gc3VtIGNvbF9zdW0KCiAgICAgICAgIFNpbmNlIHN1bSByb3dfc3VtIGFuZCBzdW0gY29sX3N1bSBhcmUgc3VtcyBvZiBzYW1lIGVsZW1lbnRzIChhbGwgbm9uLXBhdGggY2VsbHMpLCB0aGVpciBzdW1zIGFyZSBlcXVhbC4KICAgICAgICAgU28gc3VtIHJvd19zdW0gPT0gc3VtIGNvbF9zdW0uCiAgICAgICAgIFRoZXJlZm9yZSAobiAtIG0pKnggPSAwCgogICAgICAgICBJZiBuICE9IG0sIHRoZW4geCA9IDAuCiAgICAgICAgIElmIG4gPT0gbSwgeCBjYW4gYmUgYW55IGludGVnZXIuCgogICAgICAgICBXZSBjYW4gcGljayB4ID0gbWF4KG1heCByb3dfc3VtLCBtYXggY29sX3N1bSkgb3IgMC4KCiAgICAgICAgIFRoZW4gYXNzaWduIHZhbHVlcyB0byBwYXRoIGNlbGxzOgoKICAgICAgICAgRm9yIGVhY2ggcGF0aCBjZWxsIGV4Y2VwdCB0aGUgbGFzdCwgYXNzaWduIDAuCiAgICAgICAgIEZvciB0aGUgbGFzdCBwYXRoIGNlbGwgKG4tMSxtLTEpLCBhc3NpZ24gdmFsdWU6CiAgICAgICAgIHggLSByb3dfc3VtW24tMV0gKHdoaWNoIHNob3VsZCBhbHNvIGVxdWFsIHggLSBjb2xfc3VtW20tMV0pCgogICAgICAgICBUaGlzIGd1YXJhbnRlZXMgYWxsIHJvd3MgYW5kIGNvbHVtbnMgc3VtIHRvIHguCgogICAgICAgICAKICAgICAgICAgSW1wbGVtZW50aW5nIHRoaXMgc29sdXRpb24uCiAgICAgICAgKi8KCiAgICAgICAgbG9uZyBsb25nIG1heF9yb3cgPSAqbWF4X2VsZW1lbnQocm93X3N1bS5iZWdpbigpLCByb3dfc3VtLmVuZCgpKTsKICAgICAgICBsb25nIGxvbmcgbWF4X2NvbCA9ICptYXhfZWxlbWVudChjb2xfc3VtLmJlZ2luKCksIGNvbF9zdW0uZW5kKCkpOwoKICAgICAgICBsb25nIGxvbmcgeCA9IG1heChtYXhfcm93LCBtYXhfY29sKTsKCiAgICAgICAgLy8gQXNzaWduIHplcm8gdG8gYWxsIHBhdGggY2VsbHMgZXhjZXB0IHRoZSBsYXN0CiAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgKyAxIDwgKGludClwYXRoLnNpemUoKTsgaysrKSB7CiAgICAgICAgICAgIGludCBpID0gcGF0aFtrXS5maXJzdCwgaiA9IHBhdGhba10uc2Vjb25kOwogICAgICAgICAgICBhW2ldW2pdID0gMDsKICAgICAgICB9CgogICAgICAgIC8vIEFzc2lnbiB0aGUgbGFzdCBjZWxsCiAgICAgICAgaW50IGkgPSBwYXRoLmJhY2soKS5maXJzdCwgaiA9IHBhdGguYmFjaygpLnNlY29uZDsKICAgICAgICBhW2ldW2pdID0geCAtIHJvd19zdW1baV07CgogICAgICAgIC8vIE91dHB1dCB0aGUgcmVzdWx0CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBtOyBqKyspIHsKICAgICAgICAgICAgICAgIGNvdXQgPDwgYVtpXVtqXSA8PCAoaiA9PSBtIC0gMSA/ICdcbicgOiAnICcpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@ba5cf7cc9ed0:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@ba5cf7cc9ed0:/app# 