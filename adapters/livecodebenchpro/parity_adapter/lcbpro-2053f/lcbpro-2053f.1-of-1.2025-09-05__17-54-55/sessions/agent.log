[?2004hroot@f214ec4a223d:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@f214ec4a223d:/app# clear
[?2004l[H[J[3J[?2004hroot@f214ec4a223d:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CgogICAgaW50IHQ7CiAgICBjaW4gPj4gdDsKICAgIHdoaWxlICh0LS0pIHsKICAgICAgICBpbnQgbiwgbSwgazsKICAgICAgICBjaW4gPj4gbiA+PiBtID4+IGs7CiAgICAgICAgdmVjdG9yPHZlY3RvcjxpbnQ+PiBtYXRyaXgobiwgdmVjdG9yPGludD4obSkpOwoKICAgICAgICAvLyBSZWFkIG1hdHJpeAogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbTsgaisrKSB7CiAgICAgICAgICAgICAgICBjaW4gPj4gbWF0cml4W2ldW2pdOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBDb3VudCBvY2N1cnJlbmNlcyBvZiBmaXhlZCBlbGVtZW50cyBwZXIgcm93CiAgICAgICAgdmVjdG9yPHVub3JkZXJlZF9tYXA8aW50LCBpbnQ+PiBmaXhlZENvdW50KG4pOwogICAgICAgIHZlY3RvcjxpbnQ+IGZpeGVkVG90YWwobiwgMCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBtOyBqKyspIHsKICAgICAgICAgICAgICAgIGludCB2ID0gbWF0cml4W2ldW2pdOwogICAgICAgICAgICAgICAgaWYgKHYgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBmaXhlZENvdW50W2ldW3ZdKys7CiAgICAgICAgICAgICAgICAgICAgZml4ZWRUb3RhbFtpXSsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBGb3IgZWFjaCByb3csIHRoZSBudW1iZXIgb2YgYmxhbmtzCiAgICAgICAgdmVjdG9yPGludD4gYmxhbmtzKG4pOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGJsYW5rc1tpXSA9IG0gLSBmaXhlZFRvdGFsW2ldOwogICAgICAgIH0KCiAgICAgICAgLy8gQ29tcHV0ZSBiYXNlIGJlYXV0eSBmcm9tIGZpeGVkIGVsZW1lbnRzCiAgICAgICAgbG9uZyBsb25nIGJhc2VfYmVhdXR5ID0gMDsKICAgICAgICBmb3IgKGludCB1ID0gMTsgdSA8PSBrOyB1KyspIHsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgKyAxIDwgbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBpbnQgYzEgPSBmaXhlZENvdW50W2ldLmNvdW50KHUpID8gZml4ZWRDb3VudFtpXVt1XSA6IDA7CiAgICAgICAgICAgICAgICBpbnQgYzIgPSBmaXhlZENvdW50W2krMV0uY291bnQodSkgPyBmaXhlZENvdW50W2krMV1bdV0gOiAwOwogICAgICAgICAgICAgICAgYmFzZV9iZWF1dHkgKz0gMUxMICogYzEgKiBjMjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gVGhlIGlkZWEgaXMgdG8gYXNzaWduIGFsbCBibGFua3MgaW4gZWFjaCByb3cgdG8gYSBzaW5nbGUgZWxlbWVudCB0byBtYXhpbWl6ZSB0aGUgc3VtCiAgICAgICAgLy8gVHJ5IHRvIHBpY2sgdGhlIGVsZW1lbnQgdGhhdCBtYXhpbWl6ZXMgc3VtIG92ZXIgaSBvZiBjX3t1LGl9ICogY197dSxpKzF9CiAgICAgICAgLy8gQmVjYXVzZSBvZiBwcm9ibGVtIHNpemUsIHdlIHRyeSBhbGwgZWxlbWVudHMgYXBwZWFyaW5nIGluIGZpeGVkQ291bnQgdG8gY2hvb3NlIHRoZSBiZXN0CiAgICAgICAgLy8gcGx1cyBjb25zaWRlciBhc3NpZ25pbmcgYWxsIGJsYW5rcyB0byBhbiBlbGVtZW50IG5vdCBhcHBlYXJpbmcgaW4gZml4ZWRDb3VudAoKICAgICAgICAvLyBDb2xsZWN0IGFsbCBjYW5kaWRhdGUgZWxlbWVudHMgZnJvbSBmaXhlZENvdW50CiAgICAgICAgdW5vcmRlcmVkX3NldDxpbnQ+IGNhbmRpZGF0ZXM7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgZm9yIChhdXRvICZwIDogZml4ZWRDb3VudFtpXSkgewogICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5pbnNlcnQocC5maXJzdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEFkZCAxIGFzIGNhbmRpZGF0ZSBhcyB3ZWxsLCBzaW5jZSBhc3NpZ25pbmcgYmxhbmtzIHRvIDEgbWlnaHQgYmUgYmV0dGVyCiAgICAgICAgY2FuZGlkYXRlcy5pbnNlcnQoMSk7CgogICAgICAgIGxvbmcgbG9uZyBtYXhfYWRkaXRpb25hbCA9IDA7CgogICAgICAgIGZvciAoaW50IHUgOiBjYW5kaWRhdGVzKSB7CiAgICAgICAgICAgIC8vIENvbXB1dGUgbW9kaWZpZWQgY291bnRzIHBlciByb3c6IGNfe3UsaX0gPSBmaXhlZENvdW50W2ldW3VdICsgYmxhbmtzW2ldCiAgICAgICAgICAgIC8vIFRoZSBibGFua3MgYXJlIGFzc2lnbmVkIGZ1bGx5IHRvIHUgaW4gZWFjaCByb3cKICAgICAgICAgICAgdmVjdG9yPGxvbmcgbG9uZz4gY291bnRzKG4pOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICAgICAgaW50IGZpeGVkID0gZml4ZWRDb3VudFtpXS5jb3VudCh1KSA/IGZpeGVkQ291bnRbaV1bdV0gOiAwOwogICAgICAgICAgICAgICAgY291bnRzW2ldID0gKGxvbmcgbG9uZylmaXhlZCArIGJsYW5rc1tpXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbG9uZyBsb25nIGN1ciA9IDA7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpICsgMSA8IG47IGkrKykgewogICAgICAgICAgICAgICAgY3VyICs9IGNvdW50c1tpXSAqIGNvdW50c1tpKzFdOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBUaGUgYmFzZV9iZWF1dHkgaW5jbHVkZXMgZml4ZWRDb3VudCBvbmx5LCBzbyBhZGRpdGlvbmFsIGlzIGN1ciAtIGZpeGVkIHBhaXJzIGZvciB1CiAgICAgICAgICAgIGxvbmcgbG9uZyBmaXhlZF9wYWlycyA9IDA7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpICsgMSA8IG47IGkrKykgewogICAgICAgICAgICAgICAgaW50IGMxID0gZml4ZWRDb3VudFtpXS5jb3VudCh1KSA/IGZpeGVkQ291bnRbaV1bdV0gOiAwOwogICAgICAgICAgICAgICAgaW50IGMyID0gZml4ZWRDb3VudFtpKzFdLmNvdW50KHUpID8gZml4ZWRDb3VudFtpKzFdW3VdIDogMDsKICAgICAgICAgICAgICAgIGZpeGVkX3BhaXJzICs9IDFMTCAqIGMxICogYzI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxvbmcgbG9uZyBhZGRpdGlvbmFsID0gY3VyIC0gZml4ZWRfcGFpcnM7CiAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsID4gbWF4X2FkZGl0aW9uYWwpIHsKICAgICAgICAgICAgICAgIG1heF9hZGRpdGlvbmFsID0gYWRkaXRpb25hbDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY291dCA8PCBiYXNlX2JlYXV0eSArIG1heF9hZGRpdGlvbmFsIDw8ICJcbiI7CiAgICB9CiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@f214ec4a223d:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@f214ec4a223d:/app# 