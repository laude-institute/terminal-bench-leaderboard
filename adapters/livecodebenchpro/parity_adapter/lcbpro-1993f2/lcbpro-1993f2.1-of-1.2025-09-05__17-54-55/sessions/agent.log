[?2004hroot@376a3748018e:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@376a3748018e:/app# clear
[?2004l[H[J[3J[?2004hroot@376a3748018e:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBmbGlwcyBMIDwtPiBSCmlubGluZSBjaGFyIGZsaXBMUihjaGFyIGMpIHsKICAgIGlmIChjID09ICdMJykgcmV0dXJuICdSJzsKICAgIGlmIChjID09ICdSJykgcmV0dXJuICdMJzsKICAgIHJldHVybiBjOwp9CgovLyBmbGlwcyBVIDwtPiBECmlubGluZSBjaGFyIGZsaXBVRChjaGFyIGMpIHsKICAgIGlmIChjID09ICdVJykgcmV0dXJuICdEJzsKICAgIGlmIChjID09ICdEJykgcmV0dXJuICdVJzsKICAgIHJldHVybiBjOwp9CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwoKICAgIHdoaWxlICh0LS0pIHsKICAgICAgICBsb25nIGxvbmcgbiwgaywgdywgaDsKICAgICAgICBjaW4gPj4gbiA+PiBrID4+IHcgPj4gaDsKICAgICAgICBzdHJpbmcgczsKICAgICAgICBjaW4gPj4gczsKCiAgICAgICAgLy8gUG9zaXRpb24gb2Ygcm9ib3QKICAgICAgICBsb25nIGxvbmcgeCA9IDAsIHkgPSAwOwogICAgICAgIC8vIENvdW50cyBob3cgbWFueSB0aW1lcyByb2JvdCB2aXNpdHMgKDAsMCkgZXhjZXB0IGluaXRpYWwKICAgICAgICBsb25nIGxvbmcgdmlzaXRzID0gMDsKICAgICAgICAvLyBDdXJyZW50IHNjcmlwdCBzdHJpbmcgYW5kIGluZGV4CiAgICAgICAgc3RyaW5nIGN1cl9zID0gczsKICAgICAgICBsb25nIGxvbmcgY3VyX2lkeCA9IDA7CgogICAgICAgIC8vIEFzIGsgY2FuIGJlIGh1Z2UgKHVwIHRvIDFlMTIpLCBzaW11bGF0ZSBjYXJlZnVsbHkKICAgICAgICAvLyBXZSdsbCBzaW11bGF0ZSBmdWxsIHNjcmlwdCBleGVjdXRpb25zIHVudGlsIHdlIGRldGVjdCBjeWNsZSBvciBmaW5pc2ggawoKICAgICAgICAvLyBUbyBkZXRlY3QgY3ljbGUsIHN0b3JlIHN0YXRlOiAoeCx5LGN1cl9zKSBpcyBpbXBvc3NpYmxlIGR1ZSB0byBsYXJnZSBzCiAgICAgICAgLy8gSW5zdGVhZCwgc3RvcmUgKHgseSxjdXJfaWR4LCBmbGlwTFJGbGFnLCBmbGlwVURGbGFnKSBidXQgc2NyaXB0IGNoYW5nZXMgZ2xvYmFsbHkKICAgICAgICAvLyBXZSdsbCBzdG9yZSBzY3JpcHQgYXMgaXMsIGJ1dCBrZWVwIHRyYWNrIG9mIGZsaXBzIGZyb20gb3JpZ2luYWwgcwoKICAgICAgICAvLyBXZSdsbCB0cmFjayBmbGlwcyBpbiB0ZXJtcyBvZiB0d28gYm9vbCBmbGFncyBmb3Igd2hvbGUgc3RyaW5nOgogICAgICAgIC8vIGxyX2ZsaXA6IGlmIHRydWUsIEw8LT5SIGZsaXBwZWQKICAgICAgICAvLyB1ZF9mbGlwOiBpZiB0cnVlLCBVPC0+RCBmbGlwcGVkCgogICAgICAgIGJvb2wgbHJfZmxpcCA9IGZhbHNlLCB1ZF9mbGlwID0gZmFsc2U7CgogICAgICAgIC8vIFRvIHN0b3JlIHN0YXRlcyBmb3IgY3ljbGUgZGV0ZWN0aW9uCiAgICAgICAgLy8gS2V5OiB0dXBsZSAoeCx5LGN1cl9pZHgsbHJfZmxpcCx1ZF9mbGlwKSwgVmFsdWU6IChpdGVyYXRpb24gY291bnQsIHZpc2l0cyBzbyBmYXIpCiAgICAgICAgLy8gaXRlcmF0aW9uIGNvdW50cyBob3cgbWFueSB0aW1lcyBzY3JpcHQgd2FzIGV4ZWN1dGVkCiAgICAgICAgbWFwPHR1cGxlPGxvbmcgbG9uZyxsb25nIGxvbmcsaW50LGJvb2wsYm9vbD4sIHBhaXI8bG9uZyBsb25nLGxvbmcgbG9uZz4+IHNlZW47CgogICAgICAgIGxvbmcgbG9uZyBpdGVyID0gMDsKCiAgICAgICAgd2hpbGUgKGl0ZXIgPCBrKSB7CiAgICAgICAgICAgIC8vIERldGVjdCBjeWNsZQogICAgICAgICAgICBhdXRvIHN0YXRlID0gbWFrZV90dXBsZSh4LCB5LCAoaW50KWN1cl9pZHgsIGxyX2ZsaXAsIHVkX2ZsaXApOwogICAgICAgICAgICBpZiAoc2Vlbi5jb3VudChzdGF0ZSkpIHsKICAgICAgICAgICAgICAgIC8vIEN5Y2xlIGRldGVjdGVkCiAgICAgICAgICAgICAgICBsb25nIGxvbmcgaXRlcl9wcmV2ID0gc2VlbltzdGF0ZV0uZmlyc3Q7CiAgICAgICAgICAgICAgICBsb25nIGxvbmcgdmlzaXRzX3ByZXYgPSBzZWVuW3N0YXRlXS5zZWNvbmQ7CiAgICAgICAgICAgICAgICBsb25nIGxvbmcgY3ljbGVfbGVuID0gaXRlciAtIGl0ZXJfcHJldjsKICAgICAgICAgICAgICAgIGxvbmcgbG9uZyBjeWNsZV92aXNpdHMgPSB2aXNpdHMgLSB2aXNpdHNfcHJldjsKICAgICAgICAgICAgICAgIGxvbmcgbG9uZyByZW1haW5pbmcgPSBrIC0gaXRlcjsKICAgICAgICAgICAgICAgIGxvbmcgbG9uZyBjeWNsZXMgPSByZW1haW5pbmcgLyBjeWNsZV9sZW47CiAgICAgICAgICAgICAgICB2aXNpdHMgKz0gY3ljbGVzICogY3ljbGVfdmlzaXRzOwogICAgICAgICAgICAgICAgaXRlciArPSBjeWNsZXMgKiBjeWNsZV9sZW47CiAgICAgICAgICAgICAgICBpZiAoaXRlciA9PSBrKSBicmVhazsKICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHNpbXVsYXRpb24gZm9yIHJlbWFpbmluZyBpdGVyYXRpb25zCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZWVuW3N0YXRlXSA9IHtpdGVyLCB2aXNpdHN9OwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBFeGVjdXRlIHNjcmlwdCBmcm9tIGN1cl9pZHggdG8gZW5kCiAgICAgICAgICAgIGJvb2wgYm9yZGVyX2hpdCA9IGZhbHNlOwogICAgICAgICAgICBpbnQgc3RhcnRfaWR4ID0gY3VyX2lkeDsKICAgICAgICAgICAgZm9yICg7IGN1cl9pZHggPCBuOyBjdXJfaWR4KyspIHsKICAgICAgICAgICAgICAgIGNoYXIgYyA9IHNbY3VyX2lkeF07CiAgICAgICAgICAgICAgICAvLyBBcHBseSBmbGlwcwogICAgICAgICAgICAgICAgaWYgKGxyX2ZsaXApIHsKICAgICAgICAgICAgICAgICAgICBjID0gZmxpcExSKGMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHVkX2ZsaXApIHsKICAgICAgICAgICAgICAgICAgICBjID0gZmxpcFVEKGMpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGxvbmcgbG9uZyBueCA9IHgsIG55ID0geTsKICAgICAgICAgICAgICAgIGlmIChjID09ICdMJykgbngtLTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT0gJ1InKSBueCsrOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PSAnVScpIG55Kys7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09ICdEJykgbnktLTsKCiAgICAgICAgICAgICAgICAvLyBDaGVjayBib3JkZXJzCiAgICAgICAgICAgICAgICBpZiAobnggPCAwIHx8IG54ID4gdykgewogICAgICAgICAgICAgICAgICAgIC8vIGZsaXAgYWxsIEw8LT5SCiAgICAgICAgICAgICAgICAgICAgbHJfZmxpcCA9ICFscl9mbGlwOwogICAgICAgICAgICAgICAgICAgIGJvcmRlcl9oaXQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG55IDwgMCB8fCBueSA+IGgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBmbGlwIGFsbCBVPC0+RAogICAgICAgICAgICAgICAgICAgIHVkX2ZsaXAgPSAhdWRfZmxpcDsKICAgICAgICAgICAgICAgICAgICBib3JkZXJfaGl0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBNb3ZlCiAgICAgICAgICAgICAgICB4ID0gbng7CiAgICAgICAgICAgICAgICB5ID0gbnk7CgogICAgICAgICAgICAgICAgaWYgKHggPT0gMCAmJiB5ID09IDApIHZpc2l0cysrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIWJvcmRlcl9oaXQpIHsKICAgICAgICAgICAgICAgIC8vIEZpbmlzaGVkIG9uZSBmdWxsIHNjcmlwdCBleGVjdXRpb24KICAgICAgICAgICAgICAgIGN1cl9pZHggPSAwOwogICAgICAgICAgICAgICAgaXRlcisrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGVsc2UgY3VyX2lkeCBzdGF5cyBhdCBjdXJyZW50IHBvc2l0aW9uICh0aGUgY2hhcmFjdGVyIHRoYXQgY2F1c2VkIGJvcmRlciBoaXQpIGFuZCBzY3JpcHQgZmxpcHBlZAogICAgICAgIH0KCiAgICAgICAgY291dCA8PCB2aXNpdHMgPDwgIlxuIjsKICAgIH0KICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@376a3748018e:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@376a3748018e:/app# 