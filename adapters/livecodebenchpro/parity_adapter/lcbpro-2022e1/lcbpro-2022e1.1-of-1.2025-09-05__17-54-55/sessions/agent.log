[?2004hroot@bf931b234309:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@bf931b234309:/app# clear
[?2004l[H[J[3J[?2004hroot@bf931b234309:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7Cgpjb25zdCBpbnQgTU9EID0gMScwMDAnMDAwJzAwNzsKCi8vIFdlIHVzZSB0aGUgcHJvcGVydHkgdGhhdCBmb3IgYmVhdXRpZnVsIGdyaWQsIGVhY2ggcm93IGFuZCBjb2x1bW4gaXMgZGV0ZXJtaW5lZCBieSBmaXJzdCByb3cgYW5kIGZpcnN0IGNvbHVtbi4KLy8gSW4gdGhlIGVhc3kgdmVyc2lvbiBxPTAsIHdlIG9ubHkgaGF2ZSBpbml0aWFsIGZpeGVkIGNlbGxzLgovLyBUaGUgY29uZGl0aW9uIGltcGxpZXMgdGhhdCB0aGUgdmFsdWUgYXQgKHIsYykgPSByb3dfdmFsW3JdIF4gY29sX3ZhbFtjXS4KLy8gV2UgZml4IHJvd192YWxbMV0gPSAwLCB0aGVuIGNvbF92YWxbY10gPSBncmlkWzFdW2NdLCByb3dfdmFsW3JdID0gZ3JpZFtyXVsxXS4KLy8gRm9yIGZpeGVkIGNlbGxzLCBjaGVjayBjb25zaXN0ZW5jeS4gSWYgaW5jb25zaXN0ZW50LCBhbnN3ZXIgPSAwLgovLyBOdW1iZXIgb2Ygd2F5cyA9IDJeezMwICogKG51bWJlcl9vZl9jb21wb25lbnRzIC0gMSl9IHdoZXJlIGNvbXBvbmVudHMgYXJlIGNvbm5lY3RlZCBjb21wb25lbnRzIG9mIHRoZSBiaXBhcnRpdGUgZ3JhcGggZm9ybWVkIGJ5IHJvd3MgYW5kIGNvbHVtbnMgY29ubmVjdGVkIGJ5IGZpeGVkIGNlbGxzLgoKaW50IG1haW4oKSB7CiAgICBpb3M6OnN5bmNfd2l0aF9zdGRpbyhmYWxzZSk7CiAgICBjaW4udGllKG51bGxwdHIpOwoKICAgIGludCB0OyBjaW4gPj4gdDsKICAgIC8vIFByZWNvbXB1dGUgcG93ZXJzIG9mIDIgbW9kdWxvIE1PRAogICAgY29uc3QgaW50IE1BWCA9IDEwMDAwMCArIDEwOwogICAgc3RhdGljIGludDY0X3QgcG93MltNQVhdOwogICAgcG93MlswXSA9IDE7CiAgICBmb3IgKGludCBpID0gMTsgaSA8IE1BWDsgaSsrKQogICAgICAgIHBvdzJbaV0gPSAocG93MltpLTFdICogMikgJSBNT0Q7CgogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuLCBtLCBrLCBxOwogICAgICAgIGNpbiA+PiBuID4+IG0gPj4gayA+PiBxOwogICAgICAgIHZlY3RvcjxhcnJheTxpbnQsMz4+IGZpeGVkKGspOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKSB7CiAgICAgICAgICAgIGNpbiA+PiBmaXhlZFtpXVswXSA+PiBmaXhlZFtpXVsxXSA+PiBmaXhlZFtpXVsyXTsKICAgICAgICB9CiAgICAgICAgLy8gcT0wLCBzbyBubyB1cGRhdGVzCgogICAgICAgIC8vIFdlJ2xsIGJ1aWxkIGEgYmlwYXJ0aXRlIGdyYXBoIGJldHdlZW4gcm93cyBhbmQgY29sdW1ucwogICAgICAgIC8vIHJvdyBpbmRpY2VzOiAxLi5uCiAgICAgICAgLy8gY29sIGluZGljZXM6IG4rMS4ubittCgogICAgICAgIC8vIERpc2pvaW50IHNldCB1bmlvbiAoRFNVKSBmb3IgY29ubmVjdGVkIGNvbXBvbmVudCBjb3VudAogICAgICAgIHZlY3RvcjxpbnQ+IHBhcmVudChuK20rMSksIHNpemUobittKzEsMSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gbittOyBpKyspIHBhcmVudFtpXSA9IGk7CgogICAgICAgIGZ1bmN0aW9uPGludChpbnQpPiBmaW5kX3BhcmVudCA9IFsmXShpbnQgeCkgewogICAgICAgICAgICB3aGlsZSAocGFyZW50W3hdICE9IHgpIHggPSBwYXJlbnRbeF0gPSBwYXJlbnRbcGFyZW50W3hdXTsKICAgICAgICAgICAgcmV0dXJuIHg7CiAgICAgICAgfTsKCiAgICAgICAgYXV0byB1bml0ZSA9IFsmXShpbnQgYSwgaW50IGIpIHsKICAgICAgICAgICAgYSA9IGZpbmRfcGFyZW50KGEpOyBiID0gZmluZF9wYXJlbnQoYik7CiAgICAgICAgICAgIGlmIChhICE9IGIpIHsKICAgICAgICAgICAgICAgIGlmIChzaXplW2FdIDwgc2l6ZVtiXSkgc3dhcChhLGIpOwogICAgICAgICAgICAgICAgcGFyZW50W2JdID0gYTsKICAgICAgICAgICAgICAgIHNpemVbYV0gKz0gc2l6ZVtiXTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIC8vIEZvciBlYWNoIGNvbXBvbmVudCwgd2Ugd2lsbCBjaGVjayBjb25zaXN0ZW5jeSBvZiBmaXhlZCBhc3NpZ25tZW50cwogICAgICAgIC8vIFdlIHN0b3JlIHZhbHVlIG9mIHJvdyBub2RlcyBhbmQgY29sIG5vZGVzIGluIHRoZWlyIGNvbXBvbmVudAogICAgICAgIC8vIFdlJ2xsIGFzc2lnbiByb3dfdmFsW3JdIGFuZCBjb2xfdmFsW2NdIGFzIHVua25vd24gaW5pdGlhbGx5CiAgICAgICAgLy8gQXNzaWduIHJvd192YWxbMV0gPSAwIGZvciBpdHMgY29tcG9uZW50CgogICAgICAgIC8vIFdlJ2xsIHN0b3JlIGVkZ2VzOiBmcm9tIHJvdyB0byBjb2wgd2l0aCB2YWx1ZTogdmFsID0gcm93X3ZhbFtyXSBeIGNvbF92YWxbY10KICAgICAgICAvLyBGb3IgZml4ZWQgY2VsbHM6IHZhbCBpcyBmaXhlZC4KCiAgICAgICAgLy8gV2UnbGwgZG8gYSBCRlMgcGVyIGNvbXBvbmVudCBhc3NpZ25pbmcgcm93X3ZhbCBhbmQgY29sX3ZhbAoKICAgICAgICAvLyBCdWlsZCBhZGphY2VuY3kKICAgICAgICB2ZWN0b3I8dmVjdG9yPHBhaXI8aW50LGludD4+PiBhZGoobittKzEpOwogICAgICAgIGZvciAoYXV0byYgZjogZml4ZWQpIHsKICAgICAgICAgICAgaW50IHIgPSBmWzBdOwogICAgICAgICAgICBpbnQgYyA9IGZbMV0gKyBuOwogICAgICAgICAgICBpbnQgdiA9IGZbMl07CiAgICAgICAgICAgIHVuaXRlKHIsIGMpOwogICAgICAgICAgICBhZGpbcl0uZW1wbGFjZV9iYWNrKGMsIHYpOwogICAgICAgICAgICBhZGpbY10uZW1wbGFjZV9iYWNrKHIsIHYpOwogICAgICAgIH0KCiAgICAgICAgLy8gTWFwIGZyb20gY29tcG9uZW50IHJvb3QgdG8gbm9kZXMgaW4gY29tcAogICAgICAgIHVub3JkZXJlZF9tYXA8aW50LCB2ZWN0b3I8aW50Pj4gY29tcHM7CiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gbittOyBpKyspIHsKICAgICAgICAgICAgY29tcHNbZmluZF9wYXJlbnQoaSldLnB1c2hfYmFjayhpKTsKICAgICAgICB9CgogICAgICAgIGludDY0X3QgYW5zID0gMTsKICAgICAgICAvLyBOdW1iZXIgb2YgZnJlZSBjb21wb25lbnRzIGlzIG51bWJlciBvZiBjb21wb25lbnRzIG1pbnVzIDEgKGZpeCAxc3Qgcm93IHRvIDApCiAgICAgICAgLy8gRWFjaCBmcmVlIGNvbXBvbmVudCBjb250cmlidXRlcyAyXnszMH0gd2F5cwoKICAgICAgICBib29sIGltcG9zc2libGUgPSBmYWxzZTsKCiAgICAgICAgZm9yIChhdXRvJiBbcm9vdCwgbm9kZXNdIDogY29tcHMpIHsKICAgICAgICAgICAgLy8gQXNzaWduIHZhbHVlczogLTEgbWVhbnMgdW5hc3NpZ25lZAogICAgICAgICAgICB1bm9yZGVyZWRfbWFwPGludCxpbnQ2NF90PiB2YWw7CgogICAgICAgICAgICAvLyBGaW5kIGlmIGNvbXBvbmVudCBjb250YWlucyByb3cgMQogICAgICAgICAgICBib29sIGNvbnRhaW5zX3JvdzEgPSBmYWxzZTsKICAgICAgICAgICAgZm9yIChhdXRvIHUgOiBub2RlcykgewogICAgICAgICAgICAgICAgaWYgKHUgPT0gMSkgeyBjb250YWluc19yb3cxID0gdHJ1ZTsgYnJlYWs7IH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcXVldWU8aW50PiBxOwogICAgICAgICAgICBpZiAoY29udGFpbnNfcm93MSkgewogICAgICAgICAgICAgICAgdmFsWzFdID0gMDsKICAgICAgICAgICAgICAgIHEucHVzaCgxKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEFzc2lnbiBhcmJpdHJhcnkgMCB0byBvbmUgbm9kZSBpbiB0aGlzIGNvbXBvbmVudAogICAgICAgICAgICAgICAgdmFsW25vZGVzWzBdXSA9IDA7CiAgICAgICAgICAgICAgICBxLnB1c2gobm9kZXNbMF0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSAoIXEuZW1wdHkoKSAmJiAhaW1wb3NzaWJsZSkgewogICAgICAgICAgICAgICAgaW50IHUgPSBxLmZyb250KCk7IHEucG9wKCk7CiAgICAgICAgICAgICAgICBmb3IgKGF1dG8mIFt3LCB4dmFsXSA6IGFkalt1XSkgewogICAgICAgICAgICAgICAgICAgIGlmICh2YWwuZmluZCh3KSA9PSB2YWwuZW5kKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsW3ddID0gdmFsW3VdIF4geHZhbDsKICAgICAgICAgICAgICAgICAgICAgICAgcS5wdXNoKHcpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsW3VdIF4gdmFsW3ddKSAhPSB4dmFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvc3NpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW1wb3NzaWJsZSkgYnJlYWs7CgogICAgICAgICAgICAvLyBFYWNoIGNvbXBvbmVudCBjb250cmlidXRlcyAyXnszMH0gd2F5cyBleGNlcHQgdGhlIG9uZSBjb250YWluaW5nIHJvdyAxCiAgICAgICAgICAgIGlmICghY29udGFpbnNfcm93MSkgewogICAgICAgICAgICAgICAgLy8gbXVsdGlwbHkgYW5zd2VyIGJ5IDJeezMwfSBtb2QKICAgICAgICAgICAgICAgIC8vIDJeezMwfSBtb2QgPSBwb3cyWzMwXQogICAgICAgICAgICAgICAgLy8gY29tcHV0ZSBwb3cyWzMwXQogICAgICAgICAgICAgICAgaW50NjRfdCB3YXlzID0gMTsKICAgICAgICAgICAgICAgIC8vIHBvdzJbXSBpcyBwb3dlciBvZiB0d28gbW9kLCBzbyBwb3cyWzMwXSA9IDJeMzAgbW9kCiAgICAgICAgICAgICAgICB3YXlzID0gcG93MlszMF07CiAgICAgICAgICAgICAgICBhbnMgPSAoYW5zICogd2F5cykgJSBNT0Q7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChpbXBvc3NpYmxlKSBhbnMgPSAwOwoKICAgICAgICAvLyBxPTAsIHNvIG9ubHkgcHJpbnQgb25jZQogICAgICAgIGNvdXQgPDwgYW5zIDw8ICJcbiI7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@bf931b234309:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@bf931b234309:/app# 