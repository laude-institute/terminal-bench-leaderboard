[?2004hroot@8205f0d0a234:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@8205f0d0a234:/app# clear
[?2004l[H[J[3J[?2004hroot@8205f0d0a234:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBQcm9ibGVtOiBGaW5kIHRoZSBzbWFsbGVzdCBrLXRoIG1heGltdW0gZWRnZSB3ZWlnaHQgb24gYW55IHBhdGggZnJvbSBhIHRvIGIKLy8gQXBwcm9hY2g6Ci8vIEdpdmVuIHRoZSBjb25zdHJhaW50cywgbiA8PSA0MDAgYW5kIHN1bSBvZiBxIHVwIHRvIDNlNSwgd2UgbmVlZCBhbiBlZmZpY2llbnQgbWV0aG9kLgovLyBXZSB1c2UgYSBtb2RpZmllZCBGbG95ZC1XYXJzaGFsbCBhbGdvcml0aG0gd2hlcmUgZm9yIGVhY2ggcGFpciAoaSxqKSB3ZSBzdG9yZQovLyBhIHNvcnRlZCB2ZWN0b3IgKGluIGRlc2NlbmRpbmcgb3JkZXIpIG9mIGVkZ2Ugd2VpZ2h0cyByZXByZXNlbnRpbmcgdGhlIGJlc3QgcGF0aCBmcm9tIGkgdG8gai4KLy8gIkJlc3QiIG1lYW5zIHRoZSBwYXRoIHdob3NlIHNvcnRlZCBlZGdlIHdlaWdodHMgYXJlIGxleGljb2dyYXBoaWNhbGx5IG1pbmltYWwuCi8vIEZvciBtZXJnaW5nIHR3byBwYXRocywgd2UgbWVyZ2UgdGhlaXIgc29ydGVkIHdlaWdodCBsaXN0cyAobGltaXRpbmcgc2l6ZSB0byBuLTEpLgoKY29uc3QgaW50IE1BWE4gPSA0MDA7CmludCBuLCBtLCBxOwp2ZWN0b3I8aW50PiBkaXN0W01BWE5dW01BWE5dOwoKLy8gTWVyZ2UgdHdvIGRlc2NlbmRpbmcgc29ydGVkIHZlY3RvcnMsIHRha2UgbWluaW1hbCBsZXggb3JkZXIKdmVjdG9yPGludD4gbWVyZ2VQYXRocyhjb25zdCB2ZWN0b3I8aW50PiYgYSwgY29uc3QgdmVjdG9yPGludD4mIGIpIHsKICAgIHZlY3RvcjxpbnQ+IHJlczsKICAgIGludCBpID0gMCwgaiA9IDA7CiAgICB3aGlsZSAoKGludClyZXMuc2l6ZSgpIDwgbiAtIDEgJiYgKGkgPCAoaW50KWEuc2l6ZSgpIHx8IGogPCAoaW50KWIuc2l6ZSgpKSkgewogICAgICAgIGlmIChpID09IChpbnQpYS5zaXplKCkpIHsKICAgICAgICAgICAgcmVzLnB1c2hfYmFjayhiW2orK10pOwogICAgICAgIH0gZWxzZSBpZiAoaiA9PSAoaW50KWIuc2l6ZSgpKSB7CiAgICAgICAgICAgIHJlcy5wdXNoX2JhY2soYVtpKytdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoYVtpXSA8IGJbal0pIHsKICAgICAgICAgICAgICAgIHJlcy5wdXNoX2JhY2soYVtpKytdKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChhW2ldID4gYltqXSkgewogICAgICAgICAgICAgICAgcmVzLnB1c2hfYmFjayhiW2orK10pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzLnB1c2hfYmFjayhhW2ldKTsgaSsrOyBqKys7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzOwp9CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGNpbiA+PiBuID4+IG0gPj4gcTsKICAgICAgICAvLyBJbml0aWFsaXplIGRpc3QKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG47IGorKykgewogICAgICAgICAgICAgICAgZGlzdFtpXVtqXS5jbGVhcigpOwogICAgICAgICAgICAgICAgaWYgKGkgPT0gaikgewogICAgICAgICAgICAgICAgICAgIGRpc3RbaV1bal0gPSB7fTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGlzdFtpXVtqXSA9IHZlY3RvcjxpbnQ+KG4sIElOVF9NQVgpOyAvLyBMYXJnZSBwbGFjZWhvbGRlcgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIFJlYWQgZWRnZXMKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG07IGkrKykgewogICAgICAgICAgICBpbnQgdiwgdSwgdzsKICAgICAgICAgICAgY2luID4+IHYgPj4gdSA+PiB3OwogICAgICAgICAgICB2LS07IHUtLTsKICAgICAgICAgICAgZGlzdFt2XVt1XSA9IHt3fTsKICAgICAgICAgICAgZGlzdFt1XVt2XSA9IHt3fTsKICAgICAgICB9CiAgICAgICAgLy8gRmxveWQtV2Fyc2hhbGwgbGlrZSBhbGdvcml0aG0KICAgICAgICAvLyBXZSB3YW50IHRvIGZpbmQgcGF0aHMgd2l0aCBsZXhpY29ncmFwaGljYWxseSBtaW5pbWFsIHNvcnRlZCBkZXNjZW5kaW5nIGVkZ2Ugd2VpZ2h0cwogICAgICAgIC8vIEhlcmUsIGRpc3RbaV1bal0gc3RvcmVzIHRoZSBiZXN0IHBhdGgncyBzb3J0ZWQgZGVzY2VuZGluZyBlZGdlcyBmcm9tIGkgdG8gagogICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoZGlzdFtpXVtrXVswXSA9PSBJTlRfTUFYKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbjsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3Rba11bal1bMF0gPT0gSU5UX01BWCkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgcGF0aHMgZGlzdFtpXVtrXSBhbmQgZGlzdFtrXVtqXQogICAgICAgICAgICAgICAgICAgIC8vIGNvbWJpbmVkIGVkZ2VzCiAgICAgICAgICAgICAgICAgICAgdmVjdG9yPGludD4gY29tYmluZWQgPSBkaXN0W2ldW2tdOwogICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkLmluc2VydChjb21iaW5lZC5lbmQoKSwgZGlzdFtrXVtqXS5iZWdpbigpLCBkaXN0W2tdW2pdLmVuZCgpKTsKICAgICAgICAgICAgICAgICAgICAvLyBTb3J0IGRlc2NlbmRpbmcKICAgICAgICAgICAgICAgICAgICBzb3J0KGNvbWJpbmVkLmJlZ2luKCksIGNvbWJpbmVkLmVuZCgpLCBncmVhdGVyPGludD4oKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKChpbnQpY29tYmluZWQuc2l6ZSgpID4gbiAtIDEpIGNvbWJpbmVkLnJlc2l6ZShuIC0gMSk7CgogICAgICAgICAgICAgICAgICAgIC8vIENvbXBhcmUgY29tYmluZWQgdnMgZGlzdFtpXVtqXQogICAgICAgICAgICAgICAgICAgIGJvb2wgYmV0dGVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RbaV1bal0uZW1wdHkoKSB8fCBkaXN0W2ldW2pdWzBdID09IElOVF9NQVgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmV0dGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBMZXhpY29ncmFwaGljYWxseSBjb21wYXJlCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlkeCA9IDA7IGlkeCA8IChpbnQpY29tYmluZWQuc2l6ZSgpOyBpZHgrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeCA+PSAoaW50KWRpc3RbaV1bal0uc2l6ZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmV0dGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21iaW5lZFtpZHhdIDwgZGlzdFtpXVtqXVtpZHhdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmV0dGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tYmluZWRbaWR4XSA+IGRpc3RbaV1bal1baWR4XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChiZXR0ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGlzdFtpXVtqXSA9IGNvbWJpbmVkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gQW5zd2VyIHF1ZXJpZXMKICAgICAgICBmb3IgKGludCBfID0gMDsgXyA8IHE7IF8rKykgewogICAgICAgICAgICBpbnQgYSwgYiwgazsKICAgICAgICAgICAgY2luID4+IGEgPj4gYiA+PiBrOwogICAgICAgICAgICBhLS07IGItLTsKICAgICAgICAgICAgaWYgKChpbnQpZGlzdFthXVtiXS5zaXplKCkgPCBrKSB7CiAgICAgICAgICAgICAgICBjb3V0IDw8IC0xIDw8ICIgIjsgLy8gaW52YWxpZCBxdWVyeSBhY2NvcmRpbmcgdG8gcHJvYmxlbSwgYnV0IHNhZmUgZ3VhcmQKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvdXQgPDwgZGlzdFthXVtiXVtrIC0gMV0gPDwgIiAiOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvdXQgPDwgIlxuIjsKICAgIH0KICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@8205f0d0a234:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@8205f0d0a234:/app# 