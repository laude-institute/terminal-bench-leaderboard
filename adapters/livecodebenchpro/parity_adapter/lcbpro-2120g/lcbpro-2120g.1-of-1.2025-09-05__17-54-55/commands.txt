['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBDaGVjayBpZiBncmFwaCBoYXMgRXVsZXIgdHJhaWw6IDAgb3IgMiB2ZXJ0aWNlcyB3aXRoIG9kZCBkZWdyZWUsIGNvbm5lY3RlZApib29sIGhhc0V1bGVyVHJhaWwoY29uc3QgdmVjdG9yPHZlY3RvcjxpbnQ+PiAmYWRqLCBpbnQgbSkgewogICAgaW50IG9kZF9kZWdyZWUgPSAwOwogICAgaW50IG4gPSAoaW50KWFkai5zaXplKCk7CiAgICB2ZWN0b3I8Ym9vbD4gdmlzaXRlZChuLCBmYWxzZSk7CgogICAgLy8gQ291bnQgb2RkIGRlZ3JlZSB2ZXJ0aWNlcwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICBpZiAoKGludClhZGpbaV0uc2l6ZSgpICUgMiAhPSAwKSBvZGRfZGVncmVlKys7CiAgICB9CiAgICBpZiAoIShvZGRfZGVncmVlID09IDAgfHwgb2RkX2RlZ3JlZSA9PSAyKSkgcmV0dXJuIGZhbHNlOwoKICAgIC8vIENoZWNrIGNvbm5lY3Rpdml0eSBpZ25vcmluZyBpc29sYXRlZCB2ZXJ0aWNlcwogICAgaW50IHN0YXJ0ID0gLTE7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgIGlmICghYWRqW2ldLmVtcHR5KCkpIHsKICAgICAgICAgICAgc3RhcnQgPSBpOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAgICBpZiAoc3RhcnQgPT0gLTEpIHJldHVybiBtID09IDA7IC8vIG5vIGVkZ2VzCgogICAgLy8gREZTCiAgICBzdGFjazxpbnQ+IHN0OyBzdC5wdXNoKHN0YXJ0KTsKICAgIHZpc2l0ZWRbc3RhcnRdID0gdHJ1ZTsKICAgIGludCBjb3VudCA9IDE7CiAgICB3aGlsZSAoIXN0LmVtcHR5KCkpIHsKICAgICAgICBpbnQgdSA9IHN0LnRvcCgpOyBzdC5wb3AoKTsKICAgICAgICBmb3IgKGludCB2IDogYWRqW3VdKSB7CiAgICAgICAgICAgIGlmICghdmlzaXRlZFt2XSkgewogICAgICAgICAgICAgICAgdmlzaXRlZFt2XSA9IHRydWU7CiAgICAgICAgICAgICAgICBzdC5wdXNoKHYpOwogICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBDb3VudCB2ZXJ0aWNlcyB3aXRoIGVkZ2VzCiAgICBpbnQgdmVydGljZXNfd2l0aF9lZGdlcyA9IDA7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgIGlmICghYWRqW2ldLmVtcHR5KCkpIHZlcnRpY2VzX3dpdGhfZWRnZXMrKzsKICAgIH0KCiAgICByZXR1cm4gY291bnQgPT0gdmVydGljZXNfd2l0aF9lZGdlczsKfQoKaW50IG1haW4oKSB7CiAgICBpb3M6OnN5bmNfd2l0aF9zdGRpbyhmYWxzZSk7CiAgICBjaW4udGllKG51bGxwdHIpOwoKICAgIGludCB0OyBjaW4gPj4gdDsKCiAgICB3aGlsZSAodC0tKSB7CiAgICAgICAgaW50IG4sbSxrOyBjaW4gPj4gbiA+PiBtID4+IGs7CiAgICAgICAgdmVjdG9yPGludD4gZGVnKG4sMCk7CiAgICAgICAgdmVjdG9yPHBhaXI8aW50LGludD4+IGVkZ2VzKG0pOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbTsgaSsrKSB7CiAgICAgICAgICAgIGludCB1LHY7IGNpbiA+PiB1ID4+IHY7IHUtLTsgdi0tOwogICAgICAgICAgICBlZGdlc1tpXSA9IHt1LHZ9OwogICAgICAgICAgICBkZWdbdV0rKzsKICAgICAgICAgICAgZGVnW3ZdKys7CiAgICAgICAgfQoKICAgICAgICAvLyBHaXZlbiBHIGhhcyBFdWxlciB0cmFpbCBhbmQgaXMgbm90IGEgcGF0aCBncmFwaC4KICAgICAgICAvLyBDb25kaXRpb25zIHRvIGNoZWNrIGZvciBMXmsoRyk6CiAgICAgICAgLy8gSW5zaWdodCBmcm9tIHByb2JsZW0gYW5kIGVkaXRvcmlhbDoKICAgICAgICAvLyAtIEwoRykgaGFzIHZlcnRpY2VzIHJlcHJlc2VudGluZyBlZGdlcyBvZiBHCiAgICAgICAgLy8gLSBUd28gdmVydGljZXMgYWRqYWNlbnQgaWYgZWRnZXMgc2hhcmUgZW5kcG9pbnQKICAgICAgICAvLyAtIERlZ3JlZSBpbiBMKEcpIG9mIGFuIGVkZ2UgZT0odSx2KSBpcyBkZWcodSkrZGVnKHYpLTIKICAgICAgICAvLyAKICAgICAgICAvLyBMXmsoRykgaGFzIEV1bGVyIHRyYWlsIGlmZjoKICAgICAgICAvLyAtIG51bWJlciBvZiB2ZXJ0aWNlcyB3aXRoIG9kZCBkZWdyZWUgaXMgMCBvciAyCiAgICAgICAgLy8gLSBncmFwaCBpcyBjb25uZWN0ZWQKICAgICAgICAvLwogICAgICAgIC8vIEFsc28gZnJvbSBwcm9ibGVtIG5vdGVzOgogICAgICAgIC8vIExeMChHKSA9IEcKICAgICAgICAvLyBMXjEoRykgPSBMKEcpCiAgICAgICAgLy8gTF4yKEcpID0gTChMKEcpKSwgZXRjCgogICAgICAgIC8vIElmIGsgPT0gMCwgYW5zd2VyIGlzIFlFUyBiZWNhdXNlIEcgaGFzIEV1bGVyIHRyYWlsCiAgICAgICAgaWYgKGsgPT0gMCkgewogICAgICAgICAgICBjb3V0IDw8ICJZRVNcbiI7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgLy8gQnVpbGQgZGVncmVlcyBvZiBMKEcpCiAgICAgICAgLy8gRWFjaCB2ZXJ0ZXggaW4gTChHKSBjb3JyZXNwb25kcyB0byBhbiBlZGdlIGluIEcKICAgICAgICAvLyBEZWdyZWUgb2YgdmVydGV4IGluIEwoRykgPSBkZWcodSkgKyBkZWcodikgLSAyCgogICAgICAgIHZlY3RvcjxpbnQ+IGRlZ0wobSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtOyBpKyspIHsKICAgICAgICAgICAgaW50IHUgPSBlZGdlc1tpXS5maXJzdCwgdiA9IGVkZ2VzW2ldLnNlY29uZDsKICAgICAgICAgICAgZGVnTFtpXSA9IGRlZ1t1XSArIGRlZ1t2XSAtIDI7CiAgICAgICAgfQoKICAgICAgICAvLyBDb3VudCBvZGQgZGVncmVlIHZlcnRpY2VzIGluIEwoRykKICAgICAgICBpbnQgb2RkTCA9IDA7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtOyBpKyspIHsKICAgICAgICAgICAgaWYgKGRlZ0xbaV0gJSAyICE9IDApIG9kZEwrKzsKICAgICAgICB9CgogICAgICAgIC8vIFNwZWNpYWwgY2FzZTogaWYgTChHKSBpcyBkaXNjb25uZWN0ZWQsIG5vIEV1bGVyIHRyYWlsCiAgICAgICAgLy8gQnVpbGQgYWRqYWNlbmN5IGZvciBMKEcpCiAgICAgICAgLy8gVmVydGljZXMgb2YgTChHKSA9IGVkZ2VzIG9mIEcKICAgICAgICAvLyBUd28gZWRnZXMgYWRqYWNlbnQgaWYgc2hhcmUgZW5kcG9pbnQKCiAgICAgICAgLy8gTWFwIGVhY2ggdmVydGV4IHUgaW4gRyB0byBlZGdlcyBpbmNpZGVudCB0byB1CiAgICAgICAgdmVjdG9yPHZlY3RvcjxpbnQ+PiBhZGpMKG0pOwogICAgICAgIHZlY3Rvcjx2ZWN0b3I8aW50Pj4gaW5jaWRlbnQobik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtOyBpKyspIHsKICAgICAgICAgICAgaW5jaWRlbnRbZWRnZXNbaV0uZmlyc3RdLnB1c2hfYmFjayhpKTsKICAgICAgICAgICAgaW5jaWRlbnRbZWRnZXNbaV0uc2Vjb25kXS5wdXNoX2JhY2soaSk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKGludCB1ID0gMDsgdSA8IG47IHUrKykgewogICAgICAgICAgICBhdXRvICZ2ZWMgPSBpbmNpZGVudFt1XTsKICAgICAgICAgICAgaW50IHN6ID0gKGludCl2ZWMuc2l6ZSgpOwogICAgICAgICAgICBmb3IgKGludCBpMSA9IDA7IGkxIDwgc3o7IGkxKyspIHsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkyID0gaTErMTsgaTIgPCBzejsgaTIrKykgewogICAgICAgICAgICAgICAgICAgIGludCBlMSA9IHZlY1tpMV0sIGUyID0gdmVjW2kyXTsKICAgICAgICAgICAgICAgICAgICBhZGpMW2UxXS5wdXNoX2JhY2soZTIpOwogICAgICAgICAgICAgICAgICAgIGFkakxbZTJdLnB1c2hfYmFjayhlMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIENoZWNrIGNvbm5lY3Rpdml0eSBvZiBMKEcpIGlnbm9yaW5nIGlzb2xhdGVkIHZlcnRpY2VzCiAgICAgICAgdmVjdG9yPGJvb2w+IHZpc2l0ZWQobSwgZmFsc2UpOwogICAgICAgIGludCBzdGFydCA9IC0xOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbTsgaSsrKSB7CiAgICAgICAgICAgIGlmICghYWRqTFtpXS5lbXB0eSgpKSB7CiAgICAgICAgICAgICAgICBzdGFydCA9IGk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHN0YXJ0ID09IC0xKSB7CiAgICAgICAgICAgIC8vIG5vIGVkZ2VzIGluIEwoRyksIG1lYW5zIG09MCBvciBpc29sYXRlZCBlZGdlcwogICAgICAgICAgICAvLyB0aGVuIEV1bGVyIHRyYWlsIGRlcGVuZHMKICAgICAgICAgICAgY291dCA8PCAiTk9cbiI7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgc3RhY2s8aW50PiBzdDsgc3QucHVzaChzdGFydCk7CiAgICAgICAgdmlzaXRlZFtzdGFydF0gPSB0cnVlOwogICAgICAgIGludCBjb3VudCA9IDE7CiAgICAgICAgd2hpbGUgKCFzdC5lbXB0eSgpKSB7CiAgICAgICAgICAgIGludCB1ID0gc3QudG9wKCk7IHN0LnBvcCgpOwogICAgICAgICAgICBmb3IgKGludCB2IDogYWRqTFt1XSkgewogICAgICAgICAgICAgICAgaWYgKCF2aXNpdGVkW3ZdKSB7CiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZFt2XSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgc3QucHVzaCh2KTsKICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpbnQgdmVydGljZXNfd2l0aF9lZGdlcyA9IDA7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtOyBpKyspIHsKICAgICAgICAgICAgaWYgKCFhZGpMW2ldLmVtcHR5KCkpIHZlcnRpY2VzX3dpdGhfZWRnZXMrKzsKICAgICAgICB9CgogICAgICAgIGJvb2wgY29ubmVjdGVkX0wgPSAoY291bnQgPT0gdmVydGljZXNfd2l0aF9lZGdlcyk7CgogICAgICAgIC8vIElmIGs9PTEsIGFuc3dlciBpcyBZRVMgaWYgTChHKSBoYXMgRXVsZXIgdHJhaWwKICAgICAgICBpZiAoayA9PSAxKSB7CiAgICAgICAgICAgIGlmICgob2RkTCA9PSAwIHx8IG9kZEwgPT0gMikgJiYgY29ubmVjdGVkX0wpIGNvdXQgPDwgIllFU1xuIjsKICAgICAgICAgICAgZWxzZSBjb3V0IDw8ICJOT1xuIjsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvLyBGb3IgayA+PSAyOgogICAgICAgIC8vIEZyb20gZWRpdG9yaWFsIGFuZCBwcm9ibGVtIG5vdGU6CiAgICAgICAgLy8gTF4yKEcpIGlzIGlzb21vcnBoaWMgdG8gRyBmb3IgZ2l2ZW4gY29uZGl0aW9ucwogICAgICAgIC8vIFNvIExeMihHKSBoYXMgRXVsZXIgdHJhaWwgc2FtZSBhcyBHCiAgICAgICAgLy8gU2ltaWxhcmx5IGZvciBoaWdoZXIgayA+PSAyLCBMXntrfShHKSBoYXMgRXVsZXIgdHJhaWwgaWZmIGsgaXMgZXZlbgogICAgICAgIC8vIGJlY2F1c2UgTF4yKEcpID0gRyBhbmQgTChMKEcpKSA9IEcKCiAgICAgICAgaWYgKGsgJSAyID09IDApIHsKICAgICAgICAgICAgLy8gayBldmVuLCBhbnN3ZXIgaXMgWUVTCiAgICAgICAgICAgIGNvdXQgPDwgIllFU1xuIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBrIG9kZCBhbmQgPj0zLCBhbnN3ZXIgc2FtZSBhcyBMKEcpCiAgICAgICAgICAgIGlmICgob2RkTCA9PSAwIHx8IG9kZEwgPT0gMikgJiYgY29ubmVjdGVkX0wpIGNvdXQgPDwgIllFU1xuIjsKICAgICAgICAgICAgZWxzZSBjb3V0IDw8ICJOT1xuIjsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
