[?2004hroot@6ba8d61782eb:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@6ba8d61782eb:/app# clear
[?2004l[H[J[3J[?2004hroot@6ba8d61782eb:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBUaGlzIHNvbHV0aW9uIGZpbmRzIHRoZSBtaW5pbWFsIG51bWJlciBvZiBpbml0aWFsIHBsYW5zIG5lZWRlZAovLyBvciAtMSBpZiBpbXBvc3NpYmxlIHRvIGluZm9ybSBhbGwgY2l0aWVzLgoKLy8gV2Ugd2lsbCBmaW5kIHN0cm9uZ2x5IGNvbm5lY3RlZCBjb21wb25lbnRzIChTQ0NzKSBhbmQgYnVpbGQgYSBjb25kZW5zYXRpb24gZ3JhcGguCi8vIFdlIGNoZWNrIGlmIGVhY2ggU0NDIGlzIHJlYWNoYWJsZSBmcm9tIG1lc3NlbmdlcnMgaW4gb3JpZ2luYWwgY2l0aWVzLgovLyBUaGUgbWluaW1hbCBudW1iZXIgb2YgaW5pdGlhbCBwbGFucyBlcXVhbHMgdGhlIG51bWJlciBvZiBTQ0NzIHdpdGggbm8gaW5jb21pbmcgZWRnZXMKLy8gdGhhdCBjb250YWluIGF0IGxlYXN0IG9uZSBjaXR5IHdpdGggbWVzc2VuZ2VycyBpbml0aWFsbHkuCi8vIElmIHRoZXJlJ3MgYW4gU0NDIHdpdGggbm8gaW5jb21pbmcgZWRnZXMgYW5kIG5vIG1lc3NlbmdlcnMsIGl0J3MgaW1wb3NzaWJsZS4KCnN0cnVjdCBHcmFwaCB7CiAgICBpbnQgbjsKICAgIHZlY3Rvcjx2ZWN0b3I8aW50Pj4gYWRqOwogICAgR3JhcGgoaW50IG4pOiBuKG4pLCBhZGoobikge30KICAgIHZvaWQgYWRkX2VkZ2UoaW50IHUsIGludCB2KSB7CiAgICAgICAgYWRqW3VdLnB1c2hfYmFjayh2KTsKICAgIH0KfTsKCnN0cnVjdCBTQ0MgewogICAgaW50IG4sIHRpbWUgPSAwLCBzY2NfY291bnQgPSAwOwogICAgdmVjdG9yPHZlY3RvcjxpbnQ+PiAmYWRqOwogICAgdmVjdG9yPGludD4gZGlzYywgbG93LCBzdGFja19tZW1iZXIsIHNjY19pZDsKICAgIHN0YWNrPGludD4gc3Q7CgogICAgU0NDKHZlY3Rvcjx2ZWN0b3I8aW50Pj4gJmdyYXBoKTogbigoaW50KWdyYXBoLnNpemUoKSksIGFkaihncmFwaCksIGRpc2MobiwgLTEpLCBsb3cobiwgLTEpLCBzdGFja19tZW1iZXIobiwgMCksIHNjY19pZChuLCAtMSkge30KCiAgICB2b2lkIGRmcyhpbnQgdSkgewogICAgICAgIGRpc2NbdV0gPSBsb3dbdV0gPSB0aW1lKys7CiAgICAgICAgc3QucHVzaCh1KTsKICAgICAgICBzdGFja19tZW1iZXJbdV0gPSAxOwoKICAgICAgICBmb3IgKGludCB2IDogYWRqW3VdKSB7CiAgICAgICAgICAgIGlmIChkaXNjW3ZdID09IC0xKSB7CiAgICAgICAgICAgICAgICBkZnModik7CiAgICAgICAgICAgICAgICBsb3dbdV0gPSBtaW4obG93W3VdLCBsb3dbdl0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHN0YWNrX21lbWJlclt2XSkgewogICAgICAgICAgICAgICAgbG93W3VdID0gbWluKGxvd1t1XSwgZGlzY1t2XSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChsb3dbdV0gPT0gZGlzY1t1XSkgewogICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgaW50IHcgPSBzdC50b3AoKTsKICAgICAgICAgICAgICAgIHN0LnBvcCgpOwogICAgICAgICAgICAgICAgc3RhY2tfbWVtYmVyW3ddID0gMDsKICAgICAgICAgICAgICAgIHNjY19pZFt3XSA9IHNjY19jb3VudDsKICAgICAgICAgICAgICAgIGlmICh3ID09IHUpIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNjY19jb3VudCsrOwogICAgICAgIH0KICAgIH0KCiAgICB2ZWN0b3I8aW50PiBnZXRfc2NjX2lkKCkgewogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGlmIChkaXNjW2ldID09IC0xKSBkZnMoaSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzY2NfaWQ7CiAgICB9Cn07CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CgogICAgaW50IHQ7IGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuLCBtOyBjaW4gPj4gbiA+PiBtOwogICAgICAgIHZlY3RvcjxpbnQ+IGEobik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIGNpbiA+PiBhW2ldOwoKICAgICAgICB2ZWN0b3I8dmVjdG9yPGludD4+IGFkaihuKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG07IGkrKykgewogICAgICAgICAgICBpbnQgdSx2OyBjaW4gPj4gdSA+PiB2OyB1LS07IHYtLTsKICAgICAgICAgICAgYWRqW3VdLnB1c2hfYmFjayh2KTsKICAgICAgICB9CgogICAgICAgIFNDQyBzY2MoYWRqKTsKICAgICAgICB2ZWN0b3I8aW50PiBzY2NfaWQgPSBzY2MuZ2V0X3NjY19pZCgpOwogICAgICAgIGludCBzY2NfY291bnQgPSBzY2Muc2NjX2NvdW50OwoKICAgICAgICAvLyBCdWlsZCBjb25kZW5zYXRpb24gZ3JhcGggaW4tZGVncmVlCiAgICAgICAgdmVjdG9yPGludD4gaW5kZWcoc2NjX2NvdW50LCAwKTsKCiAgICAgICAgZm9yIChpbnQgdSA9IDA7IHUgPCBuOyB1KyspIHsKICAgICAgICAgICAgZm9yIChpbnQgdiA6IGFkalt1XSkgewogICAgICAgICAgICAgICAgaWYgKHNjY19pZFt1XSAhPSBzY2NfaWRbdl0pIHsKICAgICAgICAgICAgICAgICAgICBpbmRlZ1tzY2NfaWRbdl1dKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEZvciBlYWNoIFNDQywgY2hlY2sgaWYgaXQgaGFzIG1lc3NlbmdlcnMgaW5pdGlhbGx5CiAgICAgICAgdmVjdG9yPGJvb2w+IGhhc19tZXNzZW5nZXIoc2NjX2NvdW50LCBmYWxzZSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgaWYgKGFbaV0gPiAwKSBoYXNfbWVzc2VuZ2VyW3NjY19pZFtpXV0gPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgLy8gQ291bnQgU0NDcyB3aXRoIGluZGVnID09IDAKICAgICAgICBpbnQgcmVzID0gMDsKICAgICAgICBib29sIHBvc3NpYmxlID0gdHJ1ZTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNjY19jb3VudDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpbmRlZ1tpXSA9PSAwKSB7CiAgICAgICAgICAgICAgICBpZiAoIWhhc19tZXNzZW5nZXJbaV0pIHsKICAgICAgICAgICAgICAgICAgICAvLyBObyBtZXNzZW5nZXIgaW4gdGhpcyBTQ0MgYW5kIG5vIGluY29taW5nIGVkZ2VzOiBpbXBvc3NpYmxlCiAgICAgICAgICAgICAgICAgICAgcG9zc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvdXQgPDwgKHBvc3NpYmxlID8gcmVzIDogLTEpIDw8ICJcbiI7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@6ba8d61782eb:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@6ba8d61782eb:/app# 