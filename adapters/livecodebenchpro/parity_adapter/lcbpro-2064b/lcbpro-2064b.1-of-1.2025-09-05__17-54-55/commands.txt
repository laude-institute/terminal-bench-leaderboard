['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CiAgICBpbnQgdDsgY2luID4+IHQ7CiAgICB3aGlsZSAodC0tKSB7CiAgICAgICAgaW50IG47IGNpbiA+PiBuOwogICAgICAgIHZlY3RvcjxpbnQ+IGEobik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIGNpbiA+PiBhW2ldOwoKICAgICAgICAvLyBDb3VudCBmcmVxdWVuY3kgb2YgZWFjaCBlbGVtZW50CiAgICAgICAgdW5vcmRlcmVkX21hcDxpbnQsaW50PiBmcmVxOwogICAgICAgIGZvciAoYXV0byB4IDogYSkgZnJlcVt4XSsrOwoKICAgICAgICBpbnQgb3JpZ2luYWxfc2NvcmUgPSBuIC0gKGludClmcmVxLnNpemUoKTsKCiAgICAgICAgLy8gSWYgb3JpZ2luYWwgYXJyYXkgaXMgZW1wdHkgKG49PTApIG9yIGFsbCBkaXN0aW5jdCAoc2NvcmU9MCksIGFuc3dlciBtaWdodCBiZSAwIG9yIHJlbW92aW5nIGEgc3ViYXJyYXkKICAgICAgICAvLyBXZSB3YW50IHRvIHRyeSByZW1vdmluZyBvbmUgc3ViYXJyYXkgdG8gbWF4aW1pemUgc2NvcmUgPSBsZW5ndGggLSBkaXN0aW5jdCBlbGVtZW50cwoKICAgICAgICAvLyBXZSB0cnkgdG8gcmVtb3ZlIHN1YmFycmF5IFtsLCByXSB0byBnZXQgYiA9IGEgd2l0aG91dCBbbCwgcl0KICAgICAgICAvLyBTY29yZShiKSA9IHxifCAtIGRpc3RpbmN0KGIpCiAgICAgICAgLy8gV2Ugd2FudCB0byBtYXhpbWl6ZSBzY29yZShiKSwgYW5kIGFtb25nIG1heCBzY29yZSBjaG9vc2UgbWluaW1hbCBsZW5ndGggb2YgYgoKICAgICAgICAvLyBBcHByb2FjaDoKICAgICAgICAvLyBGb3IgZWFjaCBwb3NpdGlvbiwgdHJ5IHRvIGZpbmQgbWluaW1hbCBkaXN0aW5jdCBlbGVtZW50cyBpbiBwcmVmaXggYW5kIHN1ZmZpeAoKICAgICAgICB2ZWN0b3I8aW50PiBwcmVmaXhfZGlzdGluY3QobisxLDApLCBzdWZmaXhfZGlzdGluY3QobisxLDApOwogICAgICAgIHVub3JkZXJlZF9zZXQ8aW50PiBzZWVuOwoKICAgICAgICAvLyBwcmVmaXggZGlzdGluY3QgY291bnQKICAgICAgICBzZWVuLmNsZWFyKCk7CiAgICAgICAgZm9yIChpbnQgaT0wOyBpPG47IGkrKykgewogICAgICAgICAgICBzZWVuLmluc2VydChhW2ldKTsKICAgICAgICAgICAgcHJlZml4X2Rpc3RpbmN0W2krMV0gPSAoaW50KXNlZW4uc2l6ZSgpOwogICAgICAgIH0KCiAgICAgICAgLy8gc3VmZml4IGRpc3RpbmN0IGNvdW50CiAgICAgICAgc2Vlbi5jbGVhcigpOwogICAgICAgIGZvciAoaW50IGk9bi0xOyBpPj0wOyBpLS0pIHsKICAgICAgICAgICAgc2Vlbi5pbnNlcnQoYVtpXSk7CiAgICAgICAgICAgIHN1ZmZpeF9kaXN0aW5jdFtpXSA9IChpbnQpc2Vlbi5zaXplKCk7CiAgICAgICAgfQoKICAgICAgICAvLyBXZSB3YW50IHRvIHBpY2sgbCxyIHRvIHJlbW92ZSBbbCxyXSwgc28gdGhlIG5ldyBhcnJheSBpcyBhWzAuLmwtMV0rYVtyKzEuLm4tMV0KICAgICAgICAvLyBsZW5ndGggYWZ0ZXIgcmVtb3ZhbCA9IG4gLSAoci1sKzEpCiAgICAgICAgLy8gZGlzdGluY3QgYWZ0ZXIgcmVtb3ZhbCA9IGRpc3RpbmN0IGluIHByZWZpeCArIGRpc3RpbmN0IGluIHN1ZmZpeCBtaW51cyBkdXBsaWNhdGVzCiAgICAgICAgLy8gV2UgdHJ5IHRvIGZpbmQgbCxyIHNvIHRoYXQgc2NvcmUgPSBsZW5ndGhfYWZ0ZXJfcmVtb3ZhbCAtIGRpc3RpbmN0X2FmdGVyX3JlbW92YWwgaXMgbWF4aW1pemVkCgogICAgICAgIC8vIFRvIGVmZmljaWVudGx5IGZpbmQgZHVwbGljYXRlcyBiZXR3ZWVuIHByZWZpeCBhbmQgc3VmZml4IHNldHMsIHdlIGNhbiB0cnkgYSB0d28gcG9pbnRlcnMgYXBwcm9hY2guCgogICAgICAgIC8vIExldCdzIHRyeSBhbGwgbCBmcm9tIDAgdG8gbiwgYW5kIG1vdmUgciBmcm9tIGwtMSB1cCB0byBuLTEKICAgICAgICAvLyBBY3R1YWxseSwgdG8gZWZmaWNpZW50bHkgc29sdmUsIHdlIGNhbiB0cnkgdGhlIGZvbGxvd2luZzoKCiAgICAgICAgLy8gV2UnbGwgdHJ5IHRvIGZpeCBhIHByZWZpeCAoZnJvbSBsZWZ0KSBhbmQgc3VmZml4IChmcm9tIHJpZ2h0KSwgYW5kIHJlbW92ZSB0aGUgbWlkZGxlIHBhcnQuCgogICAgICAgIC8vIFdlJ2xsIHRyeSB0byBmaW5kIHRoZSBtaW5pbWFsIGxlbmd0aCBtaWRkbGUgc3ViYXJyYXkgdG8gcmVtb3ZlIHRoYXQgbWF4aW1pemVzIHRoZSBzY29yZS4KCiAgICAgICAgaW50IG1heF9zY29yZSA9IG9yaWdpbmFsX3Njb3JlOwogICAgICAgIGludCBhbnNfbCA9IDAsIGFuc19yID0gLTE7IC8vIG5vIHJlbW92YWwKCiAgICAgICAgLy8gV2UnbGwgdHJ5IHRvIGZpbmQgaW50ZXJ2YWxzIHRvIHJlbW92ZSB0aGF0IGltcHJvdmUgc2NvcmUKCiAgICAgICAgLy8gV2UgY2FuIHRyeSBhbGwgbCBmcm9tIDAgdG8gbiwgYW5kIGJpbmFyeSBzZWFyY2ggciB0byBtaW5pbWl6ZSBmaW5hbCBsZW5ndGgKCiAgICAgICAgLy8gVG8gbWFrZSBpdCBlZmZpY2llbnQgd2UgdXNlIHR3byBwb2ludGVycyBhbmQgZnJlcXVlbmN5IG1hcHMKCiAgICAgICAgdW5vcmRlcmVkX21hcDxpbnQsaW50PiBmcmVxX3ByZWZpeDsKICAgICAgICB1bm9yZGVyZWRfbWFwPGludCxpbnQ+IGZyZXFfc3VmZml4ID0gZnJlcTsKCiAgICAgICAgaW50IGRpc3RpbmN0X3ByZWZpeCA9IDA7CiAgICAgICAgaW50IGRpc3RpbmN0X3N1ZmZpeCA9IChpbnQpZnJlcS5zaXplKCk7CgogICAgICAgIGludCByID0gMDsKICAgICAgICBmb3IgKGludCBsID0gMDsgbCA8PSBuOyBsKyspIHsKICAgICAgICAgICAgLy8gTW92ZSByIGZvcndhcmQgd2hpbGUgcG9zc2libGUKICAgICAgICAgICAgd2hpbGUgKHIgPCBuKSB7CiAgICAgICAgICAgICAgICBpbnQgeCA9IGFbcl07CiAgICAgICAgICAgICAgICBmcmVxX3N1ZmZpeFt4XS0tOwogICAgICAgICAgICAgICAgaWYgKGZyZXFfc3VmZml4W3hdID09IDApIGRpc3RpbmN0X3N1ZmZpeC0tOwoKICAgICAgICAgICAgICAgIC8vIGRpc3RpbmN0IGVsZW1lbnRzIGFmdGVyIHJlbW92YWwgPSBkaXN0aW5jdF9wcmVmaXggKyBkaXN0aW5jdF9zdWZmaXgKICAgICAgICAgICAgICAgIGludCBsZW5ndGhfYWZ0ZXIgPSBuIC0gKHIgLSBsICsgMSk7CiAgICAgICAgICAgICAgICBpbnQgZGlzdGluY3RfYWZ0ZXIgPSBkaXN0aW5jdF9wcmVmaXggKyBkaXN0aW5jdF9zdWZmaXg7CiAgICAgICAgICAgICAgICBpbnQgc2NvcmUgPSBsZW5ndGhfYWZ0ZXIgLSBkaXN0aW5jdF9hZnRlcjsKCiAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPiBtYXhfc2NvcmUgfHwgKHNjb3JlID09IG1heF9zY29yZSAmJiBsZW5ndGhfYWZ0ZXIgPCAobiAtIChhbnNfciAtIGFuc19sICsgMSkpKSkgewogICAgICAgICAgICAgICAgICAgIG1heF9zY29yZSA9IHNjb3JlOwogICAgICAgICAgICAgICAgICAgIGFuc19sID0gbDsKICAgICAgICAgICAgICAgICAgICBhbnNfciA9IHI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcisrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIE1vdmUgbCBmb3J3YXJkCiAgICAgICAgICAgIGlmIChsID09IG4pIGJyZWFrOwogICAgICAgICAgICBpbnQgeCA9IGFbbF07CiAgICAgICAgICAgIGZyZXFfcHJlZml4W3hdKys7CiAgICAgICAgICAgIGlmIChmcmVxX3ByZWZpeFt4XSA9PSAxKSBkaXN0aW5jdF9wcmVmaXgrKzsKICAgICAgICAgICAgLy8gUmVzdG9yZSBmcmVxX3N1ZmZpeCBmb3IgdGhlIGVsZW1lbnQgYXQgbCBpZiBsIDw9IHIKICAgICAgICAgICAgaWYgKGwgPD0gcikgewogICAgICAgICAgICAgICAgZnJlcV9zdWZmaXhbeF0rKzsKICAgICAgICAgICAgICAgIGlmIChmcmVxX3N1ZmZpeFt4XSA9PSAxKSBkaXN0aW5jdF9zdWZmaXgrKzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGFuc19yID09IC0xKSB7CiAgICAgICAgICAgIC8vIE5vIHJlbW92YWwKICAgICAgICAgICAgY291dCA8PCAwIDw8ICJcbiI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gT3V0cHV0IDEtYmFzZWQgaW5kaWNlcwogICAgICAgICAgICBjb3V0IDw8IGFuc19sKzEgPDwgIiAiIDw8IGFuc19yKzEgPDwgIlxuIjsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
