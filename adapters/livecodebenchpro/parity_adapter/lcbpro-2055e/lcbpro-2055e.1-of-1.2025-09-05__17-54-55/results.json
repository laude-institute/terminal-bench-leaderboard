{
    "id": "b8eddf2d-00a8-467a-a3c7-d95d59e2fea1",
    "trial_name": "lcbpro-2055e.1-of-1.2025-09-05__17-54-55",
    "task_id": "lcbpro-2055e",
    "instruction": "LiveCodeBench Pro (Mini) - external judge.\n\nThe agent must create a C++17 solution file at /app/main.cpp.\nThis task does not include local test cases. Instead, the test harness:\n  1) POSTs the code to the external judge (/submit) to get a sid,\n  2) polls GET /result/{sid}?short=1 until status == \"done\",\n  3) passes only if the judge returns passed == true.\n\nEnvironment variables (overridable at runtime):\n  - BASE_URL: judge base URL (default http://38.80.122.117:8081)\n  - PID: problem id (default 2055E)\n  - LANG: language (default cpp)\n  - CODE_PATH: path to code (default /app/main.cpp)\n  - JUDGE_TIMEOUT_SECS: poll timeout seconds (default 120)\n\nOn the next new moon, the universe will reset, beginning with Florida. It's up to Florida Man to stop it, but he first needs to find an important item.\n\nThere are $n$ haystacks labelled from $1$ to $n$, where haystack $i$ contains $a_i$ haybales. One of the haystacks has a needle hidden beneath it, but you do not know which one. Your task is to move the haybales so that each haystack is emptied at least once, allowing you to check if the needle is hidden under that particular haystack.\n\nHowever, the process is not that simple. Once a haystack $i$ is emptied for the first time, it will be assigned a height limit and can no longer contain more than $b_i$ haybales. More formally, a move is described as follows:\n\n- Choose two haystacks $i$ and $j$. If haystack $i$ has not been emptied before, or haystack $i$ contains strictly less than $b_i$ haybales, you may move exactly $1$ haybale from haystack $j$ to haystack $i$.\n\nNote: Before a haystack is emptied, it has no height limit, and you can move as many haybales as you want onto that haystack.\n\nCompute the minimum number of moves required to ensure that each haystack is emptied at least once, or report that it is impossible.\n\n### Input\n\nEach test contains multiple test cases. The first line contains the number of test cases $t$ ($1 \\le t \\le 10^4$). The description of the test cases follows.\n\nThe first line of each test case contains a single integer $n$ ($2\\le n\\le 5\\cdot 10^5$) -- the number of haystacks.\n\nThe $i$-th of the next $n$ lines contains two integers $a_i$ and $b_i$ ($1\\le a_i, b_i\\le 10^9$) -- the initial number of haybales in the $i$-th haystack, and the height limit that it is assigned after it is emptied for the first time.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $5 \\cdot 10^5$.\n\n### Output\n\nFor each test case, print a single integer -- the minimum number of moves required to ensure that each haystack is emptied at least once. If it is not possible to empty each haystack at least once, output -1.\n\n### Example\n\n#### Input #1\n\n```\n\n7\n\n2\n\n3 5\n\n2 4\n\n2\n\n10 1\n\n1 10\n\n3\n\n1 3\n\n4 3\n\n1 1\n\n3\n\n5 4\n\n2 4\n\n1 10\n\n6\n\n2 1\n\n3 3\n\n5 4\n\n1 5\n\n1 6\n\n1 8\n\n5\n\n3 2\n\n1 2\n\n1 1\n\n1 3\n\n6 5\n\n2\n\n5 10\n\n7 12\n\n```\n\n#### Output #1\n\n```\n8\n-1\n8\n9\n14\n15\n19\n```\n\n### Note\n\nIn the first test case, we can do the following sequence of moves:\n\n- Move $3$ haybales from haystack $1$ to haystack $2$. Haystack $1$ is now emptied, and is assigned a height limit of $5$.\n- Move $5$ haybales from haystack $2$ to haystack $1$. Haystack $2$ is now emptied, and is assigned a height limit of $4$.\n\nThe above sequence requires $3 + 5 = 8$ moves. It is not possible to use less than $8$ moves as the following sequence of moves is invalid:\n\n- Move $2$ haybales from haystack $2$ to haystack $1$. Haystack $2$ is now emptied, and is assigned a height limit of $4$.\n- Move $4$ haybales from haystack $1$ to haystack $2$. Haystack $1$ now has $1$ haybale, while haystack $2$ has $4$ haybales.\n- Haystack $1$ cannot be emptied as haystack $2$ is already at its height limit of $4$, so no more haybales can be moved from haystack $1$ to haystack $2$.\n\nIn the second test case, the task is impossible. This is because the height limits of both haystacks are too small that once one of the haystacks is emptied, the other haystack cannot be emptied due to the small height limits.\n\nIn the third test case, the following sequence of moves can be shown to be optimal:\n\n- Move $1$ haybale from haystack $1$ to haystack $3$. Haystack $1$ is now emptied, and is assigned a height limit of $3$.\n- Move $3$ haybales from haystack $2$ to haystack $1$.\n- Move $1$ haybale from haystack $2$ to haystack $3$. Haystack $2$ is now emptied and is assigned a height limit of $3$.\n- Move $3$ haybales from haystack $3$ to haystack $2$. Haystack $3$ is now emptied, and is assigned a height limit of $1$.\n\nThe above sequence requires $1 + 3 + 1 + 3 = 8$ moves.",
    "is_resolved": false,
    "failure_mode": "unset",
    "parser_results": {
        "test_external_judge": "failed"
    },
    "recording_path": "2025-09-05__17-54-55/lcbpro-2055e/lcbpro-2055e.1-of-1.2025-09-05__17-54-55/sessions/agent.cast",
    "total_input_tokens": 1592,
    "total_output_tokens": 620,
    "trial_started_at": "2025-09-06T01:10:52.975215+00:00",
    "trial_ended_at": "2025-09-06T01:11:42.127583+00:00",
    "agent_started_at": "2025-09-06T01:11:07.058297+00:00",
    "agent_ended_at": "2025-09-06T01:11:14.798210+00:00",
    "test_started_at": "2025-09-06T01:11:18.144601+00:00",
    "test_ended_at": "2025-09-06T01:11:21.956063+00:00"
}