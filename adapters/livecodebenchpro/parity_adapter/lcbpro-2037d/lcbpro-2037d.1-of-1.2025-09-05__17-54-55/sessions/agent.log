[?2004hroot@6e3bd91db9b3:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@6e3bd91db9b3:/app# clear
[?2004l[H[J[3J[?2004hroot@6e3bd91db9b3:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgpzdHJ1Y3QgSHVyZGxlIHsKICAgIGludDY0X3QgbCwgcjsKfTsKCnN0cnVjdCBQb3dlclVwIHsKICAgIGludDY0X3QgeCwgdjsKfTsKCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKCiAgICBpbnQgdDsgY2luID4+IHQ7CiAgICB3aGlsZSAodC0tKSB7CiAgICAgICAgaW50IG4sIG07CiAgICAgICAgaW50NjRfdCBMOwogICAgICAgIGNpbiA+PiBuID4+IG0gPj4gTDsKCiAgICAgICAgdmVjdG9yPEh1cmRsZT4gaHVyZGxlcyhuKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBjaW4gPj4gaHVyZGxlc1tpXS5sID4+IGh1cmRsZXNbaV0ucjsKICAgICAgICB9CgogICAgICAgIHZlY3RvcjxQb3dlclVwPiBwb3dlclVwcyhtKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG07IGkrKykgewogICAgICAgICAgICBjaW4gPj4gcG93ZXJVcHNbaV0ueCA+PiBwb3dlclVwc1tpXS52OwogICAgICAgIH0KCiAgICAgICAgLy8gV2Ugd2lsbCBzcGxpdCB0aGUgcGF0aCBpbnRvIHNlZ21lbnRzIHNlcGFyYXRlZCBieSBodXJkbGVzCiAgICAgICAgLy8gVGhlIGludGVydmFscyB3aGVyZSBNdWFsYW5pIGNhbiBsYW5kIGFyZTogWzEsIGxfMS0xXSwgW3JfMSsxLCBsXzItMV0sIC4uLiwgW3JfbisxLCBMXQoKICAgICAgICAvLyBDcmVhdGUgaW50ZXJ2YWxzIG9mIGZyZWUgcGF0aAogICAgICAgIHZlY3RvcjxwYWlyPGludDY0X3QsaW50NjRfdD4+IGZyZWVfaW50ZXJ2YWxzOwogICAgICAgIGludDY0X3QgcHJldl9lbmQgPSAxOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGlmIChwcmV2X2VuZCA8PSBodXJkbGVzW2ldLmwgLSAxKSB7CiAgICAgICAgICAgICAgICBmcmVlX2ludGVydmFscy5lbXBsYWNlX2JhY2socHJldl9lbmQsIGh1cmRsZXNbaV0ubCAtIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHByZXZfZW5kID0gaHVyZGxlc1tpXS5yICsgMTsKICAgICAgICB9CiAgICAgICAgaWYgKHByZXZfZW5kIDw9IEwpIHsKICAgICAgICAgICAgZnJlZV9pbnRlcnZhbHMuZW1wbGFjZV9iYWNrKHByZXZfZW5kLCBMKTsKICAgICAgICB9CgogICAgICAgIC8vIEdyb3VwIHBvd2VyLXVwcyBieSBwb3NpdGlvbgogICAgICAgIG1hcDxpbnQ2NF90LCB2ZWN0b3I8aW50NjRfdD4+IHBvc19wb3dlcnVwczsKICAgICAgICBmb3IgKGNvbnN0IGF1dG8mIHB1IDogcG93ZXJVcHMpIHsKICAgICAgICAgICAgcG9zX3Bvd2VydXBzW3B1LnhdLnB1c2hfYmFjayhwdS52KTsKICAgICAgICB9CgogICAgICAgIC8vIFRoZSBwcm9ibGVtIHJlZHVjZXMgdG8ganVtcGluZyBmcm9tIDEgdG8gTCB0aHJvdWdoIGZyZWUgaW50ZXJ2YWxzLAogICAgICAgIC8vIGNvbGxlY3RpbmcgbWluaW1hbCBudW1iZXIgb2YgcG93ZXItdXBzIHRvIGluY3JlYXNlIGp1bXAgcG93ZXIuCiAgICAgICAgCiAgICAgICAgLy8gV2UnbGwgcHJvY2VzcyBmcmVlIGludGVydmFscyBpbiBvcmRlci4KICAgICAgICAvLyBGb3IgZWFjaCBpbnRlcnZhbCwgd2UgdHJhY2sgdGhlIG1heGltdW0gcmVhY2hhYmxlIHBvc2l0aW9uIGFuZCB0aGUKICAgICAgICAvLyBtaW5pbWFsIG51bWJlciBvZiBwb3dlci11cHMgY29sbGVjdGVkIHRvIHJlYWNoIHRoYXQgcG9zaXRpb24uCgogICAgICAgIC8vIFdlIHN0YXJ0IGF0IHBvc2l0aW9uIDEgd2l0aCBqdW1wIHBvd2VyIDEgYW5kIDAgcG93ZXItdXBzIGNvbGxlY3RlZC4KCiAgICAgICAgc3RydWN0IFN0YXRlIHsKICAgICAgICAgICAgaW50NjRfdCBwb3M7CiAgICAgICAgICAgIGludDY0X3QgcG93ZXI7CiAgICAgICAgICAgIGludCBjb2xsZWN0ZWQ7CiAgICAgICAgfTsKCiAgICAgICAgLy8gV2Ugd2lsbCB1c2UgYSBncmVlZHkgYXBwcm9hY2ggd2l0aCBhIHByaW9yaXR5IHF1ZXVlOgogICAgICAgIC8vIEF0IGVhY2ggcmVhY2hhYmxlIHBvc2l0aW9uLCB3ZSBjb25zaWRlciBjb2xsZWN0aW5nIHBvd2VyLXVwcyB0byBleHRlbmQganVtcCBwb3dlci4KCiAgICAgICAgLy8gQmVjYXVzZSBMIGNhbiBiZSBsYXJnZSwgYW5kIG51bWJlciBvZiBodXJkbGVzIGFuZCBwb3dlci11cHMgYXJlIGxhcmdlLCB3ZSBtdXN0IGJlIGVmZmljaWVudC4KCiAgICAgICAgLy8gSWRlYToKICAgICAgICAvLyBXZSB3aWxsIHNpbXVsYXRlIHRoZSBqb3VybmV5IGludGVydmFsIGJ5IGludGVydmFsLgoKICAgICAgICAvLyBGb3IgZWFjaCBpbnRlcnZhbCwgd2Uga25vdyBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucy4KICAgICAgICAvLyBXZSBrbm93IHRoZSBjdXJyZW50IG1heCByZWFjaGFibGUgcG9zaXRpb24gYW5kIGp1bXAgcG93ZXIuCgogICAgICAgIC8vIFdlJ2xsIGtlZXAgdHJhY2sgb2YgdGhlIGN1cnJlbnQgcG9zaXRpb24gYW5kIGp1bXAgcG93ZXIuCiAgICAgICAgCiAgICAgICAgLy8gV2UnbGwgcHJvY2VzcyBwb3dlci11cHMgaW4gb3JkZXIgd2l0aGluIHRoZSBjdXJyZW50IGludGVydmFsLgoKICAgICAgICBpbnQ2NF90IGN1cnJlbnRfcG9zID0gMTsKICAgICAgICBpbnQ2NF90IGp1bXBfcG93ZXIgPSAxOwogICAgICAgIGludCBjb2xsZWN0ZWRfY291bnQgPSAwOwoKICAgICAgICBib29sIGltcG9zc2libGUgPSBmYWxzZTsKCiAgICAgICAgLy8gV2UnbGwgcHJvY2VzcyBpbnRlcnZhbHMgb25lIGJ5IG9uZS4KICAgICAgICBmb3IgKGF1dG8mIGludGVydmFsIDogZnJlZV9pbnRlcnZhbHMpIHsKICAgICAgICAgICAgaW50NjRfdCBzdGFydCA9IGludGVydmFsLmZpcnN0OwogICAgICAgICAgICBpbnQ2NF90IGVuZCA9IGludGVydmFsLnNlY29uZDsKCiAgICAgICAgICAgIC8vIFdlIG11c3QgYmUgYWJsZSB0byByZWFjaCBzdGFydCBmcm9tIGN1cnJlbnRfcG9zLgogICAgICAgICAgICBpZiAoY3VycmVudF9wb3MgPCBzdGFydCkgewogICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgY2FuIGp1bXAgZnJvbSBjdXJyZW50X3BvcyB0byBzdGFydAogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfcG9zICsganVtcF9wb3dlciA8IHN0YXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgaW1wb3NzaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjdXJyZW50X3BvcyA9IHN0YXJ0OwogICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRfcG9zID4gZW5kKSB7CiAgICAgICAgICAgICAgICAvLyBBbHJlYWR5IGJleW9uZCB0aGlzIGludGVydmFsCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gTm93IHdlIGFyZSBhdCBjdXJyZW50X3BvcyB3aXRoaW4gW3N0YXJ0LCBlbmRdCiAgICAgICAgICAgIC8vIGdvYWwgaXMgdG8gcmVhY2ggYXQgbGVhc3QgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBDb2xsZWN0IGFsbCBwb3dlci11cHMgaW4gdGhpcyBpbnRlcnZhbCwgc29ydGVkIGJ5IHBvc2l0aW9uCiAgICAgICAgICAgIC8vIFdlJ2xsIHRyeSB0byB1c2UgcG93ZXItdXBzIGdyZWVkaWx5IHRvIGV4dGVuZCBqdW1wIHBvd2VyIHdoZW4gbmVlZGVkLgogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRXh0cmFjdCBwb3dlci11cHMgaW4gdGhpcyBpbnRlcnZhbAogICAgICAgICAgICB2ZWN0b3I8cGFpcjxpbnQ2NF90LGludDY0X3Q+PiBpbnRlcnZhbF9wb3dlcnVwczsgLy8gKHgsIHYpCiAgICAgICAgICAgIGF1dG8gaXQgPSBwb3NfcG93ZXJ1cHMubG93ZXJfYm91bmQoc3RhcnQpOwogICAgICAgICAgICB3aGlsZSAoaXQgIT0gcG9zX3Bvd2VydXBzLmVuZCgpICYmIGl0LT5maXJzdCA8PSBlbmQpIHsKICAgICAgICAgICAgICAgIGZvciAoYXV0byYgdiA6IGl0LT5zZWNvbmQpIHsKICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbF9wb3dlcnVwcy5lbXBsYWNlX2JhY2soaXQtPmZpcnN0LCB2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICsraXQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFNvcnQgcG93ZXItdXBzIGJ5IHBvc2l0aW9uCiAgICAgICAgICAgIHNvcnQoaW50ZXJ2YWxfcG93ZXJ1cHMuYmVnaW4oKSwgaW50ZXJ2YWxfcG93ZXJ1cHMuZW5kKCkpOwoKICAgICAgICAgICAgLy8gV2UnbGwganVtcCBmb3J3YXJkIGFzIGZhciBhcyBwb3NzaWJsZSB1c2luZyBjdXJyZW50IGp1bXAgcG93ZXIuCiAgICAgICAgICAgIC8vIElmIHdlIGNhbm5vdCByZWFjaCBlbmQsIHdlIHRyeSB0byBjb2xsZWN0IHBvd2VyLXVwcyB0byBpbmNyZWFzZSBqdW1wIHBvd2VyLgoKICAgICAgICAgICAgaW50IGlkeCA9IDA7CiAgICAgICAgICAgIGludDY0X3QgbWF4X3JlYWNoID0gY3VycmVudF9wb3MgKyBqdW1wX3Bvd2VyOwoKICAgICAgICAgICAgLy8gV2UnbGwgbWFpbnRhaW4gYSBtYXgtaGVhcCBvZiBwb3dlci11cCB2YWx1ZXMgYXQgb3IgYmVmb3JlIG1heF9yZWFjaCB0byBwaWNrIHRoZSBiaWdnZXN0IGp1bXAgcG93ZXIgdXBzIGZpcnN0LgogICAgICAgICAgICBwcmlvcml0eV9xdWV1ZTxpbnQ2NF90PiBhdmFpbGFibGVfcHU7CgogICAgICAgICAgICB3aGlsZSAobWF4X3JlYWNoIDwgZW5kKSB7CiAgICAgICAgICAgICAgICAvLyBBZGQgcG93ZXItdXBzIHdoaWNoIGFyZSByZWFjaGFibGUgKHBvc2l0aW9uIDw9IG1heF9yZWFjaCkKICAgICAgICAgICAgICAgIHdoaWxlIChpZHggPCAoaW50KWludGVydmFsX3Bvd2VydXBzLnNpemUoKSAmJiBpbnRlcnZhbF9wb3dlcnVwc1tpZHhdLmZpcnN0IDw9IG1heF9yZWFjaCkgewogICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZV9wdS5wdXNoKGludGVydmFsX3Bvd2VydXBzW2lkeF0uc2Vjb25kKTsKICAgICAgICAgICAgICAgICAgICArK2lkeDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmxlX3B1LmVtcHR5KCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBObyBwb3dlci11cHMgcmVhY2hhYmxlIHRvIGV4dGVuZCBqdW1wIHBvd2VyCiAgICAgICAgICAgICAgICAgICAgaW1wb3NzaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gVGFrZSB0aGUgYmlnZ2VzdCBwb3dlci11cAogICAgICAgICAgICAgICAgaW50NjRfdCBiZXN0X3B1ID0gYXZhaWxhYmxlX3B1LnRvcCgpOwogICAgICAgICAgICAgICAgYXZhaWxhYmxlX3B1LnBvcCgpOwoKICAgICAgICAgICAgICAgIGp1bXBfcG93ZXIgKz0gYmVzdF9wdTsKICAgICAgICAgICAgICAgIGNvbGxlY3RlZF9jb3VudCsrOwogICAgICAgICAgICAgICAgbWF4X3JlYWNoID0gY3VycmVudF9wb3MgKyBqdW1wX3Bvd2VyOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW1wb3NzaWJsZSkgYnJlYWs7CgogICAgICAgICAgICAvLyBOb3cganVtcCB0byBlbmQgb2YgdGhlIGludGVydmFsCiAgICAgICAgICAgIGN1cnJlbnRfcG9zID0gZW5kOwogICAgICAgIH0KCiAgICAgICAgaWYgKGltcG9zc2libGUgfHwgY3VycmVudF9wb3MgPCBMKSB7CiAgICAgICAgICAgIGNvdXQgPDwgLTEgPDwgJ1xuJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb3V0IDw8IGNvbGxlY3RlZF9jb3VudCA8PCAnXG4nOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@6e3bd91db9b3:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@6e3bd91db9b3:/app# 