[?2004hroot@494e672827c1:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@494e672827c1:/app# clear
[?2004l[H[J[3J[?2004hroot@494e672827c1:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CiAgICBpbnQgdDsKICAgIGNpbiA+PiB0OwogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGludCBuOwogICAgICAgIGNpbiA+PiBuOwogICAgICAgIHZlY3Rvcjx2ZWN0b3I8bG9uZyBsb25nPj4gYShuLCB2ZWN0b3I8bG9uZyBsb25nPihuKSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuOyBqKyspIHsKICAgICAgICAgICAgICAgIGNpbiA+PiBhW2ldW2pdOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBXZSBjYWxjdWxhdGUgZm9yIGVhY2ggcXVldWUgdGhlIHByZWZpeCBzdW1zIG9mIGFycml2YWxzCiAgICAgICAgLy8gVGhlbiB3ZSB0cnkgdG8gYXNzaWduIHRoZSBzZXJ2aWNlIHRpbWUgdG8gbWF4aW1pemUgTUVYCiAgICAgICAgLy8gS2V5IGluc2lnaHQ6IFNlcnZpbmcgcXVldWUgaSBhdCB0aW1lIGogbWVhbnMgeF9pID0gc3VtIG9mIGFycml2YWxzIGFmdGVyIHRpbWUgagogICAgICAgIC8vIFdlIHdhbnQgdG8gYXNzaWduIHNlcnZpY2UgdGltZXMgMS4ubiB0byBxdWV1ZXMgdG8gbWF4aW1pemUgdGhlIE1FWCBvZiB0aGUgZmluYWwgeF9pCgogICAgICAgIC8vIFByZWNvbXB1dGUgc3VmZml4IHN1bXMgZm9yIGVhY2ggcXVldWUKICAgICAgICB2ZWN0b3I8bG9uZyBsb25nPiBzdWZmaXhfc3VtcyhuKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBsb25nIGxvbmcgc3VtID0gMDsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IG4gLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgICAgICAgc3VtICs9IGFbaV1bal07CiAgICAgICAgICAgICAgICBhW2ldW2pdID0gc3VtOyAvLyBhW2ldW2pdIG5vdyBzdWZmaXggc3VtIGZyb20gaiB0byBlbmQKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gV2Ugd2FudCB0byBhc3NpZ24gc2VydmljZSB0aW1lcyAwLi5uLTEgdG8gcXVldWVzLCBlYWNoIHF1ZXVlIHNlcnZlZCBleGFjdGx5IG9uY2UKICAgICAgICAvLyBBZnRlciBzZXJ2aW5nIGF0IHRpbWUgaiwgeF9pID0gc3VmZml4IHN1bSBzdGFydGluZyBhdCBqIChvciAwIGlmIHNlcnZlZCBhdCB0aW1lIGopCiAgICAgICAgLy8gQWN0dWFsbHksIGFmdGVyIHNlcnZpbmcgYXQgdGltZSBqLCB0aGUgcXVldWUgcmVzZXRzIHRvIHplcm8gaW1tZWRpYXRlbHkgYXQgdGhhdCBtb21lbnQsCiAgICAgICAgLy8gc28gdGhlIHJlbWFpbmluZyBjdXN0b21lcnMgYXJlIGFycml2YWxzIGFmdGVyIHRpbWUgai4KICAgICAgICAvLyBTbyB4X2kgPSBzdWZmaXggc3VtIGF0IGogKHdoaWNoIGluY2x1ZGVzIGFbaV1bal0pCgogICAgICAgIC8vIFNvcnQgcXVldWVzIGJ5IHRoZWlyIHN1ZmZpeCBzdW1zIGF0IGVhY2ggdGltZSBpcyBub3QgZmVhc2libGUsIGJ1dCB3ZSBjYW4gdGhpbms6CiAgICAgICAgLy8gVGhlIGZpbmFsIHhfaSBmb3IgcXVldWUgaSBkZXBlbmRzIG9uIHNlcnZpY2UgdGltZSBqIGNob3Nlbi4KCiAgICAgICAgLy8gQXBwcm9hY2g6IEZvciBlYWNoIHF1ZXVlIGksIHN0b3JlIGFsbCBzdWZmaXggc3VtcyBhW2ldW2pdIChmb3IgaiBpbiAwLi5uLTEpCiAgICAgICAgLy8gV2Ugd2FudCB0byBhc3NpZ24gZGlzdGluY3QgaiB0byBxdWV1ZXMgdG8gbWF4aW1pemUgTUVYIG9mIHRoZSBmaW5hbCB4X2kuCgogICAgICAgIC8vIFNvIHdlIHdhbnQgdG8gYXNzaWduIHNlcnZpY2UgdGltZXMgc28gdGhhdCB0aGUgbXVsdGlzZXQgb2YgeF9pIGNvdmVycyAwLi5NRVgtMQogICAgICAgIC8vIFRvIG1heGltaXplIE1FWCwgdHJ5IHRvIGFzc2lnbiB4X2kgdG8gY292ZXIgMCwxLDIsLi4uCgogICAgICAgIC8vIEV4dHJhY3QgYWxsIHBvc3NpYmxlIHhfaSB2YWx1ZXMgcGVyIHF1ZXVlIChzdWZmaXggc3VtcykKICAgICAgICAvLyBGb3IgZWFjaCBxdWV1ZSwgdGhlIHhfaSBkZXBlbmRzIG9uIHRoZSBzZXJ2aWNlIHRpbWUgYXNzaWduZWQgdG8gaXQuCgogICAgICAgIC8vIEJ1dCBwcm9ibGVtIHN0YXRlcyB0aGF0IGF0IGVhY2ggdGltZSBqLCBleGFjdGx5IG9uZSBxdWV1ZSBpcyBzZXJ2ZWQuCiAgICAgICAgLy8gU28gc2VydmljZSB0aW1lcyBqPTAuLm4tMSBhcmUgYXNzaWduZWQgYmlqZWN0aXZlbHkgdG8gcXVldWVzLgoKICAgICAgICAvLyBJZGVhOiBGb3IgZWFjaCBxdWV1ZSwgcGljayB0aGUgc3VmZml4IHN1bSBmb3IgZWFjaCBzZXJ2aWNlIHRpbWUuCiAgICAgICAgLy8gVGhlbiBmaW5kIHRoZSBtaW5pbWFsIGFzc2lnbm1lbnQgb2Ygc2VydmljZSB0aW1lcyB0byBxdWV1ZXMgc28gdGhhdCB0aGUgcmVzdWx0aW5nIHhfaSBzZXQgY29udGFpbnMgMC4uay0xIGZvciBtYXhpbXVtIGsuCgogICAgICAgIC8vIEltcGxlbWVudCBhIGJpbmFyeSBzZWFyY2ggb24gayAoTUVYIGNhbmRpZGF0ZSkKCiAgICAgICAgLy8gV2UgdHJ5IHRvIGNoZWNrIGlmIHdlIGNhbiBhc3NpZ24gc2VydmljZSB0aW1lcyB0byBxdWV1ZXMgc3VjaCB0aGF0IHRoZSBzZXQgb2YgeF9pIGNvbnRhaW5zIDAuLmstMQoKICAgICAgICAvLyBGb3IgZWFjaCBrIGluIGJpbmFyeSBzZWFyY2g6CiAgICAgICAgLy8gV2Ugd2FudCB0byBjaGVjayBpZiB0aGVyZSBleGlzdHMgYSBwZXJtdXRhdGlvbiBwIG9mIHNlcnZpY2UgdGltZXMgc28gdGhhdCBmb3IgYWxsIHYgaW4gWzAuLmstMV0sCiAgICAgICAgLy8gdGhlcmUgaXMgYSBxdWV1ZSBpIHdpdGggeF9pID0gdi4KCiAgICAgICAgLy8gVG8gY2hlY2sgdGhpcywgd2UgdHJ5IHRvIGZpbmQgYSBtYXRjaGluZyBiZXR3ZWVuIHF1ZXVlcyBhbmQgdmFsdWVzIDAuLmstMSB3aGVyZSBxdWV1ZSBpIGNhbiBwcm9kdWNlIHhfaSA9IHYgZm9yIHNvbWUgYXNzaWduZWQgc2VydmljZSB0aW1lLgoKICAgICAgICAvLyBTbyBmb3IgZWFjaCBxdWV1ZSBpLCB3ZSBmaW5kIGFsbCBzdWZmaXggc3VtcyA9IHYgd2hlcmUgdiBpbiBbMC4uay0xXS4KICAgICAgICAvLyBXZSBidWlsZCBhIGJpcGFydGl0ZSBncmFwaCBiZXR3ZWVuIHF1ZXVlcyBhbmQgdmFsdWVzIFswLi5rLTFdLCBlZGdlIGlmIHF1ZXVlIGkgY2FuIHByb2R1Y2UgdmFsdWUgdi4KICAgICAgICAvLyBUaGVuIGNoZWNrIGlmIG1heGltdW0gbWF0Y2hpbmcgc2l6ZSA9PSBrLgoKICAgICAgICAvLyBJZiB5ZXMsIHdlIGNhbiBjb3ZlciAwLi5rLTEsIHNvIE1FWCA+PSBrKzEuCgogICAgICAgIC8vIFdlIGltcGxlbWVudCBiaW5hcnkgc2VhcmNoIG9uIGsgZnJvbSAwIHRvIG4gKG1heGltdW0gTUVYIGNhbiBiZSBuKzEpLgoKICAgICAgICBpbnQgbGVmdCA9IDAsIHJpZ2h0ID0gbiArIDE7CgogICAgICAgIC8vIEJlY2F1c2UgdGhlIHN1ZmZpeCBzdW1zIGNhbiBiZSBsYXJnZSwgYnV0IE1FWCB2YWx1ZXMgYXJlIGZyb20gMCB1cHdhcmRzLAogICAgICAgIC8vIHdlIG11c3QgZmluZCB3aGljaCBzdWZmaXggc3VtcyBlcXVhbCB3aGljaCB2YWx1ZXMgZnJvbSAwLi5rLTEuCgogICAgICAgIC8vIFdlIG5lZWQgdG8gaGFuZGxlIHZhbHVlcyB1cCB0byBuIChtYXggTUVYKS4KCiAgICAgICAgLy8gVXNlIEhvcGNyb2Z0LUthcnAgZm9yIG1heGltdW0gYmlwYXJ0aXRlIG1hdGNoaW5nCgogICAgICAgIHdoaWxlIChyaWdodCAtIGxlZnQgPiAxKSB7CiAgICAgICAgICAgIGludCBtaWQgPSAobGVmdCArIHJpZ2h0KSAvIDI7CiAgICAgICAgICAgIC8vIEJ1aWxkIGdyYXBoCiAgICAgICAgICAgIC8vIExlZnQgbm9kZXM6IHF1ZXVlcyAoMC4ubi0xKQogICAgICAgICAgICAvLyBSaWdodCBub2RlczogdmFsdWVzIDAuLm1pZC0xCiAgICAgICAgICAgIHZlY3Rvcjx2ZWN0b3I8aW50Pj4gZ3JhcGgobik7CgogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYVtpXVtqXSA8IG1pZCkgewogICAgICAgICAgICAgICAgICAgICAgICBncmFwaFtpXS5wdXNoX2JhY2soKGludClhW2ldW2pdKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEhvcGNyb2Z0LUthcnAgaW1wbGVtZW50YXRpb24KICAgICAgICAgICAgdmVjdG9yPGludD4gbWF0Y2hSKG1pZCwgLTEpOwogICAgICAgICAgICB2ZWN0b3I8aW50PiBkaXN0KG4pOwoKICAgICAgICAgICAgZnVuY3Rpb248Ym9vbCgpPiBiZnMgPSBbJl0oKSB7CiAgICAgICAgICAgICAgICBxdWV1ZTxpbnQ+IFE7CiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChkaXN0W2ldID09IC0xICYmIG1hdGNoUi5lbXB0eSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RbaV0gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBRLnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGlzdFtpXSA9IC0xOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJvb2wgZm91bmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHdoaWxlICghUS5lbXB0eSgpKSB7CiAgICAgICAgICAgICAgICAgICAgaW50IHUgPSBRLmZyb250KCk7IFEucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgdiA6IGdyYXBoW3VdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGludCB3ID0gbWF0Y2hSW3ZdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodyA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3ID49IDAgJiYgZGlzdFt3XSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3Rbd10gPSBkaXN0W3VdICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFEucHVzaCh3KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZ1bmN0aW9uPGJvb2woaW50KT4gZGZzID0gWyZdKGludCB1KSB7CiAgICAgICAgICAgICAgICBmb3IgKGludCB2IDogZ3JhcGhbdV0pIHsKICAgICAgICAgICAgICAgICAgICBpbnQgdyA9IG1hdGNoUlt2XTsKICAgICAgICAgICAgICAgICAgICBpZiAodyA8IDAgfHwgKGRpc3Rbd10gPT0gZGlzdFt1XSArIDEgJiYgZGZzKHcpKSkgewogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJbdl0gPSB1OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkaXN0W3VdID0gLTE7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBBY3R1YWxseSBzaW1wbGVyIHRvIGltcGxlbWVudCBjbGFzc2ljIEt1aG4ncyBhbGdvcml0aG0gYmVjYXVzZSBuIDw9IDMwMAogICAgICAgICAgICB2ZWN0b3I8aW50PiBtYXRjaChtaWQsIC0xKTsKICAgICAgICAgICAgZnVuY3Rpb248Ym9vbChpbnQsIHZlY3Rvcjxib29sPiYpPiBrdWhuID0gWyZdKGludCB1LCB2ZWN0b3I8Ym9vbD4gJnVzZWQpIHsKICAgICAgICAgICAgICAgIGlmICh1c2VkW3VdKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB1c2VkW3VdID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGZvciAoaW50IHYgOiBncmFwaFt1XSkgewogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaFt2XSA9PSAtMSB8fCBrdWhuKG1hdGNoW3ZdLCB1c2VkKSkgewogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFt2XSA9IHU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGludCBtYXRjaGluZyA9IDA7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgICAgICB2ZWN0b3I8Ym9vbD4gdXNlZChuLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpZiAoa3VobihpLCB1c2VkKSkgbWF0Y2hpbmcrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG1hdGNoaW5nID49IG1pZCkgewogICAgICAgICAgICAgICAgbGVmdCA9IG1pZDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJpZ2h0ID0gbWlkOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb3V0IDw8IGxlZnQgPDwgIlxuIjsKICAgIH0KICAgIHJldHVybiAwOwp9Cg==' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@494e672827c1:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@494e672827c1:/app# 