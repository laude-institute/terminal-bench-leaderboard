['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBCaXR3aXNlIE5PUiBvZiB0d28gbnVtYmVyczogfihhIHwgYikgJiBtYXNrCi8vIFNpbmNlIGsgPD0gMTcsIG1hc2sgPSAoMSA8PCBrKSAtIDEKCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKCiAgICBpbnQgdDsgY2luID4+IHQ7CiAgICB3aGlsZSAodC0tKSB7CiAgICAgICAgaW50IG4sIGs7IGNpbiA+PiBuID4+IGs7CiAgICAgICAgdmVjdG9yPGludD4gYShuKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgY2luID4+IGFbaV07CgogICAgICAgIGludCBtYXNrID0gKDEgPDwgaykgLSAxOwoKICAgICAgICAvLyBXZSB3YW50IHRvIGZpbmQgZm9yIGVhY2ggaSB0aGUgbWF4aW11bSBiaXR3aXNlIE5PUiBvZiBhbnkgc3ViYXJyYXkgY29udGFpbmluZyBpLgogICAgICAgIC8vIERlZmluZSBub3IoYSxiKSA9IH4oYSB8IGIpICYgbWFzay4KICAgICAgICAvLyBCaXR3aXNlIE5PUiBpcyBhc3NvY2lhdGl2ZSBzbyBub3IoYSwgYiwgYykgPSBub3Iobm9yKGEsIGIpLCBjKS4KCiAgICAgICAgLy8gT2JzZXJ2YXRpb246CiAgICAgICAgLy8gU2luY2Ugbm9yKHgseSkgPD0gbWluKHgseSkgaW4gZ2VuZXJhbCBiaXR3aXNlIHRlcm1zIChkdWUgdG8gfiBhbmQgJiksIHRoZSB2YWx1ZXMgZGVjcmVhc2Ugb3IgdmFyeS4KICAgICAgICAvLyBXZSBjYW4gcHJvY2VzcyBmcm9tIGxlZnQgdG8gcmlnaHQgYW5kIHJpZ2h0IHRvIGxlZnQgdG8gZmluZCBtYXhpbXVtcyBvZiBzdWJhcnJheXMgY292ZXJpbmcgZWFjaCBpbmRleC4KCiAgICAgICAgLy8gU3RyYXRlZ3k6CiAgICAgICAgLy8gRm9yIGVhY2ggaW5kZXggaSwgY29uc2lkZXIgc3ViYXJyYXlzIGNvbnRhaW5pbmcgaS4KICAgICAgICAvLyBGb3IgZWFjaCBwb3NpdGlvbiBpLCB3ZSBmaW5kIG1heGltdW0gbm9yIG9mIHN1YmFycmF5cyBlbmRpbmcgYXQgaSAobGVmdCB0byByaWdodCkuCiAgICAgICAgLy8gU2ltaWxhcmx5IG1heGltdW0gbm9yIG9mIHN1YmFycmF5cyBzdGFydGluZyBhdCBpIChyaWdodCB0byBsZWZ0KS4KICAgICAgICAvLyBUaGVuIGNvbWJpbmUgdGhlc2UgdG8gZ2V0IG1heGltdW0gZm9yIHN1YmFycmF5cyBjb250YWluaW5nIGkuCgogICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBub3Igb3BlcmF0aW9uIGlzIG5vdCBtb25vdG9uZSBpbmNyZWFzaW5nIG9yIGRlY3JlYXNpbmcuCiAgICAgICAgLy8gQnV0IHNpbmNlIGsgaXMgc21hbGwgKDw9MTcpLCB3ZSBjYW4gdXNlIGEgbWV0aG9kIHNpbWlsYXIgdG8gIkNvbnZleCBIdWxsIFRyaWNrIiBvciBzdGFjay1iYXNlZCBhcHByb2FjaC4KCiAgICAgICAgLy8gV2UnbGwgaW1wbGVtZW50IGEgc2VnbWVudCBhcHByb2FjaDoKICAgICAgICAvLyBXZSdsbCBrZWVwIHRyYWNrIG9mIGFsbCBwb3NzaWJsZSBub3IgdmFsdWVzIGZyb20gbGVmdCB0byByaWdodCBmb3Igc3ViYXJyYXlzIGVuZGluZyBhdCBlYWNoIHBvc2l0aW9uLgogICAgICAgIC8vIFRvIGtlZXAgaXQgZWZmaWNpZW50LCB3ZSBtYWludGFpbiBhIHZlY3RvciBvZiBwYWlycyAobm9yX3ZhbHVlLCBsZWZ0X2luZGV4KSB3aXRob3V0IGR1cGxpY2F0ZXMgYW5kIG9ubHkgaW5jcmVhc2luZyBub3JfdmFsdWVzLgoKICAgICAgICAvLyBTaW1pbGFyIGFwcHJvYWNoIGZyb20gZWRpdG9yaWFsIHNvbHV0aW9ucyBmb3Igc2ltaWxhciBiaXR3aXNlIHByb2JsZW1zOgogICAgICAgIC8vIFdlIG1haW50YWluIGEgdmVjdG9yICdjdXInIG9mIHBhaXJzICh2YWx1ZSwgc3RhcnRfaW5kZXgpIHJlcHJlc2VudGluZyBkaXN0aW5jdCBub3IgdmFsdWVzIGZvciBzdWJhcnJheXMgZW5kaW5nIGF0IGN1cnJlbnQgcG9zaXRpb24uCgogICAgICAgIHZlY3RvcjxpbnQ+IGFucyhuLCAwKTsKCiAgICAgICAgdmVjdG9yPHBhaXI8aW50LGludD4+IGN1cjsgLy8gKG5vcl92YWx1ZSwgc3RhcnRfaW5kZXgpCiAgICAgICAgdmVjdG9yPHZlY3RvcjxwYWlyPGludCxpbnQ+Pj4gbGVmdF9ub3Iobik7CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHZlY3RvcjxwYWlyPGludCxpbnQ+PiBueHQ7CiAgICAgICAgICAgIC8vIEFkZCBzdWJhcnJheSBvZiBsZW5ndGggMQogICAgICAgICAgICBueHQuZW1wbGFjZV9iYWNrKGFbaV0sIGkpOwogICAgICAgICAgICBmb3IgKGF1dG8gJnAgOiBjdXIpIHsKICAgICAgICAgICAgICAgIGludCB2YWwgPSAofihwLmZpcnN0IHwgYVtpXSkpICYgbWFzazsKICAgICAgICAgICAgICAgIGlmICh2YWwgPT0gbnh0LmJhY2soKS5maXJzdCkgY29udGludWU7CiAgICAgICAgICAgICAgICBpZiAodmFsID4gbnh0LmJhY2soKS5maXJzdCkgewogICAgICAgICAgICAgICAgICAgIG54dC5lbXBsYWNlX2JhY2sodmFsLCBwLnNlY29uZCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIFRvIG1haW50YWluIGluY3JlYXNpbmcgb3JkZXIgb2YgdmFsLCBwb3Agc21hbGxlciB2YWx1ZXMKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIW54dC5lbXB0eSgpICYmIG54dC5iYWNrKCkuZmlyc3QgPCB2YWwpIG54dC5wb3BfYmFjaygpOwogICAgICAgICAgICAgICAgICAgIG54dC5lbXBsYWNlX2JhY2sodmFsLCBwLnNlY29uZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgYW5kIGtlZXAgb25seSBuZWVkZWQKICAgICAgICAgICAgLy8gQWN0dWFsbHkgd2Uga2VlcCBvbmx5IHN0cmljdGx5IGluY3JlYXNpbmcgbm9yIHZhbHVlcwogICAgICAgICAgICByZXZlcnNlKG54dC5iZWdpbigpLCBueHQuZW5kKCkpOwogICAgICAgICAgICB2ZWN0b3I8cGFpcjxpbnQsaW50Pj4gZmlsdGVyZWQ7CiAgICAgICAgICAgIGZvciAoYXV0byAmcCA6IG54dCkgewogICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkLmVtcHR5KCkgfHwgZmlsdGVyZWQuYmFjaygpLmZpcnN0IDwgcC5maXJzdCkgZmlsdGVyZWQucHVzaF9iYWNrKHApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldmVyc2UoZmlsdGVyZWQuYmVnaW4oKSwgZmlsdGVyZWQuZW5kKCkpOwoKICAgICAgICAgICAgY3VyID0gZmlsdGVyZWQ7CiAgICAgICAgICAgIGxlZnRfbm9yW2ldID0gY3VyOwogICAgICAgIH0KCiAgICAgICAgLy8gU2ltaWxhcmx5IGZyb20gcmlnaHQgdG8gbGVmdAogICAgICAgIGN1ci5jbGVhcigpOwogICAgICAgIHZlY3Rvcjx2ZWN0b3I8cGFpcjxpbnQsaW50Pj4+IHJpZ2h0X25vcihuKTsKICAgICAgICBmb3IgKGludCBpID0gbiAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAgIHZlY3RvcjxwYWlyPGludCxpbnQ+PiBueHQ7CiAgICAgICAgICAgIG54dC5lbXBsYWNlX2JhY2soYVtpXSwgaSk7CiAgICAgICAgICAgIGZvciAoYXV0byAmcCA6IGN1cikgewogICAgICAgICAgICAgICAgaW50IHZhbCA9ICh+KHAuZmlyc3QgfCBhW2ldKSkgJiBtYXNrOwogICAgICAgICAgICAgICAgaWYgKHZhbCA9PSBueHQuYmFjaygpLmZpcnN0KSBjb250aW51ZTsKICAgICAgICAgICAgICAgIGlmICh2YWwgPiBueHQuYmFjaygpLmZpcnN0KSB7CiAgICAgICAgICAgICAgICAgICAgbnh0LmVtcGxhY2VfYmFjayh2YWwsIHAuc2Vjb25kKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCFueHQuZW1wdHkoKSAmJiBueHQuYmFjaygpLmZpcnN0IDwgdmFsKSBueHQucG9wX2JhY2soKTsKICAgICAgICAgICAgICAgICAgICBueHQuZW1wbGFjZV9iYWNrKHZhbCwgcC5zZWNvbmQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldmVyc2Uobnh0LmJlZ2luKCksIG54dC5lbmQoKSk7CiAgICAgICAgICAgIHZlY3RvcjxwYWlyPGludCxpbnQ+PiBmaWx0ZXJlZDsKICAgICAgICAgICAgZm9yIChhdXRvICZwIDogbnh0KSB7CiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWQuZW1wdHkoKSB8fCBmaWx0ZXJlZC5iYWNrKCkuZmlyc3QgPCBwLmZpcnN0KSBmaWx0ZXJlZC5wdXNoX2JhY2socCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV2ZXJzZShmaWx0ZXJlZC5iZWdpbigpLCBmaWx0ZXJlZC5lbmQoKSk7CgogICAgICAgICAgICBjdXIgPSBmaWx0ZXJlZDsKICAgICAgICAgICAgcmlnaHRfbm9yW2ldID0gY3VyOwogICAgICAgIH0KCiAgICAgICAgLy8gRm9yIGVhY2ggcG9zaXRpb24gaSwgd2Ugd2FudCBtYXggbm9yIG9mIGFueSBzdWJhcnJheSBjb250YWluaW5nIGkKICAgICAgICAvLyBTdWNoIHN1YmFycmF5IGNhbiBiZSByZXByZXNlbnRlZCBhcyBbbCwgcl0gd2l0aCBsIDw9IGkgPD0gcgogICAgICAgIC8vIE5vcihbbCwgcl0pID0gbm9yKG5vcihhX2wuLmFfaSksIG5vcihhX3tpKzF9Li5hX3IpKQogICAgICAgIC8vIFdoaWNoIGlzIG5vciBvZiBzb21lIHN1YmFycmF5IGVuZGluZyBhdCBpIGFuZCBzb21lIHN1YmFycmF5IHN0YXJ0aW5nIGF0IGkrMQoKICAgICAgICAvLyBXZSBpdGVyYXRlIGZvciBlYWNoIGk6CiAgICAgICAgLy8gRm9yIHN1YmFycmF5IGNvbnRhaW5pbmcgaSwgY2FuIGJlIG9ubHkgbGVmdCBzaWRlLCBvbmx5IHJpZ2h0IHNpZGUgb3IgbWVyZ2luZyBsZWZ0IGFuZCByaWdodC4KCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgaW50IHJlcyA9IGFbaV07CiAgICAgICAgICAgIC8vIENoZWNrIHN1YmFycmF5cyBlbmRpbmcgYXQgaQogICAgICAgICAgICBmb3IgKGF1dG8gJnAgOiBsZWZ0X25vcltpXSkgewogICAgICAgICAgICAgICAgcmVzID0gbWF4KHJlcywgcC5maXJzdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQ2hlY2sgc3ViYXJyYXlzIHN0YXJ0aW5nIGF0IGkKICAgICAgICAgICAgZm9yIChhdXRvICZwIDogcmlnaHRfbm9yW2ldKSB7CiAgICAgICAgICAgICAgICByZXMgPSBtYXgocmVzLCBwLmZpcnN0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBNZXJnZSBsZWZ0IGFuZCByaWdodAogICAgICAgICAgICAvLyBGb3IgbWVyZ2luZywgd2UgdHJ5IGFsbCBwYWlycyAoeCBpbiBsZWZ0X25vcltpXSwgeSBpbiByaWdodF9ub3JbaV0pCiAgICAgICAgICAgIC8vIGJ1dCB0aGF0IGlzIE8obl4yKSB3b3JzdCBjYXNlLCB0b28gbGFyZ2UuCgogICAgICAgICAgICAvLyBUbyBvcHRpbWl6ZSwgd2UgY29uc2lkZXIgdGhhdCBub3IgaXMgbm9uLWluY3JlYXNpbmcgaW4gYml0d2lzZSBvcmRlcj8KICAgICAgICAgICAgLy8gV2UnbGwgZG8gYSB0d28gcG9pbnRlciBhcHByb2FjaCB0byBtZXJnZQoKICAgICAgICAgICAgaW50IHAxID0gMCwgcDIgPSAwOwogICAgICAgICAgICBpbnQgc3oxID0gKGludClsZWZ0X25vcltpXS5zaXplKCk7CiAgICAgICAgICAgIGludCBzejIgPSAoaW50KXJpZ2h0X25vcltpXS5zaXplKCk7CgogICAgICAgICAgICB3aGlsZSAocDEgPCBzejEgJiYgcDIgPCBzejIpIHsKICAgICAgICAgICAgICAgIGludCB2YWwgPSAofihsZWZ0X25vcltpXVtwMV0uZmlyc3QgfCByaWdodF9ub3JbaV1bcDJdLmZpcnN0KSkgJiBtYXNrOwogICAgICAgICAgICAgICAgaWYgKHZhbCA+IHJlcykgcmVzID0gdmFsOwoKICAgICAgICAgICAgICAgIC8vIEluY3JlYXNlIHBvaW50ZXIgdG8gdHJ5IGxhcmdlciBub3IgdmFsdWVzCiAgICAgICAgICAgICAgICBpZiAobGVmdF9ub3JbaV1bcDFdLmZpcnN0ID4gcmlnaHRfbm9yW2ldW3AyXS5maXJzdCkgcDErKzsKICAgICAgICAgICAgICAgIGVsc2UgcDIrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY291dCA8PCByZXMgPDwgIiAiOwogICAgICAgIH0KICAgICAgICBjb3V0IDw8ICJcbiI7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0K' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
