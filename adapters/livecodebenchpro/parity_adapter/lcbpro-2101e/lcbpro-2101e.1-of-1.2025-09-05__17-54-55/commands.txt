['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBDb25zdGFudHMKY29uc3RleHByIGludCBNQVhOID0gNzAwMDA7CgovLyBHbG9iYWwgdmFyaWFibGVzIGZvciBlYWNoIHRlc3QgY2FzZQppbnQgbjsKc3RyaW5nIHM7CnZlY3RvcjxpbnQ+IHRyZWVbTUFYTisxXTsKdmVjdG9yPGludD4gb25lczsKCi8vIEZvciBMQ0EKaW50IExPRzsKaW50IHVwW01BWE4rMV1bMjBdOwppbnQgZGVwdGhbTUFYTisxXTsKCi8vIERpc3RhbmNlcyBtZW1vIGZvciB0aGUgaW5kdWNlZCBncmFwaAovLyBXZSdsbCBjb21wdXRlIGRpc3RhbmNlcyBiZXR3ZWVuICcxJyB2ZXJ0aWNlcyBieSBMQ0EKCi8vIERQIGFycmF5cwppbnQgZHBbTUFYTisxXTsgLy8gbWF4IHBhdGggbGVuZ3RoIHN0YXJ0aW5nIGF0IHZlcnRleCBpCgovLyBDb21wdXRlIGRlcHRoIGFuZCB1cCB0YWJsZSBmb3IgTENBCnZvaWQgZGZzX2xjYShpbnQgdSwgaW50IHApIHsKICAgIHVwW3VdWzBdID0gcDsKICAgIGZvciAoaW50IGkgPSAxOyBpIDwgTE9HOyBpKyspIHsKICAgICAgICBpZiAodXBbdV1baS0xXSA9PSAtMSkgdXBbdV1baV0gPSAtMTsKICAgICAgICBlbHNlIHVwW3VdW2ldID0gdXBbdXBbdV1baS0xXV1baS0xXTsKICAgIH0KICAgIGZvciAoaW50IHYgOiB0cmVlW3VdKSB7CiAgICAgICAgaWYgKHYgPT0gcCkgY29udGludWU7CiAgICAgICAgZGVwdGhbdl0gPSBkZXB0aFt1XSArIDE7CiAgICAgICAgZGZzX2xjYSh2LCB1KTsKICAgIH0KfQoKaW50IGxjYShpbnQgYSwgaW50IGIpIHsKICAgIGlmIChkZXB0aFthXSA8IGRlcHRoW2JdKSBzd2FwKGEsIGIpOwogICAgaW50IGRpZmYgPSBkZXB0aFthXSAtIGRlcHRoW2JdOwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBMT0c7IGkrKykgewogICAgICAgIGlmICgoZGlmZiA+PiBpKSAmIDEpIHsKICAgICAgICAgICAgYSA9IHVwW2FdW2ldOwogICAgICAgIH0KICAgIH0KICAgIGlmIChhID09IGIpIHJldHVybiBhOwogICAgZm9yIChpbnQgaSA9IExPRy0xOyBpID49IDA7IGktLSkgewogICAgICAgIGlmICh1cFthXVtpXSAhPSAtMSAmJiB1cFthXVtpXSAhPSB1cFtiXVtpXSkgewogICAgICAgICAgICBhID0gdXBbYV1baV07CiAgICAgICAgICAgIGIgPSB1cFtiXVtpXTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gdXBbYV1bMF07Cn0KCmludCBkaXN0KGludCBhLCBpbnQgYikgewogICAgaW50IGFuY2VzdG9yID0gbGNhKGEsIGIpOwogICAgcmV0dXJuIGRlcHRoW2FdICsgZGVwdGhbYl0gLSAyICogZGVwdGhbYW5jZXN0b3JdOwp9CgovLyBGb3IgbWVtb2l6YXRpb24gb2YgZHAKaW50IHNvbHZlKGludCB1LCBpbnQgcHJldkRpc3QsIHVub3JkZXJlZF9tYXA8aW50LGludD4gJnBvcywgdmVjdG9yPGludD4gJm9uZXMsIHZlY3Rvcjx2ZWN0b3I8aW50Pj4gJmRpc3RNYXQsIHZlY3Rvcjx2ZWN0b3I8aW50Pj4gJm1lbW8pIHsKICAgIGlmIChtZW1vW3Bvc1t1XV1bcHJldkRpc3RdICE9IC0xKSByZXR1cm4gbWVtb1twb3NbdV1dW3ByZXZEaXN0XTsKICAgIGludCByZXQgPSAxOwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCAoaW50KW9uZXMuc2l6ZSgpOyBpKyspIHsKICAgICAgICBpZiAob25lc1tpXSA9PSB1KSBjb250aW51ZTsKICAgICAgICBpbnQgdyA9IGRpc3RNYXRbcG9zW3VdXVtpXTsKICAgICAgICBpZiAocHJldkRpc3QgPT0gLTEgfHwgKHByZXZEaXN0ICogMiA8PSB3KSkgewogICAgICAgICAgICBpbnQgY2FuZCA9IDEgKyBzb2x2ZShvbmVzW2ldLCB3LCBwb3MsIG9uZXMsIGRpc3RNYXQsIG1lbW8pOwogICAgICAgICAgICBpZiAoY2FuZCA+IHJldCkgcmV0ID0gY2FuZDsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gbWVtb1twb3NbdV1dW3ByZXZEaXN0XSA9IHJldDsKfQoKaW50IG1haW4oKSB7CiAgICBpb3M6OnN5bmNfd2l0aF9zdGRpbyhmYWxzZSk7CiAgICBjaW4udGllKG51bGxwdHIpOwoKICAgIGludCB0OyBjaW4gPj4gdDsKCiAgICBMT0cgPSAxOwogICAgd2hpbGUgKCgxIDw8IExPRykgPD0gTUFYTikgTE9HKys7CgogICAgd2hpbGUgKHQtLSkgewogICAgICAgIGNpbiA+PiBuOwogICAgICAgIGNpbiA+PiBzOwoKICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8PSBuOyBpKyspIHsKICAgICAgICAgICAgdHJlZVtpXS5jbGVhcigpOwogICAgICAgICAgICBkcFtpXSA9IC0xOwogICAgICAgIH0KCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuLTE7IGkrKykgewogICAgICAgICAgICBpbnQgdSx2OyBjaW4gPj4gdSA+PiB2OwogICAgICAgICAgICB0cmVlW3VdLnB1c2hfYmFjayh2KTsKICAgICAgICAgICAgdHJlZVt2XS5wdXNoX2JhY2sodSk7CiAgICAgICAgfQoKICAgICAgICAvLyBQcmVwYXJlIExDQQogICAgICAgIGRlcHRoWzFdID0gMDsKICAgICAgICBtZW1zZXQodXAsIC0xLCBzaXplb2YodXApKTsKICAgICAgICBkZnNfbGNhKDEsIC0xKTsKCiAgICAgICAgb25lcy5jbGVhcigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGlmIChzW2ldID09ICcxJykgb25lcy5wdXNoX2JhY2soaSsxKTsKICAgICAgICB9CgogICAgICAgIGludCBrID0gKGludClvbmVzLnNpemUoKTsKCiAgICAgICAgLy8gSWYgbm8gb25lcywgb3V0cHV0IC0xIGZvciBhbGwKICAgICAgICBpZiAoayA9PSAwKSB7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb3V0IDw8IC0xIDw8IChpID09IG4tMSA/ICdcbicgOiAnICcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgLy8gQnVpbGQgcG9zaXRpb24gbWFwIGZvciBvbmVzCiAgICAgICAgdW5vcmRlcmVkX21hcDxpbnQsaW50PiBwb3M7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBrOyBpKyspIHsKICAgICAgICAgICAgcG9zW29uZXNbaV1dID0gaTsKICAgICAgICB9CgogICAgICAgIC8vIFByZWNvbXB1dGUgZGlzdGFuY2VzIGJldHdlZW4gJ29uZXMnIHZlcnRpY2VzCiAgICAgICAgLy8gV2Ugd2lsbCBzdG9yZSB0aGVtIGluIGRpc3RNYXRba11ba10KICAgICAgICB2ZWN0b3I8dmVjdG9yPGludD4+IGRpc3RNYXQoaywgdmVjdG9yPGludD4oaywgMCkpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKSB7CiAgICAgICAgICAgIGZvciAoaW50IGogPSBpKzE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgICAgIGludCBkID0gZGlzdChvbmVzW2ldLCBvbmVzW2pdKTsKICAgICAgICAgICAgICAgIGRpc3RNYXRbaV1bal0gPSBkOwogICAgICAgICAgICAgICAgZGlzdE1hdFtqXVtpXSA9IGQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEZvciBEUCBtZW1vOiBpbmRleCBieSBub2RlIGluZGV4IGFuZCBwcmV2aW91cyBlZGdlIGxlbmd0aAogICAgICAgIC8vIFByZXZpb3VzIGVkZ2UgbGVuZ3RoIGNhbiBiZSAtMSAoc3RhcnQpIG9yIGRpc3RhbmNlcyBiZXR3ZWVuIG9uZXMKICAgICAgICAvLyBXZSdsbCBzdG9yZSBwcmV2RGlzdCBhcyBpbmRleDogLTEgbWVhbnMgc3RhcnQsIG90aGVyd2lzZSB0aGUgZGlzdGFuY2UgdmFsdWUgaXRzZWxmCiAgICAgICAgLy8gVG8gaGFuZGxlIHRoaXMgZWZmaWNpZW50bHksIHdlIHN0b3JlIG1lbW8gYXMgdmVjdG9yPHZlY3RvcjxpbnQ+PiB3aGVyZSB0aGUgc2Vjb25kIGRpbWVuc2lvbiBpcyBtYXggcG9zc2libGUgZGlzdGFuY2VzICsgMQogICAgICAgIC8vIE1heCBkaXN0IGNhbiBiZSB1cCB0byBuLTEuIFRvIHJlZHVjZSBzdGF0ZSwgd2Ugc3RvcmUgbWVtbyBrZXllZCBieSAobm9kZSwgbGFzdCBlZGdlIGxlbmd0aCkgd2hlcmUgbGFzdCBlZGdlIGxlbmd0aCBpcyBhbiBpbnQgdmFsdWUuIEJ1dCBkaXN0YW5jZXMgY2FuIGJlIGxhcmdlLgogICAgICAgIC8vIFdlJ2xsIHVzZSB1bm9yZGVyZWRfbWFwIGZvciBzZWNvbmQgZGltZW5zaW9uLgoKICAgICAgICAvLyBUbyBhdm9pZCBUTEUsIHdlIHVzZSBpdGVyYXRpdmUgRFAgd2l0aCBtZW1vaXphdGlvbiBhbmQgcHJ1bmluZy4KICAgICAgICAvLyBCdXQgY29uc3RyYWludHMgYXJlIGxhcmdlLCBzbyB3ZSBtdXN0IG9wdGltaXplLgoKICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBpbXBsZW1lbnQgYSBERlMgKyBtZW1vIHdpdGggcHJ1bmluZywgYW5kIHN0b3JlIG1lbW8gYnkgbm9kZSBhbmQgbGFzdCBlZGdlIGxlbmd0aC4KICAgICAgICAvLyBXZSdsbCBpbXBsZW1lbnQgbWVtbyBhcyBtYXA8aW50LGludD4gZHAgZm9yIGVhY2ggbm9kZSBrZXllZCBieSBwcmV2IGVkZ2UgbGVuZ3RoLgoKICAgICAgICAvLyBXZSdsbCBpbXBsZW1lbnQgYSBEUCB3aXRoIG1lbW8gdXNpbmcgYSBoYXNoIG1hcC4KCiAgICAgICAgLy8gQmVjYXVzZSBudW1iZXIgb2Ygb25lcyBjYW4gYmUgbGFyZ2UgKHVwIHRvIG4pLCBidXQgbiA8PSA3ZTQsIGFuZCB3ZSBoYXZlIHVwIHRvIDEwXjQgdGVzdCBjYXNlcyB0b3RhbCB3aXRoIHN1bSBuIDw9N2U0LAogICAgICAgIC8vIHdlIG11c3Qgb3B0aW1pemUuCgogICAgICAgIC8vIE9ic2VydmF0aW9uOiB0aGUgcHJvYmxlbSBhc2tzIGZvciBtYXhpbXVtIGxlbmd0aCBuaWNlIHBhdGggc3RhcnRpbmcgYXQgZWFjaCB2ZXJ0ZXggbGFiZWxlZCAxLgogICAgICAgIC8vIFdlJ2xsIGNvbXB1dGUgZHAgZm9yIGVhY2ggdmVydGV4IGxhYmVsZWQgMS4KCiAgICAgICAgLy8gV2UnbGwgc3RvcmUgbWVtbyBhcyB2ZWN0b3I8dW5vcmRlcmVkX21hcDxpbnQsaW50Pj4gZHBNZW1vKGspOwoKICAgICAgICB2ZWN0b3I8dW5vcmRlcmVkX21hcDxpbnQsaW50Pj4gZHBNZW1vKGspOwoKICAgICAgICBmdW5jdGlvbjxpbnQoaW50LGludCk+IGRmcyA9IFsmXShpbnQgdUluZGV4LCBpbnQgcHJldkRpc3QpIC0+IGludCB7CiAgICAgICAgICAgIGlmIChkcE1lbW9bdUluZGV4XS5jb3VudChwcmV2RGlzdCkpIHJldHVybiBkcE1lbW9bdUluZGV4XVtwcmV2RGlzdF07CiAgICAgICAgICAgIGludCByZXMgPSAxOyAvLyBhdCBsZWFzdCB0aGUgbm9kZSBpdHNlbGYKICAgICAgICAgICAgZm9yIChpbnQgdkluZGV4ID0gMDsgdkluZGV4IDwgazsgdkluZGV4KyspIHsKICAgICAgICAgICAgICAgIGlmICh2SW5kZXggPT0gdUluZGV4KSBjb250aW51ZTsKICAgICAgICAgICAgICAgIGludCB3ID0gZGlzdE1hdFt1SW5kZXhdW3ZJbmRleF07CiAgICAgICAgICAgICAgICBpZiAocHJldkRpc3QgPT0gLTEgfHwgMiAqIHByZXZEaXN0IDw9IHcpIHsKICAgICAgICAgICAgICAgICAgICBpbnQgY2FuZCA9IDEgKyBkZnModkluZGV4LCB3KTsKICAgICAgICAgICAgICAgICAgICBpZiAoY2FuZCA+IHJlcykgcmVzID0gY2FuZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBkcE1lbW9bdUluZGV4XVtwcmV2RGlzdF0gPSByZXM7CiAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgfTsKCiAgICAgICAgdmVjdG9yPGludD4gYW5zKG4rMSwgLTEpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKSB7CiAgICAgICAgICAgIGFuc1tvbmVzW2ldXSA9IGRmcyhpLCAtMSk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8PSBuOyBpKyspIHsKICAgICAgICAgICAgY291dCA8PCBhbnNbaV0gPDwgKGkgPT0gbiA/ICdcbicgOiAnICcpOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
