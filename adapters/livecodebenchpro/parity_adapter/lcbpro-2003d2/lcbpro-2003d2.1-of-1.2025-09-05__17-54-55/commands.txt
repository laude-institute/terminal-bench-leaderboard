['asciinema rec --stdin /logs/agent.cast', 'Enter']
['clear', 'Enter']
["echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBUaGUgcHJvYmxlbSBpbnZvbHZlcyBjb21wdXRpbmcgZihrKSA9IG1heCB4IHBvc3NpYmxlIGFmdGVyIGFwcGx5aW5nIG9wZXJhdGlvbnMgc3RhcnRpbmcgZnJvbSB4PWsKLy8gYW5kIHRoZW4gc3VtbWluZyBmKGspIG92ZXIgayA9IDAgdG8gbS4KCi8vIEVhY2ggb3BlcmF0aW9uIHBpY2tzIGFuIHVudXNlZCBzZXF1ZW5jZSBpIGFuZCBzZXRzIHggPSBtZXgoeCwgYV9pKS4KLy8gV2Ugd2FudCB0byBmaW5kIHN1bV97az0wfV5tIGYoaykuCgovLyBLZXkgb2JzZXJ2YXRpb25zIGZyb20gZWRpdG9yaWFsIGFuYWx5c2lzIChwcm9ibGVtIGtub3duIGFzIExpdmVDb2RlQmVuY2ggUHJvIDIwMDNEMik6Ci8vIC0gZihrKSBpcyBhIG5vbi1kZWNyZWFzaW5nIGZ1bmN0aW9uIGluIGsuCi8vIC0gRWFjaCBzZXF1ZW5jZSBpIGRlZmluZXMgYSByZWFjaGFibGUgbWV4IG9wZXJhdGlvbi4KLy8gLSBUaGUgbWF4aW11bSByZWFjaGFibGUgeCBhZnRlciBvcGVyYXRpb25zIGZyb20gaW5pdGlhbCB4PWsgZm9ybXMgaW50ZXJ2YWxzIGJhc2VkIG9uIHRoZSBzZXF1ZW5jZXMnIGVsZW1lbnRzLgovLyAtIFRoZSBwcm9ibGVtIHJlZHVjZXMgdG8gZmluZGluZyBpbnRlcnZhbHMgW0wsUl0gd2hlcmUgZihrKSA9IGNvbnN0YW50IGFuZCBzdW1taW5nIG92ZXIgdGhlc2UgaW50ZXJ2YWxzLgoKLy8gSW1wbGVtZW50YXRpb24gT3V0bGluZToKLy8gMS4gRm9yIGVhY2ggc2VxdWVuY2UsIGNvbXB1dGUgdGhlIG1pbmltYWwgZWxlbWVudCBpbiBpdC4KLy8gMi4gRnJvbSBzZXF1ZW5jZXMsIGRldGVybWluZSBmb3IgZWFjaCBtaW5pbWFsIGVsZW1lbnQgdGhlIG1heGltdW0gbWV4IGl0IGNhbiBwcm9kdWNlLgovLyAzLiBTb3J0IHNlcXVlbmNlcyBieSB0aGVpciBtaW5pbWFsIGVsZW1lbnRzLgovLyA0LiBVc2luZyB0aGUgbWluaW1hbCBlbGVtZW50cywgYnVpbGQgaW50ZXJ2YWxzIG9mIGsgd2hlcmUgZihrKSBpcyBjb25zdGFudC4KLy8gNS4gU3VtIG92ZXIgayBmcm9tIDAgdG8gbSB1c2luZyB0aGVzZSBpbnRlcnZhbHMuCgovLyBUaGUgc29sdXRpb24gdXNlcyBjb29yZGluYXRlIGNvbXByZXNzaW9uIGFuZCBwcmVmaXggbWF4IGFycmF5cy4KCmludCBtYWluKCkgewogICAgaW9zOjpzeW5jX3dpdGhfc3RkaW8oZmFsc2UpOwogICAgY2luLnRpZShudWxscHRyKTsKCiAgICBpbnQgdDsgY2luID4+IHQ7CiAgICB3aGlsZSAodC0tKSB7CiAgICAgICAgaW50IG47IGxvbmcgbG9uZyBtOwogICAgICAgIGNpbiA+PiBuID4+IG07CgogICAgICAgIHZlY3Rvcjxsb25nIGxvbmc+IG1pbnMobik7CiAgICAgICAgdmVjdG9yPGxvbmcgbG9uZz4gbWF4X21leChuKTsKCiAgICAgICAgbG9uZyBsb25nIG1heF9hID0gMDsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgaW50IGw7IGNpbiA+PiBsOwogICAgICAgICAgICB2ZWN0b3I8bG9uZyBsb25nPiBzZXEobCk7CiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbDsgaisrKSB7CiAgICAgICAgICAgICAgICBjaW4gPj4gc2VxW2pdOwogICAgICAgICAgICAgICAgbWF4X2EgPSBtYXgobWF4X2EsIHNlcVtqXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbG9uZyBsb25nIG1uID0gKm1pbl9lbGVtZW50KHNlcS5iZWdpbigpLCBzZXEuZW5kKCkpOwogICAgICAgICAgICBtaW5zW2ldID0gbW47CiAgICAgICAgICAgIC8vIENvbXB1dGUgbWV4IG9mIHttbn0gVSBzZXEKICAgICAgICAgICAgLy8gU2luY2UgbWV4KHgsIHNlcSkgZGVwZW5kcyBvbiB4IGFuZCBzZXEsCiAgICAgICAgICAgIC8vIHdlIGFzc3VtZSBtZXggZnVuY3Rpb24gaGVyZSBhcyBtaW5pbWFsIG1pc3NpbmcgaW50ZWdlciBmcm9tIHRoZSBzZXQgaW5jbHVkaW5nIHguCiAgICAgICAgICAgIC8vIEJ1dCBzaW5jZSB3ZSBvbmx5IG5lZWQgbWF4IG1leCByZWFjaGFibGUgZnJvbSBtaW5pbWFsIGVsZW1lbnQsIHdlIGNhbiBhcHByb3hpbWF0ZSBhcyBtYXggZWxlbWVudCArIDEKICAgICAgICAgICAgbG9uZyBsb25nIG14ID0gMDsKICAgICAgICAgICAgdW5vcmRlcmVkX3NldDxsb25nIGxvbmc+IHMoc2VxLmJlZ2luKCksIHNlcS5lbmQoKSk7CiAgICAgICAgICAgIHdoaWxlIChzLmNvdW50KG14KSkgbXgrKzsKICAgICAgICAgICAgbWF4X21leFtpXSA9IG14OwogICAgICAgIH0KCiAgICAgICAgLy8gU29ydCBzZXF1ZW5jZXMgYnkgdGhlaXIgbWluaW1hbCBlbGVtZW50cwogICAgICAgIHZlY3RvcjxwYWlyPGxvbmcgbG9uZyxsb25nIGxvbmc+PiB2ZWMobik7CiAgICAgICAgZm9yIChpbnQgaT0wOyBpPG47IGkrKykgdmVjW2ldID0ge21pbnNbaV0sIG1heF9tZXhbaV19OwogICAgICAgIHNvcnQodmVjLmJlZ2luKCksIHZlYy5lbmQoKSk7CgogICAgICAgIC8vIE1lcmdlIGludGVydmFscyBbbWluc1tpXSwgbWF4X21leFtpXV0gdG8gYnVpbGQgY292ZXJhZ2UKICAgICAgICB2ZWN0b3I8cGFpcjxsb25nIGxvbmcsIGxvbmcgbG9uZz4+IGludGVydmFsczsKICAgICAgICBmb3IgKGF1dG8gJnAgOiB2ZWMpIHsKICAgICAgICAgICAgbG9uZyBsb25nIEwgPSBwLmZpcnN0LCBSID0gcC5zZWNvbmQ7CiAgICAgICAgICAgIGlmICghaW50ZXJ2YWxzLmVtcHR5KCkgJiYgaW50ZXJ2YWxzLmJhY2soKS5zZWNvbmQgPj0gTCkgewogICAgICAgICAgICAgICAgaW50ZXJ2YWxzLmJhY2soKS5zZWNvbmQgPSBtYXgoaW50ZXJ2YWxzLmJhY2soKS5zZWNvbmQsIFIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaW50ZXJ2YWxzLnB1c2hfYmFjayh7TCwgUn0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBmKGspID0gbWF4IHJlYWNoYWJsZSB4IHN0YXJ0aW5nIGZyb20gay4KICAgICAgICAvLyBGb3IgayBpbiBbaW50ZXJ2YWxzW2ldLmZpcnN0LCBpbnRlcnZhbHNbaV0uc2Vjb25kXSwgZihrKSA+PSBpbnRlcnZhbHNbaV0uc2Vjb25kCiAgICAgICAgLy8gZihrKSBpcyBub24tZGVjcmVhc2luZywgc28gZm9yIGsgPCBpbnRlcnZhbHNbMF0uZmlyc3QsIGYoaykgPSBrCiAgICAgICAgLy8gQmV0d2VlbiBpbnRlcnZhbHMsIGYoaykgPSBrCgogICAgICAgIC8vIFdlIHN1bSBmKGspIGZvciBrID0gMCB0byBtCiAgICAgICAgLy8gV2UgcHJvY2VzcyBpbnRlcnZhbHMgYW5kIHN1bSBvdmVyIHBpZWNlcwoKICAgICAgICBsb25nIGxvbmc2NCA9IFsmXShsb25nIGxvbmcgeCkgeyByZXR1cm4geCAqICh4ICsgMSkgLyAyOyB9OwoKICAgICAgICBsb25nIGxvbmcgcmVzID0gMDsKICAgICAgICBsb25nIGxvbmcgcHJldiA9IC0xOwoKICAgICAgICBmb3IgKGF1dG8gJmludHYgOiBpbnRlcnZhbHMpIHsKICAgICAgICAgICAgbG9uZyBsb25nIEwgPSBpbnR2LmZpcnN0LCBSID0gaW50di5zZWNvbmQ7CiAgICAgICAgICAgIGlmIChMID4gbSkgYnJlYWs7CiAgICAgICAgICAgIGlmIChwcmV2ICsgMSA8IEwpIHsKICAgICAgICAgICAgICAgIC8vIHN1bSBrIGZvciBrIGluIFtwcmV2KzEsIEwtMV0KICAgICAgICAgICAgICAgIGxvbmcgbG9uZyBmcm9tID0gcHJldiArIDE7CiAgICAgICAgICAgICAgICBsb25nIGxvbmcgdG8gPSBtaW4oTCAtIDEsIG0pOwogICAgICAgICAgICAgICAgaWYgKGZyb20gPD0gdG8pIHsKICAgICAgICAgICAgICAgICAgICByZXMgKz0gbG9uZzY0KHRvKSAtIGxvbmc2NChmcm9tIC0gMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gc3VtIGYoaykgPSBSIGZvciBrIGluIFttYXgoTCwgcHJldisxKSwgbWluKFIsIG0pXQogICAgICAgICAgICBsb25nIGxvbmcgZnJvbSA9IG1heChMLCBwcmV2ICsgMSk7CiAgICAgICAgICAgIGxvbmcgbG9uZyB0byA9IG1pbihSLCBtKTsKICAgICAgICAgICAgaWYgKGZyb20gPD0gdG8pIHsKICAgICAgICAgICAgICAgIHJlcyArPSAodG8gLSBmcm9tICsgMSkgKiBSOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHByZXYgPSBtYXgocHJldiwgdG8pOwogICAgICAgIH0KCiAgICAgICAgLy8gc3VtIHJlbWFpbmluZyBrIGZvciBrIGluIFtwcmV2KzEsIG1dCiAgICAgICAgaWYgKHByZXYgPCBtKSB7CiAgICAgICAgICAgIGxvbmcgbG9uZyBmcm9tID0gcHJldiArIDE7CiAgICAgICAgICAgIGxvbmcgbG9uZyB0byA9IG07CiAgICAgICAgICAgIHJlcyArPSBsb25nNjQodG8pIC0gbG9uZzY0KGZyb20gLSAxKTsKICAgICAgICB9CgogICAgICAgIGNvdXQgPDwgcmVzIDw8ICJcbiI7CiAgICB9CiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp", 'Enter']
['asciinema rec --stdin /logs/tests.cast', 'Enter']
['clear', 'Enter']
['bash ', '/tests/run-tests.sh', 'Enter']
['C-d']
['C-d']
