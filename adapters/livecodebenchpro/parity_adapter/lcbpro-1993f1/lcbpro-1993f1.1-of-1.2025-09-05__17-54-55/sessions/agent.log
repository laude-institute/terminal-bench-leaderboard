[?2004hroot@d7569cd3c849:/app# asciinema rec --stdin /logs/agent.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@d7569cd3c849:/app# clear
[?2004l[H[J[3J[?2004hroot@d7569cd3c849:/app# echo 'I2luY2x1ZGUgPGJpdHMvc3RkYysrLmg+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgppbnQgbWFpbigpIHsKICAgIGlvczo6c3luY193aXRoX3N0ZGlvKGZhbHNlKTsKICAgIGNpbi50aWUobnVsbHB0cik7CgogICAgaW50IHQ7CiAgICBjaW4gPj4gdDsKICAgIHdoaWxlICh0LS0pIHsKICAgICAgICBpbnQgbiwgaywgdywgaDsKICAgICAgICBjaW4gPj4gbiA+PiBrID4+IHcgPj4gaDsKICAgICAgICBzdHJpbmcgczsKICAgICAgICBjaW4gPj4gczsKCiAgICAgICAgaW50IHggPSAwLCB5ID0gMDsKICAgICAgICBpbnQgY291bnRfb3JpZ2luID0gMDsKCiAgICAgICAgLy8gQ3VycmVudCBkaXJlY3Rpb25zIG1hcHBpbmcKICAgICAgICAvLyBXZSdsbCBrZWVwIHRyYWNrIG9mIGN1cnJlbnQgZGlyZWN0aW9uIGNoYW5nZXMKICAgICAgICAvLyBsMnIgbWFwczogTCA8LT4gUiwgdTJkIG1hcHM6IFUgPC0+IEQKICAgICAgICAvLyBXZSB3aWxsIHN0b3JlIGN1cnJlbnQgbWFwcGluZyBmb3IgZWFjaCBjaGFyCgogICAgICAgIC8vIEluaXRpYWxseSwgZGlyZWN0aW9ucyBhcmUgbm9ybWFsCiAgICAgICAgLy8gV2UgY2FuIHJlcHJlc2VudCBkaXJlY3Rpb24gYnkgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgZHgsIGR5CgogICAgICAgIGF1dG8gZ2V0X2R4ID0gWyZdKGNoYXIgYykgewogICAgICAgICAgICBpZiAoYyA9PSAnTCcpIHJldHVybiAtMTsKICAgICAgICAgICAgaWYgKGMgPT0gJ1InKSByZXR1cm4gMTsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfTsKCiAgICAgICAgYXV0byBnZXRfZHkgPSBbJl0oY2hhciBjKSB7CiAgICAgICAgICAgIGlmIChjID09ICdVJykgcmV0dXJuIDE7CiAgICAgICAgICAgIGlmIChjID09ICdEJykgcmV0dXJuIC0xOwogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9OwoKICAgICAgICAvLyBXZSB3aWxsIGtlZXAgdHJhY2sgb2Ygd2hldGhlciBob3Jpem9udGFsIG9yIHZlcnRpY2FsIGZsaXAgYWN0aXZlCiAgICAgICAgYm9vbCBmbGlwTFIgPSBmYWxzZTsKICAgICAgICBib29sIGZsaXBVRCA9IGZhbHNlOwoKICAgICAgICAvLyBUbyBmbGlwIHRoZSBzY3JpcHQsIHdlIGRvOgogICAgICAgIC8vIEZvciB2ZXJ0aWNhbCBib3JkZXIgdmlvbGF0aW9uOiBmbGlwIEwgYW5kIFIgaW4gZW50aXJlIHNjcmlwdCAoZmxpcExSIHRvZ2dsZSkKICAgICAgICAvLyBGb3IgaG9yaXpvbnRhbCBib3JkZXIgdmlvbGF0aW9uOiBmbGlwIFUgYW5kIEQgaW4gZW50aXJlIHNjcmlwdCAoZmxpcFVEIHRvZ2dsZSkKCiAgICAgICAgLy8gV2Ugc2ltdWxhdGUgdGhlIHJvYm90IG1vdmVzIG92ZXIgayByZXBldGl0aW9ucyBvZiB0aGUgc2NyaXB0CiAgICAgICAgZm9yIChpbnQgcmVwZWF0ID0gMDsgcmVwZWF0IDwgazsgKSB7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICAgICAgICBjaGFyIGMgPSBzW2ldOwogICAgICAgICAgICAgICAgLy8gQXBwbHkgZmxpcHMKICAgICAgICAgICAgICAgIGlmIChmbGlwTFIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PSAnTCcpIGMgPSAnUic7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PSAnUicpIGMgPSAnTCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZmxpcFVEKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT0gJ1UnKSBjID0gJ0QnOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT0gJ0QnKSBjID0gJ1UnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGludCBueCA9IHggKyBnZXRfZHgoYyk7CiAgICAgICAgICAgICAgICBpbnQgbnkgPSB5ICsgZ2V0X2R5KGMpOwoKICAgICAgICAgICAgICAgIC8vIENoZWNrIGJvcmRlciB2aW9sYXRpb24KICAgICAgICAgICAgICAgIGlmIChueCA8IDAgfHwgbnggPiB3KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRmxpcCBML1IKICAgICAgICAgICAgICAgICAgICBmbGlwTFIgPSAhZmxpcExSOwogICAgICAgICAgICAgICAgICAgIC8vIEFmdGVyIGZsaXBwaW5nIHNjcmlwdCwgd2UgbXVzdCByZXN0YXJ0IGZyb20gY3VycmVudCBpbnN0cnVjdGlvbiBpIHdpdGhvdXQgaW5jcmVtZW50aW5nIGkKICAgICAgICAgICAgICAgICAgICAvLyBTbyBicmVhayB0aGUgaW5uZXIgbG9vcCB0byByZXN0YXJ0IHRoZSBzY3JpcHQgYXQgaS10aCBpbnN0cnVjdGlvbgogICAgICAgICAgICAgICAgICAgIC8vIEJ1dCB3ZSBuZWVkIHRvIGNvbnRpbnVlIGZyb20gdGhpcyBpbnN0cnVjdGlvbiBpbiB0aGUgc2FtZSByZXBlYXQKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChueSA8IDAgfHwgbnkgPiBoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRmxpcCBVL0QKICAgICAgICAgICAgICAgICAgICBmbGlwVUQgPSAhZmxpcFVEOwogICAgICAgICAgICAgICAgICAgIC8vIFJlc3RhcnQgc2NyaXB0IGZyb20gY3VycmVudCBpbnN0cnVjdGlvbiBpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gVmFsaWQgbW92ZQogICAgICAgICAgICAgICAgeCA9IG54OwogICAgICAgICAgICAgICAgeSA9IG55OwoKICAgICAgICAgICAgICAgIGlmICh4ID09IDAgJiYgeSA9PSAwKQogICAgICAgICAgICAgICAgICAgICsrY291bnRfb3JpZ2luOwoKICAgICAgICAgICAgICAgIC8vIElmIGxhc3QgaW5zdHJ1Y3Rpb24gb2YgdGhlIHNjcmlwdCBmaW5pc2hlZCwgaW5jcmVtZW50IHJlcGVhdAogICAgICAgICAgICAgICAgaWYgKGkgPT0gbiAtIDEpIHsKICAgICAgICAgICAgICAgICAgICByZXBlYXQrKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY291dCA8PCBjb3VudF9vcmlnaW4gPDwgIlxuIjsKICAgIH0KCiAgICByZXR1cm4gMDsKfQo=' | base64 -d > /app/main.cpp; tmux wait -S done
[?2004l[?2004hroot@d7569cd3c849:/app# [?2004l
exit
[0;32masciinema: recording finished[0m
[0;32masciinema: asciicast saved to /logs/agent.cast[0m
[?2004hroot@d7569cd3c849:/app# 